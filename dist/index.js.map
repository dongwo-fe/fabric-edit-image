{"version":3,"file":"index.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/utils/utils.ts","../src/core/initAligningGuidelines.ts","../src/core/initControlsRotate.ts","../src/core/initCenterAlign.ts","../src/utils/hotEventKeys.ts","../src/core/initHotKeys.ts","../src/utils/events/types.ts","../src/utils/events/index.ts","../src/utils/index.ts","../src/core/initControls.ts","../src/core/ruler/utils.ts","../src/core/ruler/guideline.ts","../src/core/ruler/ruler.ts","../src/core/ruler/index.ts","../src/core/EditorGroupText.ts","../src/core/index.ts","../src/components/Draw/CanvasContext.tsx","../src/components/Editor/Input/index.tsx","../src/components/Draw/hooks/useAttr.ts","../src/components/Draw/hooks/useLock.ts","../src/utils/calculate.ts","../src/components/Editor/Components/Attr/Components/Size/index.tsx","../src/components/Editor/Components/Attr/Components/Pos/index.tsx","../src/components/Editor/Components/Attr/Components/Trans/index.tsx","../src/components/Draw/hooks/usePageAlign.ts","../src/components/Editor/Components/Attr/Components/PageAlign/config.ts","../src/components/Editor/Components/Attr/Components/PageAlign/index.tsx","../src/components/Editor/Components/Attr/Components/CoverOrder/config.ts","../src/components/Draw/hooks/userOrder.ts","../src/components/Editor/Components/Attr/Components/CoverOrder/index.tsx","../src/components/Editor/Components/Attr/ImageSpaceAttr/index.tsx","../src/components/Editor/Select/index.tsx","../src/components/Editor/InputNumber/index.tsx","../src/components/Editor/Components/Attr/Components/Text/config.ts","../src/api/text.ts","../src/components/Draw/hooks/useChangeFontFamily.ts","../src/components/Editor/Components/Attr/Components/Text/index.tsx","../src/components/Editor/Components/Attr/TextSpaceAttr/index.tsx","../src/components/Editor/AttrArea/config.tsx","../src/components/Editor/Context/index.tsx","../src/utils/tool.ts","../src/api/fetch.ts","../src/api/image.ts","../src/components/Draw/hooks/useToast.ts","../src/components/Draw/hooks/useClipImage.ts","../src/components/Draw/hooks/useEvents.ts","../src/core/EditorWorkspace.ts","../src/components/Draw/hooks/useSave.ts","../src/components/Draw/Draw.tsx","../src/components/Editor/ImportFile/index.tsx","../src/hooks/useMemoizedFn.ts","../src/hooks/useHistoryTravel.ts","../src/components/Draw/hooks/useHistory.ts","../src/components/Editor/HeaderControl/index.tsx","../src/components/Editor/SaveButton/index.tsx","../src/components/Editor/Components/Resource/ImageResource/dropDown.tsx","../src/components/Draw/hooks/useAddObject.ts","../src/components/Editor/Components/Resource/ImageResource/index.tsx","../src/components/Editor/Components/Resource/TextResource/config.ts","../src/components/Editor/Components/Resource/TextResource/index.tsx","../src/components/Editor/ResourceArea/config.ts","../src/components/Editor/ResourceArea/index.tsx","../src/components/Editor/OrderList/index.tsx","../src/components/Editor/Components/Attr/WorkSpaceAttr/index.tsx","../src/components/Editor/AttrArea/index.tsx","../src/components/Editor/index.tsx","../src/index.tsx"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","type ReFn = (...args: any) => void\ntype ThFn = (fn: ReFn, timer: number) => ReFn\nexport const throttle: ThFn = (fn, timer) => {\n  let time: any = null\n  return (...args: any) => {\n    if (time) clearTimeout(time)\n    time = setTimeout(() => {\n      // @ts-ignore\n      fn.apply(this, args)\n    }, timer)\n  }\n}\n\nexport function uuid(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0\n    const v = c === 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\nexport function retainNumber(value: string | number): string {\n  if (!value) return '0'\n  const result = ('' + value).replace(/[^0-9]/g, '')\n  return Number(result) + ''\n}\n\n\nexport function arrayMoveMutable(array: Array<any>, fromIndex: number, toIndex: number) {\n  const startIndex = fromIndex < 0 ? array.length + fromIndex : fromIndex;\n\n  if (startIndex >= 0 && startIndex < array.length) {\n    const endIndex = toIndex < 0 ? array.length + toIndex : toIndex;\n    const [item] = array.splice(fromIndex, 1);\n    array.splice(endIndex, 0, item);\n  }\n}\n\nexport function arrayMoveImmutable(array: Array<any>, fromIndex: number, toIndex: number) {\n  array = [...array];\n  arrayMoveMutable(array, fromIndex, toIndex);\n  return array;\n}\n","// @ts-nocheck\nimport { fabric } from 'fabric';\n\ndeclare interface VerticalLine {\n  x: number;\n  y1: number;\n  y2: number;\n}\n\ndeclare interface HorizontalLine {\n  x1: number;\n  x2: number;\n  y: number;\n}\n\nfunction initAligningGuidelines(canvas: fabric.Canvas) {\n  let disabled = false\n  const ctx = canvas.getSelectionContext();\n  const aligningLineOffset = 5;\n  const aligningLineMargin = 4;\n  const aligningLineWidth = 1;\n  const aligningLineColor = 'rgb(0,255,0)';\n  let viewportTransform: number[] | undefined;\n  let zoom = 1;\n\n  function drawVerticalLine(coords: VerticalLine) {\n    drawLine(\n      coords.x + 0.5,\n      coords.y1 > coords.y2 ? coords.y2 : coords.y1,\n      coords.x + 0.5,\n      coords.y2 > coords.y1 ? coords.y2 : coords.y1\n    );\n  }\n\n  function drawHorizontalLine(coords: HorizontalLine) {\n    drawLine(\n      coords.x1 > coords.x2 ? coords.x2 : coords.x1,\n      coords.y + 0.5,\n      coords.x2 > coords.x1 ? coords.x2 : coords.x1,\n      coords.y + 0.5\n    );\n  }\n\n  function drawLine(x1: number, y1: number, x2: number, y2: number) {\n    if (viewportTransform == null || disabled) return;\n\n    ctx.save();\n    ctx.lineWidth = aligningLineWidth;\n    ctx.strokeStyle = aligningLineColor;\n    ctx.beginPath();\n    ctx.moveTo(x1 * zoom + viewportTransform[4], y1 * zoom + viewportTransform[5]);\n    ctx.lineTo(x2 * zoom + viewportTransform[4], y2 * zoom + viewportTransform[5]);\n    ctx.stroke();\n    ctx.restore();\n  }\n\n  function isInRange(value1: number, value2: number) {\n    value1 = Math.round(value1);\n    value2 = Math.round(value2);\n    for (let i = value1 - aligningLineMargin, len = value1 + aligningLineMargin; i <= len; i++) {\n      if (i === value2) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  const verticalLines: VerticalLine[] = [];\n  const horizontalLines: HorizontalLine[] = [];\n\n  canvas.on('mouse:down', () => {\n    viewportTransform = canvas.viewportTransform;\n    zoom = canvas.getZoom();\n  });\n\n  canvas.on('object:moving', (e) => {\n    if (viewportTransform === undefined || e.target === undefined) return;\n\n    const activeObject = e.target;\n    const canvasObjects = canvas.getObjects();\n    const activeObjectCenter = activeObject.getCenterPoint();\n    const activeObjectLeft = activeObjectCenter.x;\n    const activeObjectTop = activeObjectCenter.y;\n    const activeObjectBoundingRect = activeObject.getBoundingRect();\n    const activeObjectHeight = activeObjectBoundingRect.height / viewportTransform[3];\n    const activeObjectWidth = activeObjectBoundingRect.width / viewportTransform[0];\n    let horizontalInTheRange = false;\n    let verticalInTheRange = false;\n    const transform = canvas._currentTransform;\n\n    if (!transform) return;\n\n    // It should be trivial to DRY this up by encapsulating (repeating) creation of x1, x2, y1, and y2 into functions,\n    // but we're not doing it here for perf. reasons -- as this a function that's invoked on every mouse move\n\n    for (let i = canvasObjects.length; i--;) {\n      // eslint-disable-next-line no-continue\n      if (canvasObjects[i] === activeObject) continue;\n\n      // 排除辅助线\n      if (\n        activeObject instanceof fabric.GuideLine &&\n        canvasObjects[i] instanceof fabric.GuideLine\n      ) {\n        continue;\n      }\n\n      const objectCenter = canvasObjects[i].getCenterPoint();\n      const objectLeft = objectCenter.x;\n      const objectTop = objectCenter.y;\n      const objectBoundingRect = canvasObjects[i].getBoundingRect();\n      const objectHeight = objectBoundingRect.height / viewportTransform[3];\n      const objectWidth = objectBoundingRect.width / viewportTransform[0];\n\n      // snap by the horizontal center line\n      if (isInRange(objectLeft, activeObjectLeft)) {\n        verticalInTheRange = true;\n        verticalLines.push({\n          x: objectLeft,\n          y1:\n            objectTop < activeObjectTop\n              ? objectTop - objectHeight / 2 - aligningLineOffset\n              : objectTop + objectHeight / 2 + aligningLineOffset,\n          y2:\n            activeObjectTop > objectTop\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(objectLeft, activeObjectTop),\n          'center',\n          'center'\n        );\n      }\n\n      // snap by the left edge\n      if (isInRange(objectLeft - objectWidth / 2, activeObjectLeft - activeObjectWidth / 2)) {\n        verticalInTheRange = true;\n        verticalLines.push({\n          x: objectLeft - objectWidth / 2,\n          y1:\n            objectTop < activeObjectTop\n              ? objectTop - objectHeight / 2 - aligningLineOffset\n              : objectTop + objectHeight / 2 + aligningLineOffset,\n          y2:\n            activeObjectTop > objectTop\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(objectLeft - objectWidth / 2 + activeObjectWidth / 2, activeObjectTop),\n          'center',\n          'center'\n        );\n      }\n\n      // snap by the right edge\n      if (isInRange(objectLeft + objectWidth / 2, activeObjectLeft + activeObjectWidth / 2)) {\n        verticalInTheRange = true;\n        verticalLines.push({\n          x: objectLeft + objectWidth / 2,\n          y1:\n            objectTop < activeObjectTop\n              ? objectTop - objectHeight / 2 - aligningLineOffset\n              : objectTop + objectHeight / 2 + aligningLineOffset,\n          y2:\n            activeObjectTop > objectTop\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(objectLeft + objectWidth / 2 - activeObjectWidth / 2, activeObjectTop),\n          'center',\n          'center'\n        );\n      }\n\n      // snap by the vertical center line\n      if (isInRange(objectTop, activeObjectTop)) {\n        horizontalInTheRange = true;\n        horizontalLines.push({\n          y: objectTop,\n          x1:\n            objectLeft < activeObjectLeft\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\n          x2:\n            activeObjectLeft > objectLeft\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(activeObjectLeft, objectTop),\n          'center',\n          'center'\n        );\n      }\n\n      // snap by the top edge\n      if (isInRange(objectTop - objectHeight / 2, activeObjectTop - activeObjectHeight / 2)) {\n        horizontalInTheRange = true;\n        horizontalLines.push({\n          y: objectTop - objectHeight / 2,\n          x1:\n            objectLeft < activeObjectLeft\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\n          x2:\n            activeObjectLeft > objectLeft\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(activeObjectLeft, objectTop - objectHeight / 2 + activeObjectHeight / 2),\n          'center',\n          'center'\n        );\n      }\n\n      // snap by the bottom edge\n      if (isInRange(objectTop + objectHeight / 2, activeObjectTop + activeObjectHeight / 2)) {\n        horizontalInTheRange = true;\n        horizontalLines.push({\n          y: objectTop + objectHeight / 2,\n          x1:\n            objectLeft < activeObjectLeft\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\n          x2:\n            activeObjectLeft > objectLeft\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\n        });\n        activeObject.setPositionByOrigin(\n          new fabric.Point(activeObjectLeft, objectTop + objectHeight / 2 - activeObjectHeight / 2),\n          'center',\n          'center'\n        );\n      }\n    }\n\n    if (!horizontalInTheRange) {\n      horizontalLines.length = 0;\n    }\n\n    if (!verticalInTheRange) {\n      verticalLines.length = 0;\n    }\n  });\n\n  canvas.on('before:render', () => {\n    // fix 保存图片时报错\n    try {\n      canvas.clearContext(canvas.contextTop);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n\n  canvas.on('after:render', () => {\n    for (let i = verticalLines.length; i--;) {\n      drawVerticalLine(verticalLines[i]);\n    }\n    for (let j = horizontalLines.length; j--;) {\n      drawHorizontalLine(horizontalLines[j]);\n    }\n\n    // noinspection NestedAssignmentJS\n    verticalLines.length = 0;\n    horizontalLines.length = 0;\n  });\n\n  canvas.on('mouse:up', () => {\n    verticalLines.length = 0;\n    horizontalLines.length = 0;\n    canvas.renderAll();\n  });\n\n  return {\n    disable: () => disabled = true,\n    enable: () => disabled = false\n  }\n}\n\nexport default initAligningGuidelines;\n","// @ts-nocheck\nimport { fabric } from 'fabric';\n\n// 定义旋转光标样式，根据转动角度设定光标旋转\nfunction rotateIcon(angle: number) {\n  return `url(\"data:image/svg+xml,%3Csvg height='18' width='18' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'%3E%3Cg fill='none' transform='rotate(${angle} 16 16)'%3E%3Cpath d='M22.4484 0L32 9.57891L22.4484 19.1478V13.1032C17.6121 13.8563 13.7935 17.6618 13.0479 22.4914H19.2141L9.60201 32.01L0 22.4813H6.54912C7.36524 14.1073 14.0453 7.44023 22.4484 6.61688V0Z' fill='white'/%3E%3Cpath d='M24.0605 3.89587L29.7229 9.57896L24.0605 15.252V11.3562C17.0479 11.4365 11.3753 17.0895 11.3048 24.0879H15.3048L9.60201 29.7308L3.90932 24.0879H8.0806C8.14106 15.3223 15.2645 8.22345 24.0605 8.14313V3.89587Z' fill='black'/%3E%3C/g%3E%3C/svg%3E \") 12 12,crosshair`;\n}\n\nfunction initControlsRotate(canvas: fabric.Canvas) {\n  // 添加旋转控制响应区域\n  fabric.Object.prototype.controls.mtr = new fabric.Control({\n    x: -0.5,\n    y: -0.5,\n    offsetY: -10,\n    offsetX: -10,\n    rotate: 20,\n    actionName: 'rotate',\n    actionHandler: fabric.controlsUtils.rotationWithSnapping,\n    render: () => '',\n  });\n  // ↖左上\n  fabric.Object.prototype.controls.mtr2 = new fabric.Control({\n    x: 0.5,\n    y: -0.5,\n    offsetY: -10,\n    offsetX: 10,\n    rotate: 20,\n    actionName: 'rotate',\n    actionHandler: fabric.controlsUtils.rotationWithSnapping,\n    render: () => '',\n  }); // ↗右上\n  fabric.Object.prototype.controls.mtr3 = new fabric.Control({\n    x: 0.5,\n    y: 0.5,\n    offsetY: 10,\n    offsetX: 10,\n    rotate: 20,\n    actionName: 'rotate',\n    actionHandler: fabric.controlsUtils.rotationWithSnapping,\n    render: () => '',\n  }); // ↘右下\n  fabric.Object.prototype.controls.mtr4 = new fabric.Control({\n    x: -0.5,\n    y: 0.5,\n    offsetY: 10,\n    offsetX: -10,\n    rotate: 20,\n    actionName: 'rotate',\n    actionHandler: fabric.controlsUtils.rotationWithSnapping,\n    render: () => '',\n  }); // ↙左下\n\n  // 渲染时，执行\n  canvas.on('after:render', () => {\n    const activeObj = canvas.getActiveObject();\n    const angle = activeObj?.angle?.toFixed(2);\n    if (angle !== undefined) {\n      fabric.Object.prototype.controls.mtr.cursorStyle = rotateIcon(Number(angle));\n      fabric.Object.prototype.controls.mtr2.cursorStyle = rotateIcon(Number(angle) + 90);\n      fabric.Object.prototype.controls.mtr3.cursorStyle = rotateIcon(Number(angle) + 180);\n      fabric.Object.prototype.controls.mtr4.cursorStyle = rotateIcon(Number(angle) + 270);\n    }\n  });\n\n  // 旋转时，实时更新旋转控制图标\n  canvas.on('object:rotating', (event) => {\n    const body = canvas.lowerCanvasEl.nextSibling as HTMLElement;\n    const angle = canvas.getActiveObject()?.angle?.toFixed(2);\n    if (angle === undefined) return;\n    switch (event.transform?.corner) {\n      case 'mtr':\n        body.style.cursor = rotateIcon(Number(angle));\n        break;\n      case 'mtr2':\n        body.style.cursor = rotateIcon(Number(angle) + 90);\n        break;\n      case 'mtr3':\n        body.style.cursor = rotateIcon(Number(angle) + 180);\n        break;\n      case 'mtr4':\n        body.style.cursor = rotateIcon(Number(angle) + 270);\n        break;\n      default:\n        break;\n    } // 设置四角旋转光标\n  });\n}\n\nexport default initControlsRotate;\n","// @ts-nocheck\nimport { fabric } from 'fabric';\n\nclass CenterAlign {\n  canvas: fabric.Canvas;\n  constructor(canvas: fabric.Canvas) {\n    this.canvas = canvas;\n  }\n\n  centerH(workspace: fabric.Rect, object: fabric.Object) {\n    return this.canvas._centerObject(\n      object,\n      new fabric.Point(workspace.getCenterPoint().x, object.getCenterPoint().y)\n    );\n  }\n\n  center(workspace: fabric.Rect, object: fabric.Object) {\n    const center = workspace.getCenterPoint();\n    return this.canvas._centerObject(object, center);\n  }\n\n  centerV(workspace: fabric.Rect, object: fabric.Object) {\n    return this.canvas._centerObject(\n      object,\n      new fabric.Point(object.getCenterPoint().x, workspace.getCenterPoint().y)\n    );\n  }\n\n  position(name: 'centerH' | 'center' | 'centerV') {\n    const anignType = ['centerH', 'center', 'centerV'];\n    const activeObject = this.canvas.getActiveObject();\n    if (anignType.includes(name) && activeObject) {\n      const defaultWorkspace = this.canvas.getObjects().find((item) => item.id === 'workspace');\n      if (defaultWorkspace) {\n        this[name](defaultWorkspace, activeObject);\n      }\n      this.canvas.renderAll();\n    }\n  }\n}\n\nexport default CenterAlign;\n","export const KeyNames = {\n  lrdu: 'left,right,down,up', // 上下左右移动\n  shiftMove: 'shift+left,shift+right,shift+down,shift+up',\n  delete: 'delete,backspace',// 删除\n  ctrlz: 'ctrl+z,command+z', // 撤销\n  ctrlshiftz: 'ctrl+shift+z,command+shift+z', // 重做\n  enter: 'enter',\n  esc: 'esc',\n  zoom:'command+*,command+*,ctrl+*,ctrl+*'\n};\n","import hotkeys from 'hotkeys-js';\nimport type { fabric } from 'fabric';\nimport { KeyNames } from '../utils/hotEventKeys';\n\n\nfunction initHotkeys(canvas: fabric.Canvas) {\n\n  // 移动快捷键\n  hotkeys(KeyNames.lrdu, (_event, handler) => {\n    const activeObject = canvas.getActiveObject();\n    if (!activeObject) return;\n    switch (handler.key) {\n      case 'left':\n        if (activeObject.left === undefined) return;\n        activeObject.set('left', activeObject.left - 1);\n        break;\n      case 'right':\n        if (activeObject.left === undefined) return;\n        activeObject.set('left', activeObject.left + 1);\n        break;\n      case 'down':\n        if (activeObject.top === undefined) return;\n        activeObject.set('top', activeObject.top + 1);\n        break;\n      case 'up':\n        if (activeObject.top === undefined) return;\n        activeObject.set('top', activeObject.top - 1);\n        break;\n      default:\n    }\n    canvas.renderAll();\n  });\n\n  // 移动快捷键\n  hotkeys(KeyNames.shiftMove, (_event, handler) => {\n    const activeObject = canvas.getActiveObject();\n    if (!activeObject) return;\n    switch (handler.key) {\n      case 'shift+left':\n        if (activeObject.left === undefined) return;\n        activeObject.set('left', activeObject.left - 10);\n        break;\n      case 'shift+right':\n        if (activeObject.left === undefined) return;\n        activeObject.set('left', activeObject.left + 10);\n        break;\n      case 'shift+down':\n        if (activeObject.top === undefined) return;\n        activeObject.set('top', activeObject.top + 10);\n        break;\n      case 'shift+up':\n        if (activeObject.top === undefined) return;\n        activeObject.set('top', activeObject.top - 10);\n        break;\n      default:\n    }\n    canvas.renderAll();\n  });\n\n}\n\nexport default initHotkeys;\nexport { hotkeys };\n","export const Types = {\n  /**\n   * 比例修改\n   */\n  CHANGE_SCALE: 'changeScale',\n  /**\n   * 监听画布修改啊，这个事件用来做数据存储的，主要是增删改会调用\n   * TODO 如果新增了增删改的操作记得调用这个方法\n   */\n  CANVAS_CHANGE: 'canvasChange',\n  /**\n   * 剪裁图片\n   */\n  CLIP_IMAGE: 'clipImage',\n\n  SHOW_LOADING: 'show_loading'\n}\n","import EventEmitter from 'events'\nimport { Types } from './types';\n\n\nexport const events = new EventEmitter()\nexport { Types }\n","export const isObject = (value: unknown): value is Record<any, any> =>\n  value !== null && typeof value === 'object';\nexport const isFunction = (value: unknown): value is (...args: any) => any =>\n  typeof value === 'function';\nexport const isString = (value: unknown): value is string => typeof value === 'string';\nexport const isBoolean = (value: unknown): value is boolean => typeof value === 'boolean';\nexport const isNumber = (value: unknown): value is number => typeof value === 'number';\nexport const isUndef = (value: unknown): value is undefined => typeof value === 'undefined';\nexport const isUrl = (value: unknown): value is string => value && isString(value) && value.startsWith('http')\n","// @ts-nocheck\nimport { fabric } from 'fabric';\nimport { events, Types } from '../utils/events';\nimport { uuid } from '../utils/utils';\nimport { isNumber, isUndef } from '../utils';\nimport { scaleX, scaleY } from 'fontfaceobserver';\n// 竖线\nconst verticalImg = 'https://ossprod.jrdaimao.com/file/1691055918106919.svg'\n// 圆点\nconst edgeImg = 'https://ossprod.jrdaimao.com/file/1691055938230666.svg'\n// 旋转\nconst rotateImg = 'https://ossprod.jrdaimao.com/file/1691574701262500.svg'\n// 横线\nconst horizontalImg = 'https://ossprod.jrdaimao.com/file/1691055964267980.svg'\n// 复制\nconst copyImg = 'https://ossprod.jrdaimao.com/file/1691660518949720.svg'\n// 删除\nconst deleteImg = 'https://ossprod.jrdaimao.com/file/1691662370382182.svg'\n// 剪裁\nconst clipImg = 'https://ossprod.jrdaimao.com/file/1691718842537240.svg'\n// bg\nconst topBgImg = 'https://ossprod.jrdaimao.com/file/1691978616647204.svg'\n/**\n * 实际场景: 在进行某个对象缩放的时候，由于fabric.js默认精度使用的是toFixed(2)。\n * 此处为了缩放的精度更准确一些，因此将NUM_FRACTION_DIGITS默认值改为4，即toFixed(4).\n */\nfabric.Object.NUM_FRACTION_DIGITS = 4;\n\n// 隐藏八个角缩放按钮\nexport const setBaseControlVisible = (object, visible) => {\n  if (!object) return\n  object.setControlsVisibility({\n    mt: visible,\n    mb: visible,\n    ml: visible,\n    mr: visible,\n    tl: visible,\n    tr: visible,\n    bl: visible,\n    br: visible\n  })\n}\n// 隐藏自定义高级操作按钮\nexport const setHighControlVisible = (object, visible) => {\n  if (!object) return\n  object.setControlsVisibility({\n    copy: visible,\n    delete: visible,\n    clip: visible,\n    rotate: visible,\n    topBg: visible\n  })\n}\n\nfunction drawImg(\n  ctx: CanvasRenderingContext2D,\n  left: number,\n  top: number,\n  img: HTMLImageElement,\n  wSize: number,\n  hSize: number,\n  angle: number | undefined\n) {\n  if (angle === undefined) return;\n  ctx.save();\n  ctx.translate(left, top);\n  ctx.rotate(fabric.util.degreesToRadians(angle));\n  ctx.drawImage(img, -wSize / 2, -hSize / 2, wSize, hSize);\n  ctx.restore();\n}\n\n// 中间横杠\nfunction intervalControl() {\n  const verticalImgIcon = document.createElement('img');\n  verticalImgIcon.src = verticalImg;\n\n  const horizontalImgIcon = document.createElement('img');\n  horizontalImgIcon.src = horizontalImg;\n\n  function renderIcon(\n    ctx: CanvasRenderingContext2D,\n    left: number,\n    top: number,\n    styleOverride: any,\n    fabricObject: fabric.Object\n  ) {\n    drawImg(ctx, left, top, verticalImgIcon, 20, 25, fabricObject.angle);\n  }\n\n  function renderIconHoz(\n    ctx: CanvasRenderingContext2D,\n    left: number,\n    top: number,\n    styleOverride: any,\n    fabricObject: fabric.Object\n  ) {\n    drawImg(ctx, left, top, horizontalImgIcon, 25, 20, fabricObject.angle);\n  }\n\n  // 中间横杠\n  fabric.Object.prototype.controls.ml = new fabric.Control({\n    x: -0.5,\n    y: 0,\n    offsetX: -1,\n    cursorStyleHandler: fabric.controlsUtils.scaleSkewCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingXOrSkewingY,\n    getActionName: fabric.controlsUtils.scaleOrSkewActionName,\n    render: renderIcon,\n  });\n\n  fabric.Object.prototype.controls.mr = new fabric.Control({\n    x: 0.5,\n    y: 0,\n    offsetX: 1,\n    cursorStyleHandler: fabric.controlsUtils.scaleSkewCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingXOrSkewingY,\n    getActionName: fabric.controlsUtils.scaleOrSkewActionName,\n    render: renderIcon,\n  });\n\n  fabric.Object.prototype.controls.mb = new fabric.Control({\n    x: 0,\n    y: 0.5,\n    offsetY: 1,\n    cursorStyleHandler: fabric.controlsUtils.scaleSkewCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingYOrSkewingX,\n    getActionName: fabric.controlsUtils.scaleOrSkewActionName,\n    render: renderIconHoz,\n  });\n\n  fabric.Object.prototype.controls.mt = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    offsetY: -1,\n    cursorStyleHandler: fabric.controlsUtils.scaleSkewCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingYOrSkewingX,\n    getActionName: fabric.controlsUtils.scaleOrSkewActionName,\n    render: renderIconHoz,\n  });\n}\n\n// 顶点\nfunction peakControl() {\n  const img = document.createElement('img');\n  img.src = edgeImg;\n\n  function renderIconEdge(\n    ctx: CanvasRenderingContext2D,\n    left: number,\n    top: number,\n    styleOverride: any,\n    fabricObject: fabric.Object\n  ) {\n    drawImg(ctx, left, top, img, 25, 25, fabricObject.angle);\n  }\n\n  // 四角图标\n  fabric.Object.prototype.controls.tl = new fabric.Control({\n    x: -0.5,\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.scaleCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingEqually,\n    render: renderIconEdge,\n  });\n  fabric.Object.prototype.controls.bl = new fabric.Control({\n    x: -0.5,\n    y: 0.5,\n    cursorStyleHandler: fabric.controlsUtils.scaleCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingEqually,\n    render: renderIconEdge,\n  });\n  fabric.Object.prototype.controls.tr = new fabric.Control({\n    x: 0.5,\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.scaleCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingEqually,\n    render: renderIconEdge,\n  });\n  fabric.Object.prototype.controls.br = new fabric.Control({\n    x: 0.5,\n    y: 0.5,\n    cursorStyleHandler: fabric.controlsUtils.scaleCursorStyleHandler,\n    actionHandler: fabric.controlsUtils.scalingEqually,\n    render: renderIconEdge,\n  });\n}\n\n// 旋转\nfunction rotationControl() {\n  const img = document.createElement('img');\n  img.src = rotateImg;\n\n  function renderIconRotate(\n    ctx: CanvasRenderingContext2D,\n    left: number,\n    top: number,\n    styleOverride: any,\n    fabricObject: fabric.Object\n  ) {\n    drawImg(ctx, left, top, img, 60, 60, fabricObject.angle);\n  }\n\n  // 旋转图标\n  fabric.Object.prototype.controls.rotate = new fabric.Control({\n    y: 0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    actionHandler: fabric.controlsUtils.rotationWithSnapping,\n    offsetY: 25,\n    actionName: 'rotate',\n    cursorStyle: 'pointer',\n    render: renderIconRotate,\n  });\n\n}\n\n// 自定义操作\nfunction initMainControl() {\n  const topBgEl = document.createElement('img')\n  topBgEl.src = topBgImg\n  const copyImageEl = document.createElement('img')\n  copyImageEl.src = copyImg\n  const deleteImageEl = document.createElement('img')\n  deleteImageEl.src = deleteImg\n  const clipImageEl = document.createElement('img')\n  clipImageEl.src = clipImg\n\n  function cloneObject(eventData, transform) {\n    const target = transform.target;\n    if (!target) return\n    const canvas = target.canvas;\n    events.emit(Types.SHOW_LOADING, true)\n    target.clone(function (cloned) {\n      cloned.set({\n        id: uuid(),\n        left: target.left + 20,\n        top: target.top + 20,\n        sourceSrc: target.sourceSrc,\n        rawScaleX: target.rawScaleX,\n        rawScaleY: target.rawScaleY,\n        rectDiffLeft: target.rectDiffLeft,\n        rectDiffTop: target.rectDiffTop,\n        prevWidth: target.prevWidth,\n        prevHeight: target.prevHeight\n      })\n      cloned.setCoords()\n      canvas.add(cloned)\n      canvas.setActiveObject(cloned)\n      canvas.renderAll()\n      events.emit(Types.SHOW_LOADING, false)\n    });\n  }\n\n  function deleteObject(eventData, transform) {\n    const target = transform.target;\n    if (!target) return\n    const canvas = target.canvas;\n    const clipRect = canvas.getObjects().find(item => item.id === 'currentClipRect')\n    if (clipRect) {\n      canvas.remove(clipRect)\n    }\n    canvas.remove(target);\n    canvas.requestRenderAll();\n  }\n\n  function clipObject(eventData, transform) {\n    const image = transform.target;\n    if (image.type !== 'image') return\n    const canvas = image.canvas;\n    const rectLeft = image.left // 矩形的位置X\n    const rectTop = image.top // 矩形的位置Y\n    const sourceSrc = image.sourceSrc // 原图的src，做回显的时候需要用\n    const rawScaleX = image.rawScaleX || image.scaleX // 原图的缩放比例X\n    const rawScaleY = image.rawScaleY || image.scaleY // 原图的缩放比例Y\n    const rectDiffLeft = image.rectDiffLeft // 图片距离rect裁剪框的偏差X\n    const rectDiffTop = image.rectDiffTop // 图片距离rect裁剪框的偏差Y\n    const index = canvas.getObjects().findIndex(item => item.id === image.id); // 获取到裁剪之前的层级\n    const sourceWidth = image.getScaledWidth() // 获取图片的宽，这就是裁剪框的宽\n    const sourceHeight = image.getScaledHeight() // 获取图片的高，这就是裁剪框的高\n    image.clone((o) => image.set({cloneObject: o})) // 克隆一个object，取消裁剪的时候会用到\n    if (sourceSrc) {\n      // 如果有sourceSrc代表之前裁剪过，这里那原图的src进行返显\n      image.setSrc(sourceSrc, () => {\n        canvas.renderAll()\n      }, {crossOrigin: 'anonymous'})\n      /**\n       * 设置原图的位置和原图的缩放比\n       * 缩放比：这个是在外面操作的时候计算好的，直接赋值就行\n       * 位置：\n       */\n      image.set({\n        id: 'clipRawImage',\n        scaleX: rawScaleX,\n        scaleY: rawScaleY,\n        left: !isUndef(rectDiffLeft) ? image.left - (rectDiffLeft * image.scaleX) : image.left,\n        top: !isUndef(rectDiffTop) ? image.top - (rectDiffTop * image.scaleY) : image.top,\n      })\n    }\n    image.bringToFront() // 将这个图片的层级移动到顶层\n    setHighControlVisible(image, false) // 正在裁剪中的图片，把他的一些功能干掉\n    // 创建一个矩形，让他在图片的上面\n    const selectionRect = new fabric.Rect({\n      left: rectLeft,\n      top: rectTop,\n      fill: \"rgba(0,0,0,0.3)\",\n      originX: \"left\",\n      originY: \"top\",\n      stroke: \"black\",\n      opacity: 1,\n      width: sourceWidth,\n      height: sourceHeight,\n      hasRotatingPoint: false,\n      transparentCorners: false,\n      cornerColor: \"white\",\n      cornerStrokeColor: \"black\",\n      borderColor: \"black\",\n      cornerSize: 12,\n      padding: 0,\n      cornerStyle: \"circle\",\n      borderDashArray: [5, 5],\n      borderScaleFactor: 1.3,\n      id: 'currentClipRect',\n      lockMovementX: true,\n      lockMovementY: true,\n      hoverCursor: 'default'\n    });\n    // 存一下原图的src，因为后面裁剪后生成的图片就是base64了\n    image.set({sourceSrc: image.sourceSrc || image._element.src})\n\n    let selectionRectDown = false\n    let imageDown = false\n    // 监听鼠标按下事件\n    selectionRect.on('mousedown', ({}) => selectionRectDown = true)\n    // 监听鼠标缩放事件\n    selectionRect.on('scaling', () => selectionRectDown = false)\n    // 控制rect的拖动区域\n    selectionRect.on('mousemove', ({e}) => {\n      if (!selectionRectDown) return\n      setBaseControlVisible(selectionRect, false)\n      image.set({\n        left: image.left + e.movementX,\n        top: image.top + e.movementY\n      });\n      if (image.left > selectionRect.left) {\n        image.set({left: selectionRect.left})\n      }\n      const rectWidth = selectionRect.getScaledWidth()\n      if (image.left + image.getScaledWidth() <= selectionRect.left + rectWidth) {\n        image.set({left: selectionRect.left + rectWidth - image.getScaledWidth()})\n      }\n      if (image.top > selectionRect.top) {\n        image.set({top: selectionRect.top})\n      }\n      const rectHeight = selectionRect.getScaledHeight()\n      if (image.top + image.getScaledHeight() <= selectionRect.top + rectHeight) {\n        image.set({top: selectionRect.top + rectHeight - image.getScaledHeight()})\n      }\n      canvas.renderAll()\n    })\n    // 监听鼠标抬起事件\n    selectionRect.on('mouseup', () => {\n      selectionRectDown = false\n      setBaseControlVisible(selectionRect, true)\n      canvas.renderAll()\n    })\n    // 监听rect八个角缩放的事件\n    selectionRect.on('scaling', (e) => {\n      const rect = e.transform.target\n      if (rect.left < image.left) {\n        rect.set({left: image.left})\n      }\n      if (rect.top < image.top) {\n        rect.set({top: image.top})\n      }\n      if (rect.left + rect.getScaledWidth() > image.left + image.getScaledWidth()) {\n        rect.set({left: image.left + image.getScaledWidth() - rect.getScaledWidth()})\n      }\n      if (rect.top + rect.getScaledHeight() > image.top + image.getScaledHeight()) {\n        rect.set({top: image.top + image.getScaledHeight() - rect.getScaledHeight()})\n      }\n      if (image.getScaledWidth() / rect.getScaledWidth() < 1) {\n        rect.set({\n          scaleX: image.getScaledWidth() / selectionRect.getScaledWidth() * rect.get('scaleX'),\n          left: image.left,\n        })\n      }\n      if (image.getScaledHeight() / rect.getScaledHeight() < 1) {\n        rect.set({\n          scaleY: image.getScaledHeight() / selectionRect.getScaledHeight() * rect.get('scaleY'),\n          top: image.top\n        })\n      }\n      canvas.renderAll()\n    });\n    // 控制图片的拖动区域\n    image.on('moving', (e) => {\n      const image = e.transform.target\n      if (image.left > selectionRect.left) {\n        image.set({left: selectionRect.left})\n      }\n      if (image.top > selectionRect.top) {\n        image.set({top: selectionRect.top})\n      }\n      const rectWidth = selectionRect.getScaledWidth()\n      if (image.left < selectionRect.left + rectWidth - image.getScaledWidth()) {\n        image.set({left: selectionRect.left + rectWidth - image.getScaledWidth()})\n      }\n      const rectHeight = selectionRect.getScaledHeight()\n      if (image.top < selectionRect.top + rectHeight - image.getScaledHeight()) {\n        image.set({top: selectionRect.top + rectHeight - image.getScaledHeight()})\n      }\n      canvas.renderAll()\n    })\n    // 监听图片八个角缩放事件\n    image.on('scaling', (e) => {\n      const image = e.transform.target\n      if (image.left > selectionRect.left) {\n        image.set({left: selectionRect.left})\n      }\n      if (image.top > selectionRect.top) {\n        image.set({top: selectionRect.top})\n      }\n      if (selectionRect.getScaledWidth() / image.getScaledWidth() > 1) {\n        image.set({scaleX: selectionRect.getScaledWidth() * image.get('scaleX') / image.getScaledWidth()})\n      }\n      if (selectionRect.getScaledHeight() / image.getScaledHeight() > 1) {\n        image.set({scaleY: selectionRect.getScaledHeight() * image.get('scaleY') / image.getScaledHeight()})\n      }\n      canvas.renderAll()\n    });\n    image.on('mousedown', () => imageDown = true)\n    image.on('mousemove', () => {\n      if (imageDown) {\n        setBaseControlVisible(image, false)\n        canvas.renderAll()\n      }\n    })\n    image.on('mouseup', () => {\n      imageDown = false\n      setBaseControlVisible(image, true)\n      canvas.renderAll()\n    })\n    // 矩形不要操作按钮，将它们隐藏\n    setHighControlVisible(selectionRect, false)\n    canvas.add(selectionRect);\n    canvas.setActiveObject(selectionRect)\n    canvas.renderAll();\n    // 告诉HeaderControl我要开始裁剪了\n    events.emit(Types.CLIP_IMAGE, {\n      visible: true, // 展示裁剪确定、取消按钮\n      rawIndex: index, // 裁剪之前的层级index\n      clipImageId: image.id, // 正在被裁剪的图片的id\n    })\n  }\n\n  fabric.Object.prototype.controls.topBg = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: () => {\n    },\n    offsetY: -25,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'image') {\n        drawImg(ctx, left, top, topBgEl, 136, 68, fabricObject.angle);\n      }\n      if (fabricObject.type === 'i-text') {\n        drawImg(ctx, left, top, topBgEl, 90, 68, fabricObject.angle);\n      }\n    },\n  });\n  // 复制\n  fabric.Object.prototype.controls.copy = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: cloneObject,\n    offsetY: -25,\n    offsetX: -30,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'image') {\n        drawImg(ctx, left, top, copyImageEl, 30, 30, fabricObject.angle);\n      }\n    },\n  });\n  // 删除\n  fabric.Object.prototype.controls.delete = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: deleteObject,\n    offsetY: -25,\n    offsetX: 30,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'image') {\n        drawImg(ctx, left, top, deleteImageEl, 30, 30, fabricObject.angle);\n      }\n    },\n  });\n  // 剪裁\n  fabric.Object.prototype.controls.clip = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: clipObject,\n    offsetY: -25,\n    offsetX: 0,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'image') {\n        drawImg(ctx, left, top, clipImageEl, 30, 30, fabricObject.angle);\n      }\n    },\n  });\n  // 复制\n  fabric.Object.prototype.controls.textC = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: cloneObject,\n    offsetY: -25,\n    offsetX: -15,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'i-text') {\n        drawImg(ctx, left, top, copyImageEl, 30, 30, fabricObject.angle);\n      }\n    },\n  });\n  // 删除\n  fabric.Object.prototype.controls.textdelete = new fabric.Control({\n    y: -0.5,\n    cursorStyleHandler: fabric.controlsUtils.rotationStyleHandler,\n    mouseUpHandler: deleteObject,\n    offsetY: -25,\n    offsetX: 15,\n    cursorStyle: 'pointer',\n    render: (ctx, left, top, styleOverride, fabricObject) => {\n      if (fabricObject.type === 'i-text') {\n        drawImg(ctx, left, top, deleteImageEl, 30, 30, fabricObject.angle);\n      }\n    },\n  });\n}\n\nfunction initControls(canvas: fabric.Canvas) {\n  // 顶点图标\n  peakControl();\n  // 中间横杠图标\n  intervalControl();\n  // 旋转图标\n  rotationControl();\n  // 初始化自定义操作\n  initMainControl();\n\n  // 选中样式\n  fabric.Object.prototype.set({\n    transparentCorners: false,\n    borderColor: '#51B9F9',\n    cornerColor: '#FFF',\n    borderScaleFactor: 2.5,\n    cornerStyle: 'circle',\n    cornerStrokeColor: '#0E98FC',\n    borderOpacityWhenMoving: 1,\n  });\n  // textbox保持一致\n  // fabric.Textbox.prototype.controls = fabric.Object.prototype.controls;\n}\n\nexport default initControls;\n","import type { Rect } from './ruler';\nimport { fabric } from 'fabric';\n\n/**\n * 计算尺子间距\n * @param zoom 缩放比例\n * @returns 返回计算出的尺子间距\n */\nconst getGap = (zoom: number) => {\n  const zooms = [0.02, 0.03, 0.05, 0.1, 0.2, 0.5, 1, 2, 5, 10, 18];\n  const gaps = [5000, 2500, 1000, 500, 250, 100, 50, 25, 10, 5, 2];\n\n  let i = 0;\n  while (i < zooms.length && zooms[i] < zoom) {\n    i++;\n  }\n\n  return gaps[i - 1] || 5000;\n};\n\n/**\n * 线段合并\n * @param rect Rect数组\n * @param isHorizontal\n * @returns 合并后的Rect数组\n */\nconst mergeLines = (rect: Rect[], isHorizontal: boolean) => {\n  const axis = isHorizontal ? 'left' : 'top';\n  const length = isHorizontal ? 'width' : 'height';\n  // 先按照 axis 的大小排序\n  rect.sort((a, b) => a[axis] - b[axis]);\n  const mergedLines = [];\n  let currentLine = Object.assign({}, rect[0]);\n  for (const item of rect) {\n    const line = Object.assign({}, item);\n    if (currentLine[axis] + currentLine[length] >= line[axis]) {\n      // 当前线段和下一个线段相交，合并宽度\n      currentLine[length] =\n        Math.max(currentLine[axis] + currentLine[length], line[axis] + line[length]) -\n        currentLine[axis];\n    } else {\n      // 当前线段和下一个线段不相交，将当前线段加入结果数组中，并更新当前线段为下一个线段\n      mergedLines.push(currentLine);\n      currentLine = Object.assign({}, line);\n    }\n  }\n  // 加入数组\n  mergedLines.push(currentLine);\n  return mergedLines;\n};\n\nconst darwLine = (\n  ctx: CanvasRenderingContext2D,\n  options: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n    stroke?: string | CanvasGradient | CanvasPattern;\n    lineWidth?: number;\n  }\n) => {\n  ctx.save();\n  const { left, top, width, height, stroke, lineWidth } = options;\n  ctx.beginPath();\n  stroke && (ctx.strokeStyle = stroke);\n  ctx.lineWidth = lineWidth || 1;\n  ctx.moveTo(left, top);\n  ctx.lineTo(left + width, top + height);\n  ctx.stroke();\n  ctx.restore();\n};\n\nconst darwText = (\n  ctx: CanvasRenderingContext2D,\n  options: {\n    left: number;\n    top: number;\n    text: string;\n    fill?: string | CanvasGradient | CanvasPattern;\n    align?: CanvasTextAlign;\n    angle?: number;\n    fontSize?: number;\n  }\n) => {\n  ctx.save();\n  const { left, top, text, fill, align, angle, fontSize } = options;\n  fill && (ctx.fillStyle = fill);\n  ctx.textAlign = align || 'left';\n  ctx.textBaseline = 'top';\n  ctx.font = `${fontSize || 10}px sans-serif`;\n  if (angle) {\n    ctx.translate(left, top);\n    ctx.rotate((Math.PI / 180) * angle);\n    ctx.translate(-left, -top);\n  }\n  ctx.fillText(text, left, top);\n  ctx.restore();\n};\n\nconst darwRect = (\n  ctx: CanvasRenderingContext2D,\n  options: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n    fill?: string | CanvasGradient | CanvasPattern;\n    stroke?: string;\n    strokeWidth?: number;\n  }\n) => {\n  ctx.save();\n  const { left, top, width, height, fill, stroke, strokeWidth } = options;\n  ctx.beginPath();\n  fill && (ctx.fillStyle = fill);\n  ctx.rect(left, top, width, height);\n  ctx.fill();\n  if (stroke) {\n    ctx.strokeStyle = stroke;\n    ctx.lineWidth = strokeWidth || 1;\n    ctx.stroke();\n  }\n  ctx.restore();\n};\n\nconst drawMask = (\n  ctx: CanvasRenderingContext2D,\n  options: {\n    isHorizontal: boolean;\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n    backgroundColor: string;\n  }\n) => {\n  ctx.save();\n  const { isHorizontal, left, top, width, height, backgroundColor } = options;\n  // 创建一个线性渐变对象\n  const gradient = isHorizontal\n    ? ctx.createLinearGradient(left, height / 2, left + width, height / 2)\n    : ctx.createLinearGradient(width / 2, top, width / 2, height + top);\n  const transparentColor = new fabric.Color(backgroundColor);\n  transparentColor.setAlpha(0);\n  gradient.addColorStop(0, transparentColor.toRgba());\n  gradient.addColorStop(0.33, backgroundColor);\n  gradient.addColorStop(0.67, backgroundColor);\n  gradient.addColorStop(1, transparentColor.toRgba());\n  darwRect(ctx, {\n    left,\n    top,\n    width,\n    height,\n    fill: gradient,\n  });\n  ctx.restore();\n};\n\nexport { getGap, mergeLines, darwRect, darwText, darwLine, drawMask };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n// @ts-nocheck\nimport { fabric } from 'fabric';\n\nexport function setupGuideLine() {\n  if (fabric.GuideLine) {\n    return;\n  }\n\n  fabric.GuideLine = fabric.util.createClass(fabric.Line, {\n    type: 'GuideLine',\n    selectable: false,\n    hasControls: false,\n    hasBorders: false,\n    stroke: '#4bec13',\n    originX: 'center',\n    originY: 'center',\n    padding: 4, // 填充，让辅助线选择范围更大，方便选中\n    globalCompositeOperation: 'difference',\n    axis: 'horizontal',\n    // excludeFromExport: true,\n\n    initialize(points, options) {\n      const isHorizontal = options.axis === 'horizontal';\n      // 指针\n      this.hoverCursor = isHorizontal ? 'ns-resize' : 'ew-resize';\n      // 设置新的点\n      const newPoints = isHorizontal\n        ? [-999999, points, 999999, points]\n        : [points, -999999, points, 999999];\n      // 锁定移动\n      options[isHorizontal ? 'lockMovementX' : 'lockMovementY'] = true;\n      // 调用父类初始化\n      this.callSuper('initialize', newPoints, options);\n\n      // 绑定事件\n      this.on('mousedown:before', (e) => {\n        if (this.activeOn === 'down') {\n          // 设置selectable:false后激活对象才能进行移动\n          this.canvas.setActiveObject(this, e.e);\n        }\n      });\n\n      this.on('moving', (e) => {\n        if (this.canvas.ruler.options.enabled && this.isPointOnRuler(e.e)) {\n          this.moveCursor = 'not-allowed';\n        } else {\n          this.moveCursor = this.isHorizontal() ? 'ns-resize' : 'ew-resize';\n        }\n        this.canvas.fire('guideline:moving', {\n          target: this,\n          e: e.e,\n        });\n      });\n\n      this.on('mouseup', (e) => {\n        // 移动到标尺上，移除辅助线\n        if (this.canvas.ruler.options.enabled && this.isPointOnRuler(e.e)) {\n          // console.log('移除辅助线', this);\n          this.canvas.remove(this);\n          return;\n        }\n        this.moveCursor = this.isHorizontal() ? 'ns-resize' : 'ew-resize';\n        this.canvas.fire('guideline:mouseup', {\n          target: this,\n          e: e.e,\n        });\n      });\n\n      this.on('removed', () => {\n        this.off('removed');\n        this.off('mousedown:before');\n        this.off('moving');\n        this.off('mouseup');\n      });\n    },\n\n    getBoundingRect(absolute, calculate) {\n      this.bringToFront();\n\n      const isHorizontal = this.isHorizontal();\n      const rect = this.callSuper('getBoundingRect', absolute, calculate);\n      rect[isHorizontal ? 'top' : 'left'] += rect[isHorizontal ? 'height' : 'width'] / 2;\n      rect[isHorizontal ? 'height' : 'width'] = 0;\n      return rect;\n    },\n\n    isPointOnRuler(e) {\n      const isHorizontal = this.isHorizontal();\n      const hoveredRuler = this.canvas.ruler.isPointOnRuler(new fabric.Point(e.offsetX, e.offsetY));\n      if (\n        (isHorizontal && hoveredRuler === 'horizontal') ||\n        (!isHorizontal && hoveredRuler === 'vertical')\n      ) {\n        return hoveredRuler;\n      }\n      return false;\n    },\n\n    isHorizontal() {\n      return this.height === 0;\n    },\n  } as fabric.IGuideLineClassOptions);\n\n  fabric.GuideLine.fromObject = function (object, callback) {\n    const clone = fabric.util.object.clone as (object: any, deep: boolean) => any;\n\n    function _callback(instance: any) {\n      delete instance.xy;\n      callback && callback(instance);\n    }\n\n    const options = clone(object, true);\n    const isHorizontal = options.height === 0;\n\n    options.xy = isHorizontal ? options.y1 : options.x1;\n    options.axis = isHorizontal ? 'horizontal' : 'vertical';\n\n    fabric.Object._fromObject(options.type, options, _callback, 'xy');\n  };\n}\n\nexport default fabric.GuideLine;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n// @ts-nocheck\nimport { Canvas, Point, IEvent } from 'fabric/fabric-impl';\nimport { fabric } from 'fabric';\nimport { getGap, mergeLines, darwRect, darwText, darwLine, drawMask } from './utils';\nimport { throttle } from '../../utils/utils';\nimport { setupGuideLine } from './guideline';\n\n/**\n * 配置\n */\nexport interface RulerOptions {\n  /**\n   * Canvas\n   */\n  canvas: Canvas;\n\n  /**\n   * 标尺宽高\n   * @default 20\n   */\n  ruleSize?: number;\n\n  /**\n   * 字体大小\n   * @default 10\n   */\n  fontSize?: number;\n\n  /**\n   * 是否开启标尺\n   * @default false\n   */\n  enabled?: boolean;\n\n  /**\n   * 背景颜色\n   */\n  backgroundColor?: string;\n\n  /**\n   * 文字颜色\n   */\n  textColor?: string;\n\n  /**\n   * 边框颜色\n   */\n  borderColor?: string;\n\n  /**\n   * 高亮颜色\n   */\n  highlightColor?: string;\n}\n\nexport type Rect = { left: number; top: number; width: number; height: number };\n\nexport type HighlightRect = {\n  skip?: 'x' | 'y';\n} & Rect;\n\nclass CanvasRuler {\n  protected ctx: CanvasRenderingContext2D;\n\n  /**\n   * 配置\n   */\n  public options: Required<RulerOptions>;\n\n  /**\n   * 标尺起始点\n   */\n  public startCalibration: undefined | Point;\n\n  private activeOn: 'down' | 'up' = 'up';\n\n  /**\n   * 选取对象矩形坐标\n   */\n  private objectRect:\n    | undefined\n    | {\n        x: HighlightRect[];\n        y: HighlightRect[];\n      };\n\n  /**\n   * 事件句柄缓存\n   */\n  private eventHandler: Record<string, (...args: any) => void> = {\n    // calcCalibration: this.calcCalibration.bind(this),\n    calcObjectRect: throttle(this.calcObjectRect.bind(this), 15),\n    clearStatus: this.clearStatus.bind(this),\n    canvasMouseDown: this.canvasMouseDown.bind(this),\n    canvasMouseMove: throttle(this.canvasMouseMove.bind(this), 15),\n    canvasMouseUp: this.canvasMouseUp.bind(this),\n    render: (e: any) => {\n      // 避免多次渲染\n      if (!e.ctx) return;\n      this.render();\n    },\n  };\n\n  private lastAttr: {\n    status: 'out' | 'horizontal' | 'vertical';\n    cursor: string | undefined;\n    selection: boolean | undefined;\n  } = {\n    status: 'out',\n    cursor: undefined,\n    selection: undefined,\n  };\n\n  private tempGuidelLine: fabric.GuideLine | undefined;\n\n  constructor(_options: RulerOptions) {\n    // 合并默认配置\n    this.options = Object.assign(\n      {\n        ruleSize: 20,\n        fontSize: 10,\n        enabled: false,\n        backgroundColor: '#fff',\n        borderColor: '#ddd',\n        highlightColor: '#007fff',\n        textColor: '#888',\n      },\n      _options\n    );\n\n    this.ctx = this.options.canvas.getContext();\n\n    fabric.util.object.extend(this.options.canvas, {\n      ruler: this,\n    });\n\n    setupGuideLine();\n\n    if (this.options.enabled) {\n      this.enable();\n    }\n  }\n\n  // 销毁\n  public destroy() {\n    this.disable();\n  }\n\n  /**\n   * 移除全部辅助线\n   */\n  public clearGuideline() {\n    this.options.canvas.remove(...this.options.canvas.getObjects(fabric.GuideLine.prototype.type));\n  }\n\n  /**\n   * 显示全部辅助线\n   */\n  public showGuideline() {\n    this.options.canvas.getObjects(fabric.GuideLine.prototype.type).forEach((guideLine) => {\n      guideLine.set('visible', true);\n    });\n    this.options.canvas.renderAll();\n  }\n\n  /**\n   * 隐藏全部辅助线\n   */\n  public hideGuideline() {\n    this.options.canvas.getObjects(fabric.GuideLine.prototype.type).forEach((guideLine) => {\n      guideLine.set('visible', false);\n    });\n    this.options.canvas.renderAll();\n  }\n\n  /**\n   * 启用\n   */\n  public enable() {\n    this.options.enabled = true;\n\n    // 绑定事件\n    this.options.canvas.on('after:render', this.eventHandler.calcObjectRect);\n    this.options.canvas.on('after:render', this.eventHandler.render);\n    this.options.canvas.on('mouse:down', this.eventHandler.canvasMouseDown);\n    this.options.canvas.on('mouse:move', this.eventHandler.canvasMouseMove);\n    this.options.canvas.on('mouse:up', this.eventHandler.canvasMouseUp);\n    this.options.canvas.on('selection:cleared', this.eventHandler.clearStatus);\n\n    // 显示辅助线\n    this.showGuideline();\n\n    // 绘制一次\n    this.render();\n  }\n\n  /**\n   * 禁用\n   */\n  public disable() {\n    // 解除事件\n    this.options.canvas.off('after:render', this.eventHandler.calcObjectRect);\n    this.options.canvas.off('after:render', this.eventHandler.render);\n    this.options.canvas.off('mouse:down', this.eventHandler.canvasMouseDown);\n    this.options.canvas.off('mouse:move', this.eventHandler.canvasMouseMove);\n    this.options.canvas.off('mouse:up', this.eventHandler.canvasMouseUp);\n    this.options.canvas.off('selection:cleared', this.eventHandler.clearStatus);\n\n    // 隐藏辅助线\n    this.hideGuideline();\n\n    this.options.enabled = false;\n  }\n\n  /**\n   * 绘制\n   */\n  public render() {\n    // if (!this.options.enabled) return;\n    const vpt = this.options.canvas.viewportTransform;\n    if (!vpt) return;\n    // 绘制尺子\n    this.draw({\n      isHorizontal: true,\n      rulerLength: this.getSize().width,\n      // startCalibration: -(vpt[4] / vpt[0]),\n      startCalibration: this.startCalibration?.x ? this.startCalibration.x : -(vpt[4] / vpt[0]),\n    });\n    this.draw({\n      isHorizontal: false,\n      rulerLength: this.getSize().height,\n      // startCalibration: -(vpt[5] / vpt[3]),\n      startCalibration: this.startCalibration?.y ? this.startCalibration.y : -(vpt[5] / vpt[3]),\n    });\n    // 绘制左上角的遮罩\n    drawMask(this.ctx, {\n      isHorizontal: true,\n      left: -10,\n      top: -10,\n      width: this.options.ruleSize * 2 + 10,\n      height: this.options.ruleSize + 10,\n      backgroundColor: this.options.backgroundColor,\n    });\n    drawMask(this.ctx, {\n      isHorizontal: false,\n      left: -10,\n      top: -10,\n      width: this.options.ruleSize + 10,\n      height: this.options.ruleSize * 2 + 10,\n      backgroundColor: this.options.backgroundColor,\n    });\n  }\n\n  /**\n   * 获取画板尺寸\n   */\n  private getSize() {\n    return {\n      width: this.options.canvas.width || 0,\n      height: this.options.canvas.height || 0,\n    };\n  }\n\n  private getZoom() {\n    return this.options.canvas.getZoom();\n  }\n\n  private draw(opt: { isHorizontal: boolean; rulerLength: number; startCalibration: number }) {\n    const { isHorizontal, rulerLength, startCalibration } = opt;\n    const zoom = this.getZoom();\n\n    const gap = getGap(zoom);\n    const unitLength = rulerLength / zoom;\n    const startValue = Math[startCalibration > 0 ? 'floor' : 'ceil'](startCalibration / gap) * gap;\n    const startOffset = startValue - startCalibration;\n\n    // 标尺背景\n    const canvasSize = this.getSize();\n    darwRect(this.ctx, {\n      left: 0,\n      top: 0,\n      width: isHorizontal ? canvasSize.width : this.options.ruleSize,\n      height: isHorizontal ? this.options.ruleSize : canvasSize.height,\n      fill: this.options.backgroundColor,\n      stroke: this.options.borderColor,\n    });\n\n    // 颜色\n    const textColor = new fabric.Color(this.options.textColor);\n    // 标尺文字显示\n    for (let i = 0; i + startOffset <= Math.ceil(unitLength); i += gap) {\n      const position = (startOffset + i) * zoom;\n      const textValue = startValue + i + '';\n      const textLength = (10 * textValue.length) / 4;\n      const textX = isHorizontal\n        ? position - textLength - 1\n        : this.options.ruleSize / 2 - this.options.fontSize / 2 - 4;\n      const textY = isHorizontal\n        ? this.options.ruleSize / 2 - this.options.fontSize / 2 - 4\n        : position + textLength;\n      darwText(this.ctx, {\n        text: textValue,\n        left: textX,\n        top: textY,\n        fill: textColor.toRgb(),\n        angle: isHorizontal ? 0 : -90,\n      });\n    }\n\n    // 标尺刻度线显示\n    for (let j = 0; j + startOffset <= Math.ceil(unitLength); j += gap) {\n      const position = Math.round((startOffset + j) * zoom);\n      const left = isHorizontal ? position : this.options.ruleSize - 8;\n      const top = isHorizontal ? this.options.ruleSize - 8 : position;\n      const width = isHorizontal ? 0 : 8;\n      const height = isHorizontal ? 8 : 0;\n      darwLine(this.ctx, {\n        left,\n        top,\n        width,\n        height,\n        stroke: textColor.toRgb(),\n      });\n    }\n\n    // 标尺蓝色遮罩\n    if (this.objectRect) {\n      const axis = isHorizontal ? 'x' : 'y';\n      this.objectRect[axis].forEach((rect) => {\n        // 跳过指定矩形\n        if (rect.skip === axis) {\n          return;\n        }\n\n        // 获取数字的值\n        const roundFactor = (x: number) => Math.round(x / zoom + startCalibration) + '';\n        const leftTextVal = roundFactor(isHorizontal ? rect.left : rect.top);\n        const rightTextVal = roundFactor(\n          isHorizontal ? rect.left + rect.width : rect.top + rect.height\n        );\n\n        const isSameText = leftTextVal === rightTextVal;\n\n        // 背景遮罩\n        const maskOpt = {\n          isHorizontal,\n          width: isHorizontal ? 160 : this.options.ruleSize - 8,\n          height: isHorizontal ? this.options.ruleSize - 8 : 160,\n          backgroundColor: this.options.backgroundColor,\n        };\n        drawMask(this.ctx, {\n          ...maskOpt,\n          left: isHorizontal ? rect.left - 80 : 0,\n          top: isHorizontal ? 0 : rect.top - 80,\n        });\n        if (!isSameText) {\n          drawMask(this.ctx, {\n            ...maskOpt,\n            left: isHorizontal ? rect.width + rect.left - 80 : 0,\n            top: isHorizontal ? 0 : rect.height + rect.top - 80,\n          });\n        }\n\n        // 颜色\n        const highlightColor = new fabric.Color(this.options.highlightColor);\n\n        // 高亮遮罩\n        highlightColor.setAlpha(0.5);\n        darwRect(this.ctx, {\n          left: isHorizontal ? rect.left : this.options.ruleSize - 8,\n          top: isHorizontal ? this.options.ruleSize - 8 : rect.top,\n          width: isHorizontal ? rect.width : 8,\n          height: isHorizontal ? 8 : rect.height,\n          fill: highlightColor.toRgba(),\n        });\n\n        // 两边的数字\n        const pad = this.options.ruleSize / 2 - this.options.fontSize / 2 - 4;\n\n        const textOpt = {\n          fill: highlightColor.toRgba(),\n          angle: isHorizontal ? 0 : -90,\n        };\n\n        darwText(this.ctx, {\n          ...textOpt,\n          text: leftTextVal,\n          left: isHorizontal ? rect.left - 2 : pad,\n          top: isHorizontal ? pad : rect.top - 2,\n          align: isSameText ? 'center' : isHorizontal ? 'right' : 'left',\n        });\n\n        if (!isSameText) {\n          darwText(this.ctx, {\n            ...textOpt,\n            text: rightTextVal,\n            left: isHorizontal ? rect.left + rect.width + 2 : pad,\n            top: isHorizontal ? pad : rect.top + rect.height + 2,\n            align: isHorizontal ? 'left' : 'right',\n          });\n        }\n\n        // 两边的线\n        const lineSize = isSameText ? 8 : 14;\n\n        highlightColor.setAlpha(1);\n\n        const lineOpt = {\n          width: isHorizontal ? 0 : lineSize,\n          height: isHorizontal ? lineSize : 0,\n          stroke: highlightColor.toRgba(),\n        };\n\n        darwLine(this.ctx, {\n          ...lineOpt,\n          left: isHorizontal ? rect.left : this.options.ruleSize - lineSize,\n          top: isHorizontal ? this.options.ruleSize - lineSize : rect.top,\n        });\n\n        if (!isSameText) {\n          darwLine(this.ctx, {\n            ...lineOpt,\n            left: isHorizontal ? rect.left + rect.width : this.options.ruleSize - lineSize,\n            top: isHorizontal ? this.options.ruleSize - lineSize : rect.top + rect.height,\n          });\n        }\n      });\n    }\n    // draw end\n  }\n\n  /**\n   * 计算起始点\n   */\n  // private calcCalibration() {\n  //   if (this.startCalibration) return;\n  //   // console.log('calcCalibration');\n  //   const workspace = this.options.canvas.getObjects().find((item: any) => {\n  //     return item.id === 'workspace';\n  //   });\n  //   if (!workspace) return;\n  //   const rect = workspace.getBoundingRect(false);\n  //   this.startCalibration = new fabric.Point(-rect.left, -rect.top).divide(this.getZoom());\n  // }\n\n  private calcObjectRect() {\n    const activeObjects = this.options.canvas.getActiveObjects();\n    if (activeObjects.length === 0) return;\n    const allRect = activeObjects.reduce((rects, obj) => {\n      const rect: HighlightRect = obj.getBoundingRect(false, true);\n      // 如果是分组单独计算坐标\n      if (obj.group) {\n        const group = {\n          top: 0,\n          left: 0,\n          width: 0,\n          height: 0,\n          scaleX: 1,\n          scaleY: 1,\n          ...obj.group,\n        };\n        // 计算矩形坐标\n        rect.width *= group.scaleX;\n        rect.height *= group.scaleY;\n        const groupCenterX = group.width / 2 + group.left;\n        const objectOffsetFromCenterX = (group.width / 2 + (obj.left || 0)) * (1 - group.scaleX);\n        rect.left += (groupCenterX - objectOffsetFromCenterX) * this.getZoom();\n        const groupCenterY = group.height / 2 + group.top;\n        const objectOffsetFromCenterY = (group.height / 2 + (obj.top || 0)) * (1 - group.scaleY);\n        rect.top += (groupCenterY - objectOffsetFromCenterY) * this.getZoom();\n      }\n      if (obj instanceof fabric.GuideLine) {\n        rect.skip = obj.isHorizontal() ? 'x' : 'y';\n      }\n      rects.push(rect);\n      return rects;\n    }, [] as HighlightRect[]);\n    if (allRect.length === 0) return;\n    this.objectRect = {\n      x: mergeLines(allRect, true),\n      y: mergeLines(allRect, false),\n    };\n  }\n\n  /**\n   * 清除起始点和矩形坐标\n   */\n  private clearStatus() {\n    // this.startCalibration = undefined;\n    this.objectRect = undefined;\n  }\n\n  /**\n    判断鼠标是否在标尺上\n   * @param point\n   * @returns \"vertical\" | \"horizontal\" | false\n   */\n  public isPointOnRuler(point: Point) {\n    if (\n      new fabric.Rect({\n        left: 0,\n        top: 0,\n        width: this.options.ruleSize,\n        height: this.options.canvas.height,\n      }).containsPoint(point)\n    ) {\n      return 'vertical';\n    } else if (\n      new fabric.Rect({\n        left: 0,\n        top: 0,\n        width: this.options.canvas.width,\n        height: this.options.ruleSize,\n      }).containsPoint(point)\n    ) {\n      return 'horizontal';\n    }\n    return false;\n  }\n\n  private canvasMouseDown(e: IEvent<MouseEvent>) {\n    if (!e.pointer || !e.absolutePointer) return;\n    const hoveredRuler = this.isPointOnRuler(e.pointer);\n    if (hoveredRuler && this.activeOn === 'up') {\n      // 备份属性\n      this.lastAttr.selection = this.options.canvas.selection;\n      this.options.canvas.selection = false;\n      this.activeOn = 'down';\n\n      this.tempGuidelLine = new fabric.GuideLine(\n        hoveredRuler === 'horizontal' ? e.absolutePointer.y : e.absolutePointer.x,\n        {\n          axis: hoveredRuler,\n          visible: false,\n        }\n      );\n\n      this.options.canvas.add(this.tempGuidelLine);\n      this.options.canvas.setActiveObject(this.tempGuidelLine);\n\n      this.options.canvas._setupCurrentTransform(e.e, this.tempGuidelLine, true);\n\n      this.tempGuidelLine.fire('down', this.getCommonEventInfo(e));\n    }\n  }\n\n  private getCommonEventInfo = (e: IEvent<MouseEvent>) => {\n    if (!this.tempGuidelLine || !e.absolutePointer) return;\n    return {\n      e: e.e,\n      transform: this.tempGuidelLine.get('transform'),\n      pointer: {\n        x: e.absolutePointer.x,\n        y: e.absolutePointer.y,\n      },\n      target: this.tempGuidelLine,\n    };\n  };\n\n  private canvasMouseMove(e: IEvent<MouseEvent>) {\n    if (!e.pointer) return;\n\n    if (this.tempGuidelLine && e.absolutePointer) {\n      const pos: Partial<fabric.IGuideLineOptions> = {};\n      if (this.tempGuidelLine.axis === 'horizontal') {\n        pos.top = e.absolutePointer.y;\n      } else {\n        pos.left = e.absolutePointer.x;\n      }\n      this.tempGuidelLine.set({ ...pos, visible: true });\n\n      this.options.canvas.requestRenderAll();\n\n      const event = this.getCommonEventInfo(e);\n      this.options.canvas.fire('object:moving', event);\n      this.tempGuidelLine.fire('moving', event);\n    }\n\n    const hoveredRuler = this.isPointOnRuler(e.pointer);\n    if (!hoveredRuler) {\n      // 鼠标从里面出去\n      if (this.lastAttr.status !== 'out') {\n        // 更改鼠标指针\n        this.options.canvas.defaultCursor = this.lastAttr.cursor;\n        this.lastAttr.status = 'out';\n      }\n      return;\n    }\n    // const activeObjects = this.options.canvas.getActiveObjects();\n    // if (activeObjects.length === 1 && activeObjects[0] instanceof fabric.GuideLine) {\n    //   return;\n    // }\n    // 鼠标从外边进入 或 在另一侧标尺\n    if (this.lastAttr.status === 'out' || hoveredRuler !== this.lastAttr.status) {\n      // 更改鼠标指针\n      this.lastAttr.cursor = this.options.canvas.defaultCursor;\n      this.options.canvas.defaultCursor = hoveredRuler === 'horizontal' ? 'ns-resize' : 'ew-resize';\n      this.lastAttr.status = hoveredRuler;\n    }\n  }\n\n  private canvasMouseUp(e: IEvent<MouseEvent>) {\n    if (this.activeOn !== 'down') return;\n\n    // 还原属性\n    this.options.canvas.selection = this.lastAttr.selection;\n    this.activeOn = 'up';\n\n    this.tempGuidelLine?.fire('up', this.getCommonEventInfo(e));\n\n    this.tempGuidelLine = undefined;\n  }\n}\n\nexport default CanvasRuler;\n","// @ts-nocheck\nimport type { Canvas } from 'fabric/fabric-impl';\nimport { fabric } from 'fabric';\nimport CanvasRuler, { RulerOptions } from './ruler';\n\nfunction initRuler(canvas: Canvas, options?: RulerOptions) {\n  const ruler = new CanvasRuler({\n    canvas,\n    ...options,\n  });\n\n  // 辅助线移动到画板外删除\n  let workspace: fabric.Object | undefined = undefined;\n\n  /**\n   * 获取workspace\n   */\n  const getWorkspace = () => {\n    workspace = canvas.getObjects().find((item) => item.id === 'workspace');\n  };\n\n  /**\n   * 判断target是否在object矩形外\n   * @param object\n   * @param target\n   * @returns\n   */\n  const isRectOut = (object: fabric.Object, target: fabric.GuideLine): boolean => {\n    const { top, height, left, width } = object;\n\n    if (top === undefined || height === undefined || left === undefined || width === undefined) {\n      return false;\n    }\n\n    const targetRect = target.getBoundingRect(true, true);\n    const {\n      top: targetTop,\n      height: targetHeight,\n      left: targetLeft,\n      width: targetWidth,\n    } = targetRect;\n\n    if (\n      target.isHorizontal() &&\n      (top > targetTop + 1 || top + height < targetTop + targetHeight - 1)\n    ) {\n      return true;\n    } else if (\n      !target.isHorizontal() &&\n      (left > targetLeft + 1 || left + width < targetLeft + targetWidth - 1)\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  canvas.on('guideline:moving', (e) => {\n    if (!workspace) {\n      getWorkspace();\n      return;\n    }\n    const { target } = e;\n    if (isRectOut(workspace, target)) {\n      target.moveCursor = 'not-allowed';\n    }\n  });\n\n  canvas.on('guideline:mouseup', (e) => {\n    if (!workspace) {\n      getWorkspace();\n      return;\n    }\n    const { target } = e;\n    if (isRectOut(workspace, target)) {\n      canvas.remove(target);\n      canvas.setCursor(canvas.defaultCursor || '');\n    }\n  });\n  return ruler;\n}\n\nexport default initRuler;\n","// @ts-nocheck\nimport { fabric } from 'fabric';\nimport { uuid } from '../utils/utils';\n\nclass EditorGroupText {\n  canvas: fabric.Canvas;\n  isDown: boolean;\n  constructor(canvas: fabric.Canvas) {\n    this.canvas = canvas;\n    this._init();\n    this.isDown = false;\n  }\n\n  // 组内文本输入\n  _init() {\n    this.canvas.on('mouse:down', (opt) => {\n      this.isDown = true;\n      if (opt.target && opt.target.type === 'group') {\n        const textObject = this._getGroupTextObj(opt) as fabric.IText;\n        if (textObject) {\n          this._bedingEditingEvent(textObject, opt);\n          this.canvas.setActiveObject(textObject);\n          textObject.enterEditing();\n        } else {\n          this.canvas.setActiveObject(opt.target);\n        }\n      }\n    });\n\n    this.canvas.on('mouse:up', () => {\n      this.isDown = false;\n    });\n\n    this.canvas.on('mouse:move', (opt) => {\n      if (this.isDown && opt.target && opt.target.type === 'group') {\n        const textObject = this._getGroupTextObj(opt);\n        if (textObject) {\n          // todo bug 文字编辑结束后，点击组内其他元素可单独拖动\n        }\n      }\n    });\n  }\n\n  // 获取点击区域内的组内文字元素\n  _getGroupTextObj(opt: fabric.IEvent<MouseEvent>) {\n    const pointer = this.canvas.getPointer(opt.e, true);\n    const clickObj = this.canvas._searchPossibleTargets(opt.target?._objects, pointer);\n    if (clickObj && this.isText(clickObj)) {\n      return clickObj;\n    }\n    return false;\n  }\n\n  // 绑定编辑取消事件\n  _bedingEditingEvent(textObject: fabric.IText, opt: fabric.IEvent<MouseEvent>) {\n    if (!opt.target) return;\n    const left = opt.target.left;\n    const top = opt.target.top;\n    const ids = this._unGroup() || [];\n\n    const resetGroup = () => {\n      const groupArr = this.canvas.getObjects().filter((item) => item.id && ids.includes(item.id));\n      // 删除元素\n      groupArr.forEach((item) => this.canvas.remove(item));\n\n      // 生成新组\n      const group = new fabric.Group([...groupArr]);\n      group.set('left', left);\n      group.set('top', top);\n      group.set('id', uuid());\n      textObject.off('editing:exited', resetGroup);\n      this.canvas.add(group);\n      this.canvas.discardActiveObject().renderAll();\n    };\n    // 绑定取消事件\n    textObject.on('editing:exited', resetGroup);\n  }\n\n  // 拆分组合并返回ID\n  _unGroup() {\n    const ids: string[] = [];\n    const activeObj = this.canvas.getActiveObject() as fabric.Group;\n    if (!activeObj) return;\n    activeObj.getObjects().forEach((item) => {\n      const id = uuid();\n      ids.push(id);\n      item.set('id', id);\n    });\n    activeObj.toActiveSelection();\n    return ids;\n  }\n\n  isText(obj: fabric.Object) {\n    return obj.type && ['i-text', 'text', 'textbox'].includes(obj.type);\n  }\n}\n\nexport default EditorGroupText;\n","// @ts-nocheck\nimport EventEmitter from 'events';\nimport { uuid } from '../utils/utils';\n\n// 对齐辅助线\nimport initAligningGuidelines from './initAligningGuidelines';\nimport initControlsRotate from './initControlsRotate';\nimport InitCenterAlign from './initCenterAlign';\nimport initHotkeys from './initHotKeys';\nimport initControls from './initControls';\nimport initRuler from './ruler';\nimport EditorGroupText from './EditorGroupText';\nimport type CanvasRuler from './ruler/ruler';\nimport type EditorWorkspace from './EditorWorkspace';\n\nimport type { fabric } from 'fabric';\n\nclass Editor extends EventEmitter {\n  canvas: fabric.Canvas;\n  editorWorkspace: EditorWorkspace | null;\n  centerAlign: InitCenterAlign;\n  ruler: CanvasRuler;\n  disableGuidelines: () => void\n  enableGuidelines: () => void\n\n  constructor(canvas: fabric.Canvas) {\n    super();\n    this.canvas = canvas;\n    this.editorWorkspace = null;\n    const {disable, enable} = initAligningGuidelines(canvas);\n    this.disableGuidelines = disable\n    this.enableGuidelines = enable\n    initHotkeys(canvas, this);\n    initControls(canvas);\n    initControlsRotate(canvas);\n    new EditorGroupText(canvas);\n    this.centerAlign = new InitCenterAlign(canvas);\n    this.ruler = initRuler(canvas);\n  }\n\n  // 多选对象复制\n  _copyActiveSelection(activeObject: fabric.Object) {\n    // 间距设置\n    const grid = 10;\n    const canvas = this.canvas;\n    activeObject?.clone((cloned: fabric.Object) => {\n      // 再次进行克隆，处理选择多个对象的情况\n      cloned.clone((clonedObj: fabric.ActiveSelection) => {\n        canvas.discardActiveObject();\n        if (clonedObj.left === undefined || clonedObj.top === undefined) return;\n        // 将克隆的画布重新赋值\n        clonedObj.canvas = canvas;\n        // 设置位置信息\n        clonedObj.set({\n          left: clonedObj.left + grid,\n          top: clonedObj.top + grid,\n          evented: true,\n          id: uuid(),\n        });\n        clonedObj.forEachObject((obj: fabric.Object) => {\n          obj.id = uuid();\n          canvas.add(obj);\n        });\n        // 解决不可选择问题\n        clonedObj.setCoords();\n        canvas.setActiveObject(clonedObj);\n        canvas.requestRenderAll();\n      });\n    });\n  }\n\n  // 单个对象复制\n  _copyObject(activeObject: fabric.Object) {\n    // 间距设置\n    const grid = 10;\n    const canvas = this.canvas;\n    activeObject?.clone((cloned: fabric.Object) => {\n      if (cloned.left === undefined || cloned.top === undefined) return;\n      canvas.discardActiveObject();\n      // 设置位置信息\n      cloned.set({\n        left: cloned.left + grid,\n        top: cloned.top + grid,\n        evented: true,\n        id: uuid(),\n      });\n      canvas.add(cloned);\n      canvas.setActiveObject(cloned);\n      canvas.requestRenderAll();\n    });\n  }\n\n  // 复制元素\n  clone(paramsActiveObeject: fabric.ActiveSelection | fabric.Object) {\n    const activeObject = paramsActiveObeject || this.canvas.getActiveObject();\n    if (!activeObject) return;\n    if (activeObject?.type === 'activeSelection') {\n      this._copyActiveSelection(activeObject);\n    } else {\n      this._copyObject(activeObject);\n    }\n  }\n\n  // 拆分组\n  unGroup() {\n    const activeObject = this.canvas.getActiveObject() as fabric.Group;\n    if (!activeObject) return;\n    // 先获取当前选中的对象，然后打散\n    activeObject.toActiveSelection();\n    activeObject.getObjects().forEach((item: fabric.Object) => {\n      item.set('id', uuid());\n    });\n    this.canvas.discardActiveObject().renderAll();\n  }\n\n  group() {\n    // 组合元素\n    const activeObj = this.canvas.getActiveObject() as fabric.ActiveSelection;\n    if (!activeObj) return;\n    const activegroup = activeObj.toGroup();\n    const objectsInGroup = activegroup.getObjects();\n    activegroup.clone((newgroup: fabric.Group) => {\n      newgroup.set('id', uuid());\n      this.canvas.remove(activegroup);\n      objectsInGroup.forEach((object) => {\n        this.canvas.remove(object);\n      });\n      this.canvas.add(newgroup);\n      this.canvas.setActiveObject(newgroup);\n    });\n  }\n\n  getWorkspace() {\n    return this.canvas.getObjects().find((item) => item.id === 'workspace');\n  }\n\n  workspaceSendToBack() {\n    const workspace = this.getWorkspace();\n    workspace && workspace.sendToBack();\n  }\n\n  getJson() {\n    return this.canvas.toJSON(\n      ['id', 'gradientAngle', 'selectable', 'hasControls', 'sourceSrc', 'rawScaleX',\n        'rawScaleY', 'rectDiffLeft', 'rectDiffTop', 'prevWidth', 'prevHeight', 'cloneObject'\n      ]);\n  }\n\n  /**\n   * @description: 拖拽添加到画布\n   * @param {Event} event\n   * @param {Object} item\n   */\n  dragAddItem(event: DragEvent, item: fabric.Object) {\n    const {left, top} = this.canvas.getSelectionElement().getBoundingClientRect();\n    if (event.x < left || event.y < top || item.width === undefined) return;\n\n    const point = {\n      x: event.x - left,\n      y: event.y - top,\n    };\n    const pointerVpt = this.canvas.restorePointerVpt(point);\n    item.left = pointerVpt.x - item.width / 2;\n    item.top = pointerVpt.y;\n    this.canvas.add(item);\n    this.canvas.requestRenderAll();\n  }\n}\n\nexport default Editor;\n","import React, { FC, createContext, useState } from 'react'\nimport { fabric } from 'fabric'\nimport Editor from '../../core';\nimport EditorWorkspace from '../../core/EditorWorkspace';\n\nconst noop = () => {\n}\n\ninterface CanvasContext {\n  canvas: fabric.Canvas | null\n  editor: Editor | null\n  workSpace: EditorWorkspace | null\n  drawMode: string,\n  setDrawMode: (value: string) => void\n  setCanvas: (canvas: fabric.Canvas) => void\n  setEditor: (value: Editor) => void\n  setWorkSpace: (value: EditorWorkspace) => void\n  selectMode: string\n  setSelectMode: (value: string) => void\n  selectIds: Array<string>\n  setSelectIds: (value: Array<string>) => void\n  selectOneType: string\n  setSelectOneType: (value: string) => void\n  selectActive: Array<string>\n  setSelectActive: (value: Array<string>) => void\n  show: boolean\n  setShow: (value: boolean) => void\n  mainUrl: string | undefined\n  setMainUrl: (value: string | undefined) => void\n  isClipImage: boolean\n  setIsClipImage: (value: boolean) => void\n  clipRawIndex: any\n  setClipRawIndex: (value: any) => void\n  clipImageId: any\n  setClipImageId: (value: any) => void\n\n}\n\nexport const Context = createContext<CanvasContext>({\n  editor: null, // canvas编辑器实例\n  canvas: null, // fabric canvas实例\n  workSpace: null, // 白色画布实例\n  drawMode: '', // default 默认模式 move拖拽模式\n  selectMode: '',\n  selectIds: [],\n  selectOneType: '',\n  selectActive: [],\n  show: false,\n  mainUrl: '',\n  isClipImage: false,\n  clipRawIndex: null,\n  clipImageId: null,\n  setClipRawIndex: noop,\n  setClipImageId: noop,\n  setIsClipImage: noop,\n  setMainUrl: noop,\n  setSelectOneType: noop,\n  setSelectActive: noop,\n  setSelectMode: noop,\n  setSelectIds: noop,\n  setDrawMode: noop,\n  setCanvas: noop,\n  setEditor: noop,\n  setWorkSpace: noop,\n  setShow: noop\n})\n\nexport const CanvasProvider: FC = ({children}) => {\n  const [canvas, setCanvas] = useState<fabric.Canvas | null>(null)\n  const [editor, setEditor] = useState<Editor | null>(null)\n  const [workSpace, setWorkSpace] = useState<EditorWorkspace | null>(null)\n  const [drawMode, setDrawMode] = useState<string>('default')\n  const [selectMode, setSelectMode] = useState('')\n  const [selectIds, setSelectIds] = useState([])\n  const [selectOneType, setSelectOneType] = useState('')\n  const [selectActive, setSelectActive] = useState([])\n  const [show, setShow] = useState(false)\n  const [mainUrl, setMainUrl] = useState('')\n  const [isClipImage, setIsClipImage] = useState(false)\n  const [clipImageId, setClipImageId] = useState(null)\n  const [clipRawIndex, setClipRawIndex] = useState(null)\n  const context = {\n    canvas,\n    editor,\n    workSpace,\n    drawMode,\n    selectMode,\n    setSelectMode,\n    selectIds,\n    setSelectIds,\n    selectOneType,\n    setSelectOneType,\n    selectActive,\n    setSelectActive,\n    setDrawMode,\n    setWorkSpace,\n    setCanvas,\n    setEditor,\n    show,\n    setShow,\n    mainUrl,\n    setMainUrl,\n    isClipImage,\n    setIsClipImage,\n    clipImageId,\n    setClipImageId,\n    clipRawIndex,\n    setClipRawIndex\n  }\n\n  // @ts-ignore\n  return <Context.Provider value={context}>{children}</Context.Provider>\n}\n","import React from 'react'\nimport style from './index.module.scss'\n\ninterface InputProps {\n  title: string\n  afterText?: string | React.ReactElement\n  value: string | number\n  onChange: (e: { target: { value: string } }) => void\n}\n\nconst Input: React.FC<InputProps> = (props) => {\n  const {title, afterText, value, onChange} = props;\n  return (\n    <div className={style.customInput}>\n      <div className={style.title}>{title}</div>\n      <div className={style.inputWrap}>\n        <input onChange={onChange} value={value} type=\"text\"/>\n        {afterText ?\n          React.isValidElement(afterText) ?\n            afterText :\n            <span>{afterText}</span> : ''}\n      </div>\n    </div>\n  )\n}\n\nexport default Input\n","import { useContext } from 'react';\nimport { Context } from '../CanvasContext';\n\nconst useAttr = () => {\n  const {canvas} = useContext(Context)\n  /**\n   * 获取已选中的元素\n   */\n  const getActiveObject = () => {\n    if (!canvas) return\n    const activeObject = canvas?.getActiveObject()\n    if (!activeObject) return\n    return activeObject\n  }\n  /**\n   * 设置属性\n   * @param attr\n   */\n  const setAttr = (attr: any) => {\n    if (!canvas) return\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    activeObject.set(attr)\n    canvas.renderAll()\n  }\n  return {\n    getActiveObject,\n    setAttr\n  }\n}\n\nexport default useAttr\n","import useAttr from './useAttr';\nimport { useCallback, useContext } from 'react';\nimport { Context } from '../CanvasContext';\nimport { fabric } from 'fabric';\n\nconst lockAttrs = [\n  'lockMovementX',\n  'lockMovementY',\n  'lockRotation',\n  'lockScalingX',\n  'lockScalingY',\n];\n\n/**\n * 检测fabric对象是否隐藏了X Y缩放\n * @param object\n */\nexport const isControlsInRatioVisible = (object: fabric.Object) => {\n  const controls = object._controlsVisibility\n  return !!(controls && !controls.mb && !controls.ml && !controls.mr && !controls.mt)\n}\n\nconst useLock = () => {\n  const {canvas} = useContext(Context)\n  const {getActiveObject} = useAttr()\n\n  /**\n   * 锁定全部操作 或 解锁全部操作\n   */\n  const changeOwnLock = useCallback((isLock: boolean, object?: fabric.Object) => {\n    let activeObject: null | undefined | fabric.Object = null\n    if (object) {\n      activeObject = object\n    } else {\n      activeObject = getActiveObject()\n    }\n    if (!activeObject) return\n    activeObject.hasControls = isLock\n    lockAttrs.forEach((key) => {\n      (activeObject as fabric.Object)[key] = !isLock\n    });\n    activeObject.selectable = isLock\n    canvas?.renderAll()\n  }, [canvas, getActiveObject])\n\n  /**\n   * 按比例锁定 或 解锁\n   */\n  const changeInRatioLock = useCallback((isLock: boolean, object?: fabric.Object) => {\n    let activeObject: null | undefined | fabric.Object = null\n    if (object) {\n      activeObject = object\n    } else {\n      activeObject = getActiveObject()\n    }\n    if (!activeObject) return\n    activeObject.setControlsVisibility({\n      mt: isLock, // 控制上中点的缩放控件可见性\n      mb: isLock, // 控制下中点的缩放控件可见性\n      ml: isLock, // 控制左中点的缩放控件可见性\n      mr: isLock, // 控制右中点的缩放控件可见性\n    })\n    canvas?.renderAll()\n  }, [canvas, getActiveObject])\n  return {\n    changeOwnLock,\n    changeInRatioLock\n  }\n}\n\nexport default useLock\n","/**\n * 加减乘除\n * 为了实现常用数字加减乘除的精准运算，下列封装了函数，主要思路是，先将小数点右移，\n * 将算式两边的数变成整数再进行运算，得到运算结果后，再将小数点左移回去。\n */\n\nexport function add(num1: number, num2: number) {\n  const num1Digits = (num1.toString().split('.')[1] || '').length\n  const num2Digits = (num2.toString().split('.')[1] || '').length\n  const baseNum = Math.pow(10, Math.max(num1Digits, num2Digits))\n  return (multiply(num1, baseNum) + multiply(num2, baseNum)) / baseNum\n}\n\nexport function subtract(num1: number, num2: number) {\n  const num1Digits = (num1.toString().split('.')[1] || '').length\n  const num2Digits = (num2.toString().split('.')[1] || '').length\n  const baseNum = Math.pow(10, Math.max(num1Digits, num2Digits))\n  return (multiply(num1, baseNum) - multiply(num2, baseNum)) / baseNum\n}\n\nexport function multiply(num1: number, num2: number) {\n  const num1String = num1.toString()\n  const num2String = num2.toString()\n  const num1Digits = (num1String.split('.')[1] || '').length\n  const num2Digits = (num2String.split('.')[1] || '').length\n  const baseNum = Math.pow(10, num1Digits + num2Digits)\n  return Number(num1String.replace('.', '')) * Number(num2String.replace('.', '')) / baseNum\n}\n\nexport function divide(num1: number, num2: number) {\n  const num1String = num1.toString()\n  const num2String = num2.toString()\n  const num1Digits = (num1String.split('.')[1] || '').length\n  const num2Digits = (num2String.split('.')[1] || '').length\n  const baseNum = Math.pow(10, num1Digits + num2Digits)\n  const n1 = multiply(num1, baseNum)\n  const n2 = multiply(num2, baseNum)\n  return Number(n1) / Number(n2)\n}\n\nexport function floatRound(num: number, len = 0) {\n  const n = divide(Math.round(multiply(num, Math.pow(10, len))), Math.pow(10, len))\n  return n.toFixed(len)\n}\n\n","// @ts-nocheck\nimport React, { useContext, useEffect, useState } from 'react'\nimport style from './index.module.scss'\nimport Input from '../../../../Input'\nimport { retainNumber } from '../../../../../../utils/utils'\nimport { fabric } from 'fabric';\nimport { Context } from '../../../../../Draw'\nimport useLock, { isControlsInRatioVisible } from '../../../../../Draw/hooks/useLock'\nimport { floatRound } from '../../../../../../utils/calculate';\n\n\ninterface SizeProps {\n  getActiveObject?: () => fabric.Object\n  isWorkSpace?: boolean\n  showRation?: boolean\n}\n\nconst Size: React.FC<SizeProps> = ({getActiveObject, showRation, isWorkSpace}) => {\n  const {canvas, workSpace} = useContext(Context)\n  const {changeInRatioLock} = useLock()\n  const [width, setWidth] = useState('')\n  const [height, setHeight] = useState('')\n  const [lockRatio, setLockRatio] = useState(false)\n\n  useEffect(() => {\n    getAttr()\n  }, [canvas, getActiveObject])\n\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on('object:modified', getAttr)\n    return () => {\n      canvas.off('object:modified', getAttr)\n    }\n  }, [canvas])\n\n  const getAttr = () => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    setWidth(floatRound(activeObject.width))\n    setHeight(floatRound(activeObject.height))\n    setLockRatio(isControlsInRatioVisible(activeObject))\n  }\n  /**\n   * 修改宽\n   * @param value\n   */\n  const onWidthChange = (value) => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    value = retainNumber(value)\n    if (isWorkSpace) {\n      workSpace?.setSize(value, height)\n      setWidth(value)\n      return;\n    }\n    activeObject.set({width: +value})\n    canvas?.renderAll()\n    setWidth(value)\n  }\n  /**\n   * 修改高\n   * @param value\n   */\n  const onHeightChange = (value) => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    value = retainNumber(value)\n    if (isWorkSpace) {\n      workSpace?.setSize(width, value)\n      setHeight(value)\n      return;\n    }\n    activeObject.set({height: +value})\n    canvas?.renderAll()\n    setHeight(value)\n  }\n\n  const changeLock = () => {\n    changeInRatioLock(lockRatio)\n    setLockRatio(prevState => !prevState)\n  }\n  return (\n    <div className={style.size}>\n      <Input\n        afterText='像素'\n        title='宽度'\n        value={width}\n        onChange={e => onWidthChange(e.target.value)}\n      />\n      <Input\n        afterText='像素'\n        title='高度'\n        value={height}\n        onChange={e => onHeightChange(e.target.value)}\n      />\n      {\n        showRation ? <div className={style.ratio}>\n          <div className={style.title}>比例</div>\n          <div className={style.content} onClick={changeLock}>\n            <img\n              src={lockRatio ?\n                \"https://ossprod.jrdaimao.com/file/1690955813239228.svg\" :\n                \"https://ossprod.jrdaimao.com/file/1690425288688481.svg\"}\n              alt=\"\"\n            />\n          </div>\n        </div> : <div className={style.ratio}></div>\n      }\n    </div>\n  )\n}\n\nexport default Size\n","import React, { useContext, useEffect, useState } from 'react'\nimport style from './index.module.scss'\nimport Input from '../../../../Input'\nimport useAttr from '../../../../../Draw/hooks/useAttr';\nimport { Context } from '../../../../../Draw';\nimport { retainNumber } from '../../../../../../utils/utils';\nimport { floatRound } from '../../../../../../utils/calculate';\n\nconst Position = () => {\n  const {canvas} = useContext(Context)\n  const {getActiveObject, setAttr} = useAttr()\n  const [rotate, setRotate] = useState<string | number>('0')\n  const [x, setX] = useState<string | number>(0)\n  const [y, setY] = useState<string | number>(0)\n\n  useEffect(() => {\n    getAttr()\n  }, [canvas])\n\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on('object:modified', getAttr)\n    return () => {\n      canvas.off('object:modified', getAttr)\n    }\n  }, [canvas])\n  const getAttr = () => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    setX(floatRound(activeObject.left || 0))\n    setY(floatRound(activeObject.top || 0))\n    setRotate(floatRound(activeObject.angle || 0))\n  }\n  /**\n   * 修改旋转角度\n   * @param value\n   */\n  const onRotateChange = (value: string) => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    activeObject.rotate(+value)\n    canvas?.renderAll()\n    setRotate(value)\n  }\n  /**\n   * 修改X坐标\n   * @param value\n   */\n  const onPositionXChange = (value: string) => {\n    value = retainNumber(value)\n    setAttr({left: +value})\n    setX(value)\n  }\n  /**\n   * 修改Y坐标\n   * @param value\n   */\n  const onPositionYChange = (value: string) => {\n    value = retainNumber(value)\n    setAttr({top: +value})\n    setY(value)\n  }\n  return (\n    <div className={style.position}>\n      <Input\n        afterText='像素'\n        value={x}\n        onChange={e => onPositionXChange(e.target.value)}\n        title='X'\n      />\n      <Input\n        afterText='像素'\n        value={y}\n        onChange={e => onPositionYChange(e.target.value)}\n        title='Y'\n      />\n      <div className={style.rotate}>\n        <div className={style.title}>旋转</div>\n        <div className={style.content}>\n          <input value={rotate} onChange={e => onRotateChange(retainNumber(e.target.value))} type=\"text\"/>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Position\n","// @ts-nocheck\nimport React, { useContext, useEffect, useState } from 'react'\nimport customInputStyle from '../../../../Input/index.module.scss'\nimport style from './index.module.scss'\nimport useAttr from '../../../../../Draw/hooks/useAttr'\nimport { Context } from '../../../../../Draw'\nimport { retainNumber } from '../../../../../../utils/utils';\nimport { divide, multiply } from '../../../../../../utils/calculate';\n\nconst Transparent = () => {\n  const {canvas} = useContext(Context)\n  const {getActiveObject, setAttr} = useAttr()\n  const [opacity, setOpacity] = useState(0)\n  const [visible, setVisible] = useState(false)\n  useEffect(() => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    setOpacity(multiply(activeObject.opacity, 100))\n    setVisible(activeObject.visible || false)\n  }, [getActiveObject])\n  /**\n   * 透明度修改\n   * @param value\n   */\n  const onOpacityChange = (value: string) => {\n    if (value > 100) {\n      value = 100\n    }\n    value = retainNumber(value)\n    setAttr({opacity: divide(value, 100)})\n    setOpacity(+value)\n  }\n  /**\n   * 翻转\n   * @param value\n   */\n  const onFlipChange = (value: string) => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    // @ts-ignore\n    activeObject.set(`flip${value}`, !activeObject[`flip${value}`]).setCoords();\n    canvas?.renderAll()\n  }\n  /**\n   * 可见性修改\n   */\n  const onVisibleChange = () => {\n    setAttr({visible: !visible})\n    setVisible(prevState => !prevState)\n  }\n  return (\n    <div className={style.transparent}>\n      <div className={customInputStyle.customInput}>\n        <div className={customInputStyle.title}>不透明度</div>\n        <div className={customInputStyle.inputWrap}>\n          <input\n            style={{width: 48}}\n            onChange={e => onOpacityChange(e.target.value)}\n            value={opacity}\n            type=\"text\"\n          />\n          <span>%</span>\n        </div>\n      </div>\n      <div className={style.reverse}>\n        <div className={style.title}>翻转</div>\n        <div className={style.reverseWrap}>\n          <div onClick={() => onFlipChange('X')}>\n            <img src=\"https://ossprod.jrdaimao.com/file/1690428298144872.svg\" alt=\"\"/>\n          </div>\n          <div onClick={() => onFlipChange('Y')}>\n            <img src=\"https://ossprod.jrdaimao.com/file/1690428330458222.svg\" alt=\"\"/>\n          </div>\n        </div>\n      </div>\n      <div className={style.visible}>\n        <div className={style.title}>可见性</div>\n        <div className={style.content} onClick={onVisibleChange}>\n          {\n            visible ?\n              <img src=\"https://ossprod.jrdaimao.com/file/1690428533888278.svg\" alt=\"\"/> :\n              <img src=\"https://ossprod.jrdaimao.com/file/1690883271867109.svg\" alt=\"\"/>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Transparent\n","import { useCallback, useContext } from 'react'\nimport { Context } from '../CanvasContext'\nimport { isUndef } from '../../../utils';\n\ntype Pos = { left?: number, top?: number }\n\nconst usePageAlign = () => {\n  const {canvas, workSpace} = useContext(Context)\n  const setPosition = useCallback((value: Pos, target?: any) => {\n    if (!canvas) return\n    let activeObject: any\n    if (target) {\n      activeObject = target\n    } else {\n      activeObject = canvas.getActiveObject()\n    }\n    if (!activeObject) return console.log('no allow activeObject')\n    const {left, top} = value\n    const pos: Pos = {}\n    if (!isUndef(left)) pos.left = left\n    if (!isUndef(top)) pos.top = top\n    activeObject.set(pos)\n    canvas.renderAll()\n  }, [canvas, workSpace])\n  /**\n   * 左对齐\n   */\n  const left = () => {\n    setPosition({left: 0})\n  }\n  /**\n   * 顶对齐\n   */\n  const top = () => {\n    setPosition({top: 0})\n  }\n  /**\n   * 左右居中对齐\n   */\n  const alignCenter = () => {\n    if (!canvas || !workSpace) return\n    const activeObject = canvas.getActiveObject() as any\n    if (!activeObject) return\n    const width = workSpace?.width || 0\n    setPosition({left: (width - activeObject.width * activeObject.scaleX) / 2})\n  }\n  /**\n   * 上下居中对齐\n   */\n  const middleCenter = () => {\n    if (!canvas || !workSpace) return\n    const activeObject = canvas.getActiveObject() as any\n    if (!activeObject) return\n    const height = workSpace?.height || 0\n    setPosition({top: (height - activeObject.height * activeObject.scaleY) / 2})\n  }\n  /**\n   * 右对齐\n   */\n  const right = () => {\n    if (!canvas || !workSpace) return\n    const activeObject = canvas.getActiveObject() as any\n    if (!activeObject) return\n    const width = workSpace?.width || 0\n    setPosition({left: width - activeObject.width * activeObject.scaleX})\n  }\n  /**\n   * 底对齐\n   */\n  const bottom = () => {\n    if (!canvas || !workSpace) return\n    const activeObject = canvas.getActiveObject() as any\n    if (!activeObject) return\n    const height = workSpace?.height || 0\n    setPosition({top: height - activeObject.height * activeObject.scaleY})\n  }\n  return {\n    left, top, alignCenter, middleCenter, right, bottom\n  }\n}\n\nexport default usePageAlign\n","export interface AlignTypeListItem {\n  icon: string\n  activeIcon: string\n  title: string\n  key: string\n}\n\n\nexport const alignTypeList: Array<AlignTypeListItem> = [\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690799178088909.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690802921403421.svg',\n    title: '左对齐',\n    key: 'left'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690429259779371.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690799287561375.svg',\n    title: '顶对齐',\n    key: 'top'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690429281715912.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690799296804215.svg',\n    title: '左右居中对齐',\n    key: 'alignCenter'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690429302732969.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/169079930793443.svg',\n    title: '上下居中对齐',\n    key: 'middleCenter'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690429331770745.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690799316293458.svg',\n    title: '右对齐',\n    key: 'right'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/169042936033629.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690799325119567.svg',\n    title: '底对齐',\n    key: 'bottom'\n  }\n]\n","import React from 'react'\nimport usePageAlign from '../../../../../Draw/hooks/usePageAlign'\nimport { alignTypeList, AlignTypeListItem } from './config'\nimport style from './index.module.scss'\n\nconst PageAlign = () => {\n  const alignFunc = usePageAlign()\n  const onClick = (item: AlignTypeListItem) => {\n    alignFunc[item.key]?.()\n  }\n  return (\n    <div className={style.pageAlign}>\n      <div className={style.title}>页面对齐</div>\n      <div className={style.shareShapeList}>\n        {\n          alignTypeList.map(item => {\n            return <div\n              onClick={() => onClick(item)}\n              key={item.key}\n              className={style.shareShapeListItem}\n            >\n              <img src={item.icon} alt=\"\"/>\n              <img src={item.activeIcon} alt=\"\"/>\n              <span>{item.title}</span>\n            </div>\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default PageAlign\n","export interface CoverOrderListItem {\n  icon: string\n  activeIcon: string\n  title: string\n  key: string\n}\n\nexport const coverOrderList: Array<CoverOrderListItem> = [\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690802981178203.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690430789758861.svg',\n    title: '上移一层',\n    key: 'up'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690430798470387.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690803025753461.svg',\n    title: '移到顶层',\n    key: 'upTop'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690430807961422.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690803032757409.svg',\n    title: '下移一层',\n    key: 'down'\n  },\n  {\n    icon: 'https://ossprod.jrdaimao.com/file/1690430815475268.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690803040084442.svg',\n    title: '移到底层',\n    key: 'downTop'\n  }\n]\n","import { useCallback, useContext } from 'react'\nimport { Context } from '../CanvasContext'\nimport { fabric } from 'fabric';\n\n/**\n * 修改层级顺序\n */\nconst userOrder = () => {\n  const {canvas, editor} = useContext(Context)\n\n  const changeOrder = useCallback((funcKey: string, object: fabric.Object) => {\n    if (!canvas) return\n    let activeObject: any\n    if (object) {\n      activeObject = object\n    } else {\n      const actives = canvas.getActiveObjects();\n      if (actives && actives.length === 1) {\n        activeObject = canvas.getActiveObjects()[0];\n      }\n    }\n    if (!activeObject) return\n    activeObject && activeObject[funcKey]?.();\n    canvas.renderAll();\n    editor?.workspaceSendToBack()\n  }, [canvas, editor])\n  // 上\n  const up = useCallback((object: fabric.Object) => {\n    changeOrder('bringForward', object)\n  }, [canvas, editor])\n\n  // 上到顶\n  const upTop = useCallback((object: fabric.Object) => {\n    changeOrder('bringToFront', object)\n  }, [canvas, editor])\n\n  // 下\n  const down = useCallback((object: fabric.Object) => {\n    changeOrder('sendBackwards', object)\n  }, [canvas, editor])\n\n  // 下到底\n  const downTop = useCallback((object: fabric.Object) => {\n    changeOrder('sendToBack', object)\n  }, [canvas, editor])\n  return {\n    up, upTop, down, downTop\n  }\n}\n\nexport default userOrder\n","import React from 'react'\nimport pageAlignStyle from '../PageAlign/index.module.scss'\nimport { coverOrderList, CoverOrderListItem } from './config'\nimport userOrder from '../../../../../Draw/hooks/userOrder'\nimport style from './index.module.scss'\n\nconst CoverOrder = () => {\n  const orderFunc = userOrder()\n  const changeCoverOrder = (item: CoverOrderListItem) => {\n    orderFunc[item.key]?.()\n  }\n  return (\n    <div className={style.coverOrder}>\n      <div className={style.coverOrderTitle}>图层顺序</div>\n      <div className={pageAlignStyle.shareShapeList}>\n        {\n          coverOrderList.map(item => {\n            return <div\n              onClick={() => changeCoverOrder(item)}\n              key={item.key}\n              className={pageAlignStyle.shareShapeListItem}\n            >\n              <img src={item.icon} alt=\"\"/>\n              <img src={item.activeIcon} alt=\"\"/>\n              <span>{item.title}</span>\n            </div>\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default CoverOrder\n","// @ts-nocheck\nimport React, { useEffect, useState } from 'react';\nimport Size from '../Components/Size'\nimport style from '../WorkSpaceAttr/index.module.scss'\nimport Position from '../Components/Pos'\nimport Transparent from '../Components/Trans'\nimport PageAlign from '../Components/PageAlign'\nimport CoverOrder from '../Components/CoverOrder'\nimport useAttr from '../../../../Draw/hooks/useAttr';\n\n\nconst ImageSpaceAttr = () => {\n  const {getActiveObject} = useAttr()\n  return (\n    <div className={style.workSpaceAttr}>\n      <div className={style.base}>\n        <div>\n          {/* 设置元素的大小、锁定比例 */}\n          <Size\n            getActiveObject={getActiveObject}\n            showRation={true}\n          />\n        </div>\n        <div>\n          {/* 设置元素的位置、旋转角度 */}\n          <Position/>\n        </div>\n        <div>\n          <Transparent/>\n        </div>\n      </div>\n      <div className={style.division}></div>\n      {/* 页面对齐 */}\n      <PageAlign/>\n      <div className={style.division}></div>\n      {/*图层顺序 */}\n      <CoverOrder/>\n    </div>\n  );\n};\n\nexport default ImageSpaceAttr;\n","import React from 'react';\n\nexport const DropdownIndicator = () => {\n  return (\n    <img src=\"https://ossprod.jrdaimao.com/file/1690959702767983.svg\" alt=\"\"/>\n  );\n};\n\nexport const ReactSelectStyles: any = {\n  singleValue: (provided: any) => ({\n    ...provided,\n    color: '#ADADB3',\n    fontWeight: 600,\n  }),\n  menuList: (provided: any) => ({\n    ...provided,\n    background: '#1C1D29',\n  }),\n  option: (provided: any) => ({\n    ...provided,\n    background: '#1C1D29',\n    color: '#ADADB3',\n    height: '32px',\n    lineHeight: '32px',\n    padding: '0px 11px',\n    boxSizing: 'border-box',\n    cursor: 'pointer',\n    '&:hover': {\n      color: '#fff',\n      background: '#2C375E'\n    }\n  }),\n  container: (provided: any) => ({\n    ...provided,\n    width: '100%'\n  }),\n  control: () => ({\n    width: '100%',\n    cursor: 'pointer',\n    paddingRight: 8,\n    boxSizing: 'border-box',\n    flex: 1,\n    height: 28,\n    borderRadius: 4,\n    background: '#232634',\n    color: '#ADADB3',\n    fontSize: 14,\n    fontWeight: 600,\n    display: 'flex'\n  }),\n}\n","// @ts-nocheck\nimport React, { useEffect, useRef, useState } from 'react'\nimport styles from './index.module.scss'\nimport { retainNumber } from '../../../utils/utils';\n\ninterface InputNumberProps {\n  value: string | number\n  onChange: (value: string | number) => void\n}\n\nconst InputNumber: React.FC<InputNumberProps> = ({value, onChange: callback}) => {\n  const [number, setNumber] = useState(value)\n  const last = useRef()\n  last.current = number\n  const inputRef = useRef()\n\n  useEffect(() => {\n    setNumber(value)\n  }, [value])\n\n  useEffect(() => {\n    inputRef.current?.addEventListener('keydown', keyDownChange)\n    return () => {\n      inputRef.current?.removeEventListener('keydown', keyDownChange)\n    }\n  }, [value, callback])\n\n  const keyDownChange = (e) => {\n    if (e.key === 'ArrowUp') {\n      add()\n    } else if (e.key === 'ArrowDown') {\n      sub()\n    }\n  }\n  const onNumberChange = (e: { target: { value: string }, preventDefault: () => {} }) => {\n    const value = retainNumber(e.target.value)\n    setNumber(value)\n    callback(value)\n  }\n  const add = () => {\n    const n = +last.current + 1\n    setNumber(n)\n    callback(n)\n  }\n  const sub = () => {\n    if (last.current <= 12) return\n    const n = +last.current - 1\n    setNumber(n)\n    callback(n)\n  }\n  return (\n    <div className={styles.inputNumber}>\n      <input ref={inputRef} value={number} onChange={onNumberChange}/>\n      <span className={styles.control}>\n        <span onClick={add}>\n          <img src=\"https://ossprod.jrdaimao.com/file/1690962892247333.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/1691034645816626.svg\" alt=\"\"/>\n        </span>\n        <span onClick={sub}>\n          <img src=\"https://ossprod.jrdaimao.com/file/1690962924824666.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/1691035025689960.svg\" alt=\"\"/>\n        </span>\n      </span>\n    </div>\n  )\n}\n\nexport default InputNumber\n","export interface TextAlignItem {\n  src: string\n  activeSrc: string\n  key: string\n}\n\nexport const textAlignList: Array<TextAlignItem> = [\n  {\n    src: 'https://ossprod.jrdaimao.com/file/1690963862052534.svg',\n    activeSrc: 'https://ossprod.jrdaimao.com/file/1690963932538814.svg',\n    key: 'left'\n  },\n  {\n    src: 'https://ossprod.jrdaimao.com/file/1690963869720196.svg',\n    activeSrc: 'https://ossprod.jrdaimao.com/file/1690963940992258.svg',\n    key: 'center'\n  },\n  {\n    src: 'https://ossprod.jrdaimao.com/file/1690963877465292.svg',\n    activeSrc: 'https://ossprod.jrdaimao.com/file/1690963948610334.svg',\n    key: 'right'\n  },\n  {\n    src: 'https://ossprod.jrdaimao.com/file/1690963884592828.svg',\n    activeSrc: 'https://ossprod.jrdaimao.com/file/1690963958787177.svg',\n    key: 'justify'\n  }\n]\nexport const textStyleList = [\n  {\n    label: '常规',\n    value: 'normal'\n  },\n  {\n    label: '粗体',\n    value: 600\n  },\n  // {\n  //   label: '细体',\n  //   value: 400\n  // }\n]\n","export const getFontManage = () => {\n  return Promise.resolve([\n    {\n      \"id\": 1,\n      \"fontlibName\": \"雨落南泥行楷\",\n      \"key\": \"ylnnxk\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1684482933910660.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1684482969861534.jpg\",\n      \"operator\": \"\",\n      \"createdAt\": \"2023-05-19T07:56:12.000Z\",\n      \"updatedAt\": \"2023-05-19T07:56:12.000Z\"\n    },\n    {\n      \"id\": 2,\n      \"fontlibName\": \"汉仪孙尚香繁体\",\n      \"key\": \"hyssxft\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/168448426103890.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1684484313329597.jpg\",\n      \"operator\": \"\",\n      \"createdAt\": \"2023-05-19T08:18:35.000Z\",\n      \"updatedAt\": \"2023-05-19T08:18:35.000Z\"\n    },\n    {\n      \"id\": 3,\n      \"fontlibName\": \"DINBLACK\",\n      \"key\": \"dinblack\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1684926716437711.otf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1684926724428125.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-24T11:12:15.000Z\",\n      \"updatedAt\": \"2023-05-24T11:12:15.000Z\"\n    },\n    {\n      \"id\": 4,\n      \"fontlibName\": \"Bebas-Regular\",\n      \"key\": \"bebasRegular\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1684932496362386.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1684932519267667.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-24T12:48:43.000Z\",\n      \"updatedAt\": \"2023-05-24T12:48:43.000Z\"\n    },\n    {\n      \"id\": 6,\n      \"fontlibName\": \"汉仪小松激浪体\",\n      \"key\": \"hyxsjl\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1685001304598186.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1685001311019992.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-25T07:55:34.000Z\",\n      \"updatedAt\": \"2023-05-30T08:58:25.000Z\"\n    },\n    {\n      \"id\": 13,\n      \"fontlibName\": \"叶子\",\n      \"key\": \"yezi\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/168543899068477.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1685438995766786.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-30T09:30:14.000Z\",\n      \"updatedAt\": \"2023-05-30T09:30:14.000Z\"\n    },\n    {\n      \"id\": 14,\n      \"fontlibName\": \"Aa马克\",\n      \"key\": \"aamk\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1685439688863813.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1685439704617823.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-30T09:41:46.000Z\",\n      \"updatedAt\": \"2023-05-30T09:41:46.000Z\"\n    },\n    {\n      \"id\": 15,\n      \"fontlibName\": \"Egosta\",\n      \"key\": \"egosta\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1685439871684955.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1685439875954916.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-30T09:44:45.000Z\",\n      \"updatedAt\": \"2023-05-30T09:44:45.000Z\"\n    },\n    {\n      \"id\": 16,\n      \"fontlibName\": \"汉仪永字七巧板\",\n      \"key\": \"hyyzqqb\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1685440650813535.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1685440825332319.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-05-30T10:00:28.000Z\",\n      \"updatedAt\": \"2023-05-30T10:00:28.000Z\"\n    },\n    {\n      \"id\": 17,\n      \"fontlibName\": \"阿里妈妈数黑体\",\n      \"key\": \"alimamasht\",\n      \"fontlibfile\": \"https://osstest.jrdaimao.com/file/1688626758184870.ttf\",\n      \"fontImgUrl\": \"https://osstest.jrdaimao.com/file/1688626774033978.jpg\",\n      \"operator\": \"管理员\",\n      \"createdAt\": \"2023-07-06T06:59:37.000Z\",\n      \"updatedAt\": \"2023-07-06T06:59:37.000Z\"\n    }\n  ])\n}\n","// @ts-nocheck\nimport { useCallback, useContext, useEffect, useRef, useState } from 'react'\nimport { getFontManage } from '../../../api/text'\nimport useAttr from './useAttr'\nimport FontFaceObserver from 'fontfaceobserver'\nimport { Context } from '../../Editor/Context';\n\n\n// 通用字体，不需要加载字体包\nconst GeneralTextList = ['serif']\n// 缓存已经加载过的字体包名称，有重复的引用无需再次架子啊\nconst Font = new Map()\n// 缓存字体列表\nlet globalFontList = null\n\n/**\n * 过滤出非通用字体\n * @param list\n */\nexport const filterToText = (list: any) => {\n  if (!Array.isArray(list)) return []\n  return list.filter((item: any) => item.type === 'i-text' && !GeneralTextList.includes(item.fontFamily))\n}\n\n\nconst useChangeFontFamily = () => {\n  const {setAttr} = useAttr()\n  const {setLoading} = useContext(Context)\n  const [fontList, setFontList] = useState([])\n  const [fontLoaded, setFontLoaded] = useState(false)\n  const useFontListLast = useRef()\n  useFontListLast.current = fontList\n\n\n  useEffect(() => {\n    // 缓存处理下，不用每次加载\n    (async () => {\n      let list = []\n      if (globalFontList) {\n        list = globalFontList\n      } else {\n        const res = await getFontManage()\n        list = res.map(item => {\n          return {\n            value: item.key,\n            label: item.fontlibName,\n            url: item.fontlibfile\n          }\n        })\n      }\n      setFontLoaded(true)\n      globalFontList = list\n      setFontList(list)\n    })()\n  }, [])\n  /**\n   * 字体修改\n   */\n  const runChange = useCallback((item) => {\n    // 已经加载过不需要重新加载 直接设置字体\n    if (Font.has(item.name)) {\n      setAttr({fontFamily: item.name})\n      return\n    }\n    setLoading(true)\n    const styleContent = `\n     @font-face {\n      font-family: ${item.name};\n      src: url('${item.src}');\n     }`\n    const style = document.createElement('style')\n    style.innerHTML = styleContent\n    document.body.appendChild(style)\n    const font = new FontFaceObserver(item.name);\n    return font.load(item.name, 2000000).then(function () {\n      Font.set(item.name, true)\n      setLoading(false)\n      console.log('Font is available');\n      setAttr({fontFamily: item.name})\n    }, function (e) {\n      setLoading(false)\n      document.body.removeChild(style)\n      console.log('Font is not available', e);\n    });\n  }, [setAttr])\n  /**\n   * 加载多个字体\n   */\n  const loadFont = useCallback((objectsData) => {\n    if (!objectsData) return Promise.resolve()\n    // 拿到需要加载字体包的字体\n    const textList = filterToText(objectsData)\n    let style = ''\n    textList.forEach(item => {\n      useFontListLast.current.forEach(r => {\n        if (item.fontFamily === r.value && !Font.has(r.value)) {\n          style += `@font-face {font-family: ${r.value};src: url('${r.url}');}`\n        }\n      })\n    })\n    if (style === '') return Promise.resolve()\n    // 组装一下font-face，放到body中\n    const el = document.createElement('style')\n    el.innerHTML = style\n    document.body.appendChild(el)\n    // 加载多个字体\n    const fontFamiliesAll = textList.map((item) => {\n      return new Promise((resolve, reject) => {\n        const font = new FontFaceObserver(item.fontFamily);\n        font.load(item.fontFamily, 2000000).then(() => {\n          Font.set(item.fontFamily, true)\n          resolve()\n        }).catch(err => {\n          reject()\n          console.log('loadFont', err)\n        })\n      })\n    });\n    return Promise.all(fontFamiliesAll);\n  }, [fontList, fontLoaded])\n\n\n  return {\n    fontList,\n    runChange,\n    loadFont,\n    fontLoaded\n  }\n}\n\nexport default useChangeFontFamily\n","// @ts-nocheck\nimport React, { useEffect, useState } from 'react'\nimport style from './index.module.scss'\nimport Select from 'react-select'\nimport { ReactSelectStyles, DropdownIndicator } from '../../../../Select'\nimport InputNumber from '../../../../InputNumber'\nimport { textAlignList, textStyleList } from './config'\nimport useAttr from '../../../../../Draw/hooks/useAttr'\nimport { SketchPicker } from 'react-color'\nimport useChangeFontFamily from '../../../../../Draw/hooks/useChangeFontFamily'\n\nconst ColorPicker: any = SketchPicker\n\n\nconst TextAttr = () => {\n  const {getActiveObject, setAttr} = useAttr()\n  const {fontList, runChange} = useChangeFontFamily()\n  const [fontSize, setFontSize] = useState('12')\n  const [color, setColor] = useState('#000000')\n  const [visible, setVisible] = useState(false)\n  const [fontWeight, setFontWeight] = useState(false)\n  const [underline, setUnderline] = useState(false)\n  const [incline, setIncline] = useState(false)\n  const [align, setAlign] = useState('')\n  const [fontStyle, setFontStyle] = useState<any>(null)\n  const [fontFamily, setFontFamily] = useState(null)\n\n  useEffect(() => {\n    // 回显一些属性\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    setFontSize(activeObject.get('fontSize'))\n    setColor(activeObject.get('fill'))\n    setUnderline(activeObject.get('underline'))\n    setAlign(activeObject.get('textAlign'))\n    setIncline(activeObject.get('fontStyle') === 'italic')\n    const fontWeight = activeObject.get('fontWeight')\n    const isWeight = fontWeight === 'bold' || fontWeight > 500\n\n    setFontWeight(isWeight)\n    setFontStyle(isWeight ? textStyleList[1] : textStyleList[0])\n  }, [getActiveObject, fontList])\n\n  useEffect(() => {\n    const activeObject = getActiveObject()\n    if (!activeObject) return\n    const fontFamily = activeObject.get('fontFamily')\n    setFontFamily(fontList.find(item => item.value === fontFamily))\n  }, [getActiveObject, fontList])\n\n  useEffect(() => {\n    const el = document.querySelector('#attr-content')\n    if (!el) return\n    if (visible) {\n      el.style.overflow = 'inherit'\n    } else {\n      el.style.overflow = 'auto'\n    }\n    return () => {\n      el.style.overflow = 'auto'\n    }\n  }, [visible])\n  /**\n   * 修改字体大小\n   * @param e\n   */\n  const onFontSizeChange = e => {\n    setAttr({fontSize: +e})\n    setFontSize(e)\n  }\n\n  /**\n   * 颜色\n   * @param e\n   */\n  const onChangeComplete = e => {\n    setAttr({fill: e.hex})\n    setColor(e.hex)\n  }\n  /**\n   * 加粗\n   */\n  const onWeightChange = () => {\n    if (fontWeight) {\n      setAttr({fontWeight: 'normal'})\n    } else {\n      setAttr({fontWeight: 'bold'})\n    }\n    setFontWeight(prevState => !prevState)\n  }\n\n  /**\n   * 下划线\n   */\n  const onUnderlineChange = () => {\n    setAttr({underline: !underline})\n    setUnderline(prevState => !prevState)\n  }\n\n  /**\n   * 对齐方式\n   * @param item\n   */\n  const onAlignChange = item => {\n    setAttr({textAlign: item.key})\n    setAlign(item.key)\n  }\n\n  /**\n   * 倾斜\n   */\n  const onInclineChange = () => {\n    if (incline) {\n      setAttr({fontStyle: 'normal'})\n    } else {\n      setAttr({fontStyle: 'italic'})\n    }\n    setIncline(prevState => !prevState)\n  }\n  const onFontStyleChange = item => {\n    setFontStyle(item)\n    setAttr({fontWeight: item.value})\n  }\n  /**\n   * 修改字体\n   * @param item\n   */\n  const onChangeFontFamily = item => {\n    runChange({\n      src: item.url,\n      name: item.value\n    })\n  }\n\n  return (\n    <div className={style.textArea}>\n      <div className={style.title}>文字</div>\n      <div className={style.textAreaContent}>\n        <div className={style.fontFamily}>\n          <Select\n            placeholder='请选择字体'\n            onChange={onChangeFontFamily}\n            components={{DropdownIndicator}}\n            className={style.select}\n            styles={ReactSelectStyles}\n            isSearchable={false}\n            options={fontList}\n            value={fontFamily}\n          />\n          <div className={style.size}>\n            <InputNumber\n              value={fontSize}\n              onChange={onFontSizeChange}\n            />\n          </div>\n        </div>\n        <div className={style.color}>\n          <Select\n            isDisabled\n            onChange={onFontStyleChange}\n            value={fontStyle}\n            components={{DropdownIndicator}}\n            className={`${style.select} ${style.disabledSelect}`}\n            styles={ReactSelectStyles}\n            isSearchable={false}\n            options={textStyleList}\n          />\n          <div className={style.colorContent} onClick={() => setVisible(prevState => !prevState)}>\n            <div style={{background: color}}></div>\n            <span>{color}</span>\n          </div>\n        </div>\n        <div className={style.style}>\n          <div className={style.alignGroup}>\n            {\n              textAlignList.map(item => {\n                return <div\n                  className={item.key === align ? style.alignGroupActive : ''}\n                  onClick={() => onAlignChange(item)}\n                  key={item.key}\n                >\n                  <img src={item.src} alt=\"\"/>\n                  <img src={item.activeSrc} alt=\"\"/>\n                </div>\n              })\n            }\n          </div>\n          <div className={style.styleGroup}>\n            <div onClick={onWeightChange}>\n              <div className={fontWeight ? style.styleGroupActive : ''}>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690964441564257.svg\" alt=\"\"/>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690964450733564.svg\" alt=\"\"/>\n              </div>\n            </div>\n            <div onClick={onInclineChange}>\n              <div className={incline ? style.styleGroupActive : ''}>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690971550502930.svg\" alt=\"\"/>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690971566471578.svg\" alt=\"\"/>\n              </div>\n            </div>\n            {/*行间距，字间距，做不完了，下回再说*/}\n            {/*<div style={{cursor: 'not-allowed'}}>*/}\n            {/*  <div>*/}\n            {/*    <img src=\"https://ossprod.jrdaimao.com/file/1690964468758155.svg\" alt=\"\"/>*/}\n            {/*    <img src=\"https://ossprod.jrdaimao.com/file/1690964475042947.svg\" alt=\"\"/>*/}\n            {/*  </div>*/}\n            {/*</div>*/}\n            <div onClick={onUnderlineChange}>\n              <div className={underline ? style.styleGroupActive : ''}>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690964614214969.svg\" alt=\"\"/>\n                <img src=\"https://ossprod.jrdaimao.com/file/1690964622200366.svg\" alt=\"\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {\n        visible ? <div className={style.fixColorPicker}>\n          <ColorPicker\n            className={style.colorPicker}\n            onChangeComplete={onChangeComplete}\n            color={color}\n          />\n        </div> : null\n      }\n    </div>\n  )\n}\n\nexport default TextAttr\n","// @ts-nocheck\nimport React from 'react';\nimport Size from '../Components/Size'\nimport style from '../WorkSpaceAttr/index.module.scss'\nimport Position from '../Components/Pos'\nimport Transparent from '../Components/Trans'\nimport PageAlign from '../Components/PageAlign'\nimport CoverOrder from '../Components/CoverOrder'\nimport useAttr from '../../../../Draw/hooks/useAttr'\nimport TextAttr from '../Components/Text';\n\nconst TextSpaceAttr = () => {\n  const {getActiveObject} = useAttr()\n  return (\n    <div className={style.workSpaceAttr}>\n      <div className={style.base}>\n        <div>\n          {/* 设置元素的大小、锁定比例 */}\n          <Size getActiveObject={getActiveObject} showRation/>\n        </div>\n        <div>\n          {/* 设置元素的位置、旋转角度 */}\n          <Position/>\n        </div>\n        <div>\n          <Transparent/>\n        </div>\n      </div>\n      <div className={style.division}/>\n      <TextAttr/>\n      <div className={style.division}/>\n      {/* 页面对齐 */}\n      <PageAlign/>\n      <div className={style.division}/>\n      {/*图层顺序 */}\n      <CoverOrder/>\n    </div>\n  );\n};\n\nexport default TextSpaceAttr;\n","import ImageSpaceAttr from '../Components/Attr/ImageSpaceAttr'\nimport TextSpaceAttr from '../Components/Attr/TextSpaceAttr';\n\nexport interface AttrTabListItem {\n  title: string\n  key: string\n  bg: string\n}\n\nexport const attrTabList: Array<AttrTabListItem> = [\n  {\n    title: '属性',\n    key: 'Attr',\n    bg: 'https://ossprod.jrdaimao.com/file/1690510922616482.svg'\n  },\n  {\n    title: '图层',\n    key: 'coverage',\n    bg: 'https://ossprod.jrdaimao.com/file/1690511949701720.svg'\n  }\n]\nexport const attrAreaComponent = {\n  'image': ImageSpaceAttr,\n  'i-text': TextSpaceAttr\n}\nexport const DefaultKey = 'Attr'\n","import React, { createContext, useState } from 'react'\nimport { DefaultKey } from '../AttrArea/config'\n\ninterface EditorContext {\n  attrTab: string\n  setAttrTab: (value: string) => void\n  loading: boolean\n  setLoading: (value: boolean) => void\n  loadingText: string\n  setLoadingText: (value: string) => void\n\n}\n\nconst InitState: EditorContext = {\n  attrTab: DefaultKey,\n  loading: false,\n  loadingText: '',\n  setLoading: () => {\n  },\n  setLoadingText: () => {\n  },\n  setAttrTab: () => {\n  }\n}\n\nexport const Context = createContext<EditorContext>(InitState)\n\nexport const EditorProvider: React.FC = ({children}) => {\n  const [attrTab, setAttrTab] = useState(DefaultKey);\n  const [loading, setLoading] = useState(false)\n  const [loadingText, setLoadingText] = useState('加载中')\n  const value: EditorContext = {\n    attrTab,\n    loading,\n    loadingText,\n    setLoading,\n    setLoadingText,\n    setAttrTab\n  }\n  return <Context.Provider value={value}>\n    {children}\n  </Context.Provider>\n}\n\n","// @ts-nocheck\n/**\n * 预加载图片单张\n * @param src\n */\nimport { uuid } from './utils';\n\nexport const loadImage = (src: string) => {\n  if (!src) return Promise.resolve()\n  return new Promise((resolve, reject) => {\n    const img = new Image\n    img.onload = () => {\n      resolve()\n    }\n    img.onerror = (err) => {\n      reject(err)\n    }\n    img.src = src\n  })\n}\n\n/**\n * 预加载图片多张\n * @param list\n */\nexport const loadImageList = (list: Array<string>) => {\n  return Promise.all(list.map(src => loadImage(src)))\n}\n\n/**\n * base64转file\n * @param {string} urlData base64格式图片\n * @returns\n */\nexport function base64ConvertFile(urlData: string) {\n  const arr = urlData.split(',')\n  // @ts-ignore\n  const type = arr[0].match(/:(.*?);/)[1]\n  const fileExt = type.split('/')[1]\n  const bstr = atob(arr[1])\n  let n = bstr.length\n  const u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], `${uuid()}.` + fileExt, {\n    type: type\n  });\n}\n","import axios from 'axios';\n\nconst request = axios.create({\n  baseURL: ''\n})\n\n\nrequest.interceptors.response.use((response) => {\n  if (response.data.code === '200') {\n    return response.data.data;\n  }\n  return response;\n}, error => {\n  console.log(error);\n})\n\nexport const fetch = {\n  get: (url: string, params: any) => {\n    return request.get(url, {params});\n  },\n  post: (url: string, data: any) => {\n    return request.post(url, data)\n  }\n}\n","import { fetch } from './fetch'\n\nexport const getImageList = (data: any) => {\n  return fetch.get('/api_editimg/liststock', data);\n}\n\n// 上传图片\nexport const postUploadImage = (file: any) => {\n  const form = new FormData();\n  form.append('file', file);\n  return fetch.post('/api_image/upload', form);\n}\n\n// add images\nexport const addImageApi = (data: any) => {\n  return fetch.post('/api_editimg/addstock', data);\n}\n\n// save\nexport const saveHistory = (data: any) => {\n  return fetch.post('/api_editimg/save', data);\n}\n\n// delete\nexport const delstock = (data: any) => {\n  return fetch.get('/api_editimg/delstock', data);\n}\n\nexport const getDetail = (data: any) => {\n  return fetch.get('/api_editimg/detail', data);\n}\n\n","import { useCallback } from 'react';\nimport toast from 'react-hot-toast';\n\nconst useToast = () => {\n  const error = useCallback((text: string) => {\n    toast(text,\n      {\n        duration: 1500,\n        // icon: 'err',\n        style: {\n          borderRadius: '10px',\n          background: '#333',\n          color: '#fff',\n        },\n      }\n    );\n  }, [])\n\n  return {\n    error\n  }\n}\nexport default useToast\n","// @ts-nocheck\nimport { fabric } from 'fabric';\nimport { useCallback, useContext } from 'react';\nimport { Context } from '../CanvasContext';\nimport { Context as EditorContext } from '../../Editor/Context';\nimport { base64ConvertFile } from '../../../utils/tool'\nimport { postUploadImage } from '../../../api/image';\nimport useToast from './useToast';\nimport { uuid } from '../../../utils/utils';\n\nconst useClipImage = () => {\n  const {workSpace, canvas, clipImageId, clipRawIndex, setIsClipImage} = useContext(Context)\n  const {setLoading} = useContext(EditorContext)\n  const toast = useToast()\n  /**\n   * 保存裁剪\n   */\n  const saveClipImage = useCallback(async () => {\n    if (!canvas || !workSpace) return\n    const scale = canvas.getZoom()\n    try {\n      let image = null // 被裁剪的图片\n      let rect = null // 裁剪rect\n      let currentClipImageIndex = null // 当前下标\n      canvas.getObjects().forEach((item, index) => {\n        // 获取到裁剪rect\n        if (item.id === 'currentClipRect') {\n          rect = item\n        }\n        // 获取到被裁剪的图片和被裁剪的图片的index\n        if (item.id === clipImageId) {\n          image = item\n          currentClipImageIndex = index\n        }\n      })\n      if (!image || !rect) return\n      setLoading(true)\n      // 创建一个新的rect并保持和裁剪rect位置一致\n      const newRect = new fabric.Rect({\n        left: rect.left,\n        top: rect.top,\n        width: rect.getScaledWidth(),\n        height: rect.getScaledHeight(),\n        absolutePositioned: true,\n      });\n      // 设置图片clipPath（裁剪功能）\n      image.clipPath = newRect;\n\n      // 生成一个image\n      const cropped = new Image();\n      cropped.crossOrigin = 'anonymous'\n      // 把旧的rect删除\n      canvas.remove(rect);\n      // 恢复画布缩放比例\n      canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\n      // 裁剪图片，位置是newRect的位置\n      const base64 = canvas.toDataURL({\n        left: newRect.left,\n        top: newRect.top,\n        width: newRect.width,\n        height: newRect.height,\n      });\n      const file = base64ConvertFile(base64)\n      const res = await postUploadImage(file)\n      cropped.src = res.url\n      // cropped.src = base64\n      // 裁剪完成收回复画布缩放比例\n      workSpace?.setZoomAuto(scale)\n      // 等待裁剪的图片加载完成\n      cropped.onload = function () {\n        // 将原图片删除\n        canvas.remove(image)\n        // 创建新的图片\n        const newImage = new fabric.Image(cropped, {crossOrigin: 'anonymous'});\n        // 这个原图的src很重要，重新编辑的时候会用到\n        // 设置新图片的位置和newRect位置保持一致\n        newImage.set({\n          id: image.id,\n          left: newRect.left,\n          top: newRect.top,\n          rawScaleX: image.scaleX,\n          rawScaleY: image.scaleY,\n          sourceSrc: image.sourceSrc,\n          rectDiffLeft: newRect.left - image.left,\n          rectDiffTop: newRect.top - image.top,\n          prevWidth: newRect.getScaledWidth(),\n          prevHeight: newRect.getScaledHeight()\n        })\n        canvas.add(newImage);\n        if (currentClipImageIndex !== clipRawIndex) {\n          // 如果被裁剪的图片层级发生了变化那么需要恢复image之前的层级\n          while (currentClipImageIndex !== clipRawIndex) {\n            newImage.sendBackwards()\n            currentClipImageIndex--\n          }\n        }\n        canvas.renderAll();\n        // 完成裁剪\n        setIsClipImage(false)\n        setLoading(false)\n      };\n    } catch (err) {\n      setLoading(false)\n      workSpace?.setZoomAuto(scale)\n      cancelClipImage()\n      toast.error('裁剪失败，请稍后重试~')\n      console.log(err)\n    }\n  }, [canvas, workSpace, clipImageId, clipRawIndex])\n  /**\n   * 取消裁剪\n   */\n  const cancelClipImage = useCallback(() => {\n    if (!canvas) return\n    let rect = null // 裁剪rect\n    let clipImage = null // 被裁剪的图片\n    let currentClipImageIndex = null // 被裁剪的图片的index\n    canvas.getObjects().forEach((item, index) => {\n      // 获取到裁剪rect\n      if (item.id === 'currentClipRect') {\n        rect = item\n      }\n      // 获取到被裁剪的图片和被裁剪的图片的index\n      if (item.id === clipImageId) {\n        clipImage = item\n        currentClipImageIndex = index\n      }\n    })\n    if (!clipImage) return\n    // 如果点击取消，那么判断有rect就把rect删除\n    if (rect) canvas.remove(rect)\n    canvas.remove(clipImage)\n    const cloneObject = clipImage.get('cloneObject')\n    if (!clipImage) return\n    cloneObject.set({\n      id: uuid(),\n      sourceSrc: clipImage.sourceSrc,\n      rawScaleX: clipImage.scaleX,\n      rawScaleY: clipImage.scaleY,\n      rectDiffLeft: clipImage.rectDiffLeft,\n      rectDiffTop: clipImage.rectDiffTop,\n    })\n    canvas.add(cloneObject)\n    if (cloneObject && currentClipImageIndex !== clipRawIndex) {\n      // 如果被裁剪的图片层级发生了变化那么需要恢复image之前的层级\n      while (currentClipImageIndex !== clipRawIndex) {\n        cloneObject.sendBackwards()\n        currentClipImageIndex--\n      }\n    }\n    // 完成裁剪，恢复状态\n    setIsClipImage(false)\n    canvas.renderAll()\n  }, [canvas, workSpace, clipImageId, clipRawIndex])\n\n  return {\n    saveClipImage,\n    cancelClipImage\n  }\n}\n\nexport default useClipImage\n","// @ts-nocheck\nimport { useCallback, useContext, useEffect } from 'react';\nimport { Context } from '../CanvasContext';\nimport { Context as EditorContext } from '../../Editor/Context'\nimport { fabric } from 'fabric';\nimport { KeyNames } from '../../../utils/hotEventKeys';\nimport { hotkeys } from '../../../core/initHotKeys'\nimport useClipImage from './useClipImage';\nimport { isUndef } from '../../../utils';\nimport { events, Types } from '../../../utils/events';\n\nconst useEvents = () => {\n  const {\n    canvas, editor, workSpace, setSelectMode, setSelectIds, setSelectOneType,\n    clipImageId, setIsClipImage, clipRawIndex,\n    isClipImage\n  } = useContext(Context)\n  const {setLoading} = useContext(EditorContext)\n  const {cancelClipImage} = useClipImage()\n  useEffect(() => {\n    events.on(Types.SHOW_LOADING, setLoading)\n    return () => {\n      events.off(Types.SHOW_LOADING, setLoading)\n    }\n  }, [])\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on({\n      'selection:created': selected,\n      'selection:updated': selected,\n      'selection:cleared': selected,\n      'mouse:wheel': onWheel\n    })\n    return () => {\n      canvas.off({\n        'selection:created': selected,\n        'selection:updated': selected,\n        'selection:cleared': selected,\n        'mouse:wheel': onWheel\n      })\n    }\n  }, [canvas, editor])\n  useEffect(() => {\n    hotkeys(KeyNames.delete, deleteObjects);\n    return () => {\n      hotkeys.unbind(KeyNames.delete, deleteObjects);\n    }\n  }, [canvas, isClipImage, clipImageId])\n  useEffect(() => {\n    hotkeys(KeyNames.zoom, onZoom)\n    return () => {\n      hotkeys.unbind(KeyNames.zoom, onZoom)\n    }\n  }, [canvas, workSpace])\n  // useEffect(() => {\n  //   if (!canvas) return\n  //   canvas.on('selection:updated', selectionUpdated)\n  //   return () => {\n  //     canvas.off('selection:updated', selectionUpdated)\n  //   }\n  // }, [canvas, isClipImage, clipImageId, clipRawIndex])\n  //\n  // const selectionUpdated = useCallback(() => {\n  //   const objects = canvas?.getActiveObjects()\n  //   if (isClipImage) {\n  //     cancelClipImage()\n  //   }\n  // }, [canvas, isClipImage, clipImageId, clipRawIndex])\n  /**\n   * 单选多选事件\n   */\n  const selected = useCallback(() => {\n    if (!canvas) return\n    const actives = canvas\n      .getActiveObjects()\n      .filter((item) => !(item instanceof fabric.GuideLine)); // 过滤掉辅助线\n    if (actives && actives.length === 1) {\n      const activeObject = actives[0]\n      if (activeObject && activeObject.type === 'image') {\n        activeObject.set({\n          prevWidth: activeObject.getScaledWidth(),\n          prevHeight: activeObject.getScaledHeight()\n        })\n        canvas.renderAll()\n      }\n      if (activeObject.type === 'i-text') {\n        activeObject.setControlsVisibility({\n          mt: false,\n          ml: false,\n          mb: false,\n          mr: false,\n        })\n        canvas.renderAll()\n      }\n      setSelectMode('one')\n      setSelectIds([activeObject.id])\n      setSelectOneType(activeObject.type)\n    } else if (actives && actives.length > 1) {\n      setSelectMode('multiple')\n      setSelectIds(actives.map(item => item.id as string))\n    } else {\n      setSelectMode('')\n      setSelectIds([])\n      setSelectOneType('')\n    }\n  }, [canvas, editor])\n  /**\n   * 放大缩小\n   */\n  const onZoom = useCallback((e) => {\n    if (e.code === 'Minus') {\n      workSpace?.small(0.05)\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (e.code === 'Equal') {\n      workSpace?.big(0.05)\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }, [canvas, workSpace])\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on('object:modified', (e) => {\n      const target = e.transform?.target\n      if (!target) return\n      if (target.type !== 'image') return\n      if (isUndef(target.rawScaleX) || isUndef(target.rawScaleY)) return\n      const prevWidth = target.prevWidth\n      const prevHeight = target.prevHeight\n      target.set({\n        rawScaleX: target.getScaledWidth() / prevWidth * target.rawScaleX,\n        rawScaleY: target.getScaledHeight() / prevHeight * target.rawScaleY,\n        prevWidth: target.getScaledWidth(),\n        prevHeight: target.getScaledHeight()\n      })\n      canvas.renderAll()\n\n    })\n  }, [canvas])\n  /**\n   * 鼠标缩放事件\n   */\n  const onWheel = useCallback(({e}) => {\n    const delta = e.deltaY;\n    // 根据滚轮方向调整缩放级别\n    if (delta > 0) {\n      workSpace?.small(0.01)\n    } else {\n      workSpace?.big(0.01)\n    }\n    // 阻止默认滚轮事件\n    e.preventDefault();\n    e.stopPropagation();\n  }, [canvas, workSpace])\n\n  const deleteClipImageAndRect = useCallback(() => {\n    if (!canvas) return\n    let rect = null // 裁剪rect\n    let clipImage = null // 被裁剪的图片\n    canvas.getObjects().forEach((item) => {\n      if (item.id === 'currentClipRect') {\n        rect = item\n      }\n      if (item.id === clipImageId) {\n        clipImage = item\n      }\n    })\n    if (!rect || !clipImage) return\n    canvas.remove(rect)\n    canvas.remove(clipImage)\n    canvas.discardActiveObject()\n    canvas.renderAll()\n    setIsClipImage(false)\n  }, [canvas, clipImageId])\n  /**\n   * 删除\n   */\n  const deleteObjects = useCallback(() => {\n    // 如果正在剪裁图片\n    if (isClipImage) {\n      return\n      // deleteClipImageAndRect()\n    }\n    const activeObject = canvas.getActiveObjects()\n    if (activeObject) {\n      activeObject.map((item) => canvas.remove(item))\n      canvas.discardActiveObject()\n      canvas.renderAll()\n    }\n  }, [canvas, isClipImage, clipImageId])\n}\n\nexport default useEvents\n","// @ts-nocheck\nimport { fabric } from 'fabric';\nimport { throttle, uuid } from '../utils/utils';\nimport { events, Types } from '../utils/events';\nimport { isNumber } from '../utils';\nimport { canvas } from 'file-saver';\nimport { divide, subtract } from '../utils/calculate';\n\nconst DefaultWidth = 1024\nconst DefaultHeight = 1024\n\ndeclare type EditorWorkspaceOption = {\n  src: string | undefined\n  callback?: () => void\n  canvasData: any\n};\ndeclare type ExtCanvas = fabric.Canvas & {\n  isDragging: boolean;\n  lastPosX: number;\n  lastPosY: number;\n};\nexport const DefaultWorkSpaceColor = 'rgba(255,255,255,1)'\n\nclass EditorWorkspace {\n  canvas: fabric.Canvas;\n  workspaceEl: HTMLElement;\n  workspace: fabric.Rect | null;\n  option: EditorWorkspaceOption;\n  dragMode: boolean;\n  fill: string;\n  width: number | undefined\n  height: number | undefined\n  scale: number\n\n  constructor(canvas: fabric.Canvas, option: EditorWorkspaceOption) {\n    this.canvas = canvas;\n    const workspaceEl = document.querySelector('#workspace') as HTMLElement;\n    if (!workspaceEl) {\n      throw new Error('element #workspace is missing, plz check!');\n    }\n    this.workspaceEl = workspaceEl;\n    this.workspace = null;\n    this.option = option;\n    this.dragMode = false;\n    this.fill = DefaultWorkSpaceColor\n    this._initBackground();\n    this._initWorkspace();\n    this._initResizeObserve();\n    this._initDring();\n  }\n\n  // 初始化背景\n  _initBackground() {\n    this.canvas.setWidth(this.workspaceEl.offsetWidth);\n    this.canvas.setHeight(this.workspaceEl.offsetHeight);\n  }\n\n  // 初始化画布\n  _initWorkspace() {\n    const {src, canvasData, callback} = this.option\n    // 如果canvasData有数据的话这里要走反显逻辑\n    if (canvasData && canvasData.objects.length) {\n      const rectOptions = canvasData.objects.find(item => item.type === 'rect')\n      this.width = rectOptions.width\n      this.height = this.height = rectOptions.height\n      this.fill = rectOptions.fill\n      this.canvas.loadFromJSON(canvasData, () => {\n        const workspace = this.canvas.getObjects().find((item) => item.id === 'workspace')\n        workspace.set('selectable', false)\n        workspace.set('hasControls', false)\n        this.setSize(workspace.width as number, workspace.height as number)\n        this.canvas.renderAll()\n        callback()\n      })\n      return;\n    }\n    if (!src) {\n      // 如果没有传入图片url，用默认宽高生成背景\n      this.width = DefaultWidth\n      this.height = DefaultHeight\n      this._initRect()\n      return\n    }\n\n    fabric.Image.fromURL(src, img => {\n      img.set({\n        type: 'image',\n        left: 0.5,\n        top: 0.5,\n        id: 'mainImg'\n      })\n      this.width = img.width || DefaultWidth\n      this.height = img.height || DefaultHeight\n      this._initRect(img)\n    }, {crossOrigin: 'anonymous'})\n  }\n\n  _initRect(img?: fabric.Object) {\n    const workspace = new fabric.Rect({\n      fill: this.fill,\n      width: this.width,\n      height: this.height,\n      id: 'workspace',\n    });\n    workspace.w = this\n    workspace.set('selectable', false);\n    workspace.set('hasControls', false);\n    workspace.hoverCursor = 'default';\n    this.canvas.add(workspace);\n    if (img && img.width && img.height) {\n      // 如果图片加载失败，不添加到画布中\n      this.canvas.add(img)\n    }\n    this.canvas.renderAll();\n    this.workspace = workspace;\n    this.option.callback?.();\n    this.auto();\n  }\n\n  setBgColor(color: string) {\n    this.fill = color;\n    this.workspace?.set({fill: color});\n    this.canvas.renderAll();\n  }\n\n  /**\n   * 设置画布中心到指定对象中心点上\n   * @param {Object} obj 指定的对象\n   */\n  setCenterFromObject(obj: fabric.Rect) {\n    const {canvas} = this;\n    const objCenter = obj.getCenterPoint();\n    const viewportTransform = canvas.viewportTransform;\n    if (canvas.width === undefined || canvas.height === undefined || !viewportTransform) return;\n    viewportTransform[4] = canvas.width / 2 - objCenter.x * viewportTransform[0];\n    viewportTransform[5] = canvas.height / 2 - objCenter.y * viewportTransform[3];\n    canvas.setViewportTransform(viewportTransform);\n    canvas.renderAll();\n  }\n\n  // 初始化监听器\n  _initResizeObserve() {\n    const resizeObserver = new ResizeObserver(\n      throttle(() => {\n        this.auto();\n      }, 50)\n    );\n    resizeObserver.observe(this.workspaceEl);\n  }\n\n  setSize(width: number, height: number) {\n    this._initBackground();\n    this.width = isNumber(width) ? width : +width;\n    this.height = isNumber(height) ? height : +height;\n    // 重新设置workspace\n    this.workspace = this.canvas\n      .getObjects()\n      .find((item) => item.id === 'workspace') as fabric.Rect;\n    this.workspace.set('width', this.width);\n    this.workspace.set('height', this.height);\n    this.auto();\n  }\n\n  setZoomAuto(scale: number, cb?: (left?: number, top?: number) => void) {\n    const {workspaceEl} = this;\n    const width = workspaceEl.offsetWidth;\n    const height = workspaceEl.offsetHeight;\n    this.canvas.setWidth(width);\n    this.canvas.setHeight(height);\n    const center = this.canvas.getCenter();\n    this.canvas.setViewportTransform(fabric.iMatrix.concat());\n    this.canvas.zoomToPoint(new fabric.Point(center.left, center.top), scale);\n    if (!this.workspace) return;\n    this.setCenterFromObject(this.workspace);\n\n    // 超出画布不展示\n    this.workspace.clone((cloned: fabric.Rect) => {\n      this.canvas.clipPath = cloned;\n      this.canvas.requestRenderAll();\n    });\n    if (cb) cb(this.workspace.left, this.workspace.top);\n  }\n\n  getScale() {\n    const viewPortWidth = this.workspaceEl.offsetWidth;\n    const viewPortHeight = this.workspaceEl.offsetHeight;\n    const width = this.width || 0\n    const height = this.height || 0\n    if (!width || !height) return 0\n    // 按照宽度\n    if (viewPortWidth / viewPortHeight < width / height) {\n      return subtract(divide(viewPortWidth, width), 0.08)\n    } // 按照宽度缩放\n    return subtract(divide(viewPortHeight, height), 0.08)\n  }\n\n  // 放大\n  big(value: number) {\n    let zoomRatio = this.canvas.getZoom();\n    zoomRatio += value || 0.05;\n    if (zoomRatio >= 3) {\n      zoomRatio = 3\n    }\n    events.emit(Types.CHANGE_SCALE, zoomRatio)\n    const center = this.canvas.getCenter();\n    this.canvas.zoomToPoint(new fabric.Point(center.left, center.top), zoomRatio);\n  }\n\n  // 缩小\n  small(value: number) {\n    let zoomRatio = this.canvas.getZoom();\n    zoomRatio -= value || 0.05;\n    if (zoomRatio <= 0.1) {\n      zoomRatio = 0.1\n    }\n    events.emit(Types.CHANGE_SCALE, zoomRatio)\n    const center = this.canvas.getCenter();\n    this.canvas.zoomToPoint(\n      new fabric.Point(center.left, center.top),\n      zoomRatio < 0 ? 0.01 : zoomRatio\n    );\n  }\n\n  // 自动缩放\n  auto() {\n    const scale = this.getScale();\n    if (scale) {\n      this.scale = scale\n      events.emit(Types.CHANGE_SCALE, scale)\n      this.setZoomAuto(scale);\n    }\n  }\n\n  // 1:1 放大\n  one() {\n    this.setZoomAuto(0.8 - 0.08);\n    this.canvas.requestRenderAll();\n  }\n\n  // 开始拖拽\n  startDring() {\n    this.dragMode = true;\n    this.canvas.defaultCursor = 'grab';\n  }\n\n  endDring() {\n    this.dragMode = false;\n    this.canvas.defaultCursor = 'default';\n  }\n\n  // 拖拽模式\n  _initDring() {\n    const This = this;\n    this.canvas.on('mouse:down', function (this: ExtCanvas, opt) {\n      const evt = opt.e;\n      if (evt.altKey || This.dragMode) {\n        This.canvas.defaultCursor = 'grabbing';\n        This.canvas.discardActiveObject();\n        This._setDring();\n        this.selection = false;\n        this.isDragging = true;\n        this.lastPosX = evt.clientX;\n        this.lastPosY = evt.clientY;\n        this.requestRenderAll();\n      }\n    });\n\n    this.canvas.on('mouse:move', function (this: ExtCanvas, opt) {\n      if (this.isDragging) {\n        This.canvas.discardActiveObject();\n        This.canvas.defaultCursor = 'grabbing';\n        const {e} = opt;\n        if (!this.viewportTransform) return;\n        const vpt = this.viewportTransform;\n        vpt[4] += e.clientX - this.lastPosX;\n        vpt[5] += e.clientY - this.lastPosY;\n        this.lastPosX = e.clientX;\n        this.lastPosY = e.clientY;\n        this.requestRenderAll();\n      }\n    });\n\n    this.canvas.on('mouse:up', function (this: ExtCanvas) {\n      if (!this.viewportTransform) return;\n      this.setViewportTransform(this.viewportTransform);\n      this.isDragging = false;\n      this.selection = true;\n      this.getObjects().forEach((obj) => {\n        if (obj.id !== 'workspace' && obj.hasControls) {\n          obj.selectable = true;\n        }\n      });\n      this.requestRenderAll();\n      This.canvas.defaultCursor = 'default';\n    });\n\n    this.canvas.on('mouse:wheel', function (this: fabric.Canvas, opt) {\n      const delta = opt.e.deltaY;\n      let zoom = this.getZoom();\n      zoom *= 0.999 ** delta;\n      if (zoom > 20) zoom = 20;\n      if (zoom < 0.01) zoom = 0.01;\n      const center = this.getCenter();\n      this.zoomToPoint(new fabric.Point(center.left, center.top), zoom);\n      opt.e.preventDefault();\n      opt.e.stopPropagation();\n    });\n  }\n\n  _setDring() {\n    this.canvas.selection = false;\n    this.canvas.defaultCursor = 'grab';\n    this.canvas.getObjects().forEach((obj) => {\n      obj.selectable = false;\n    });\n    this.canvas.renderAll();\n    this.canvas.requestRenderAll();\n  }\n}\n\nexport default EditorWorkspace;\n","import { useCallback, useContext, useRef, useState } from 'react';\nimport { Context } from '../CanvasContext';\nimport { saveAs } from 'file-saver';\nimport { uuid } from '../../../utils/utils';\nimport { saveHistory as saveHistoryApi } from '../../../api/image';\nimport useClipImage from './useClipImage';\nimport useToast from './useToast';\n\nconst useSave = () => {\n  const toast = useToast()\n  const {editor, canvas, workSpace, mainUrl, isClipImage, clipImageId, clipRawIndex} = useContext(Context)\n  const {cancelClipImage} = useClipImage()\n  const [saveToImageLoading, setSaveToImageLoading] = useState(false)\n  const useLast = useRef<any>({})\n  useLast.current = {\n    editor,\n    mainUrl,\n  }\n  /**\n   * send beacon\n   */\n  const unloadSendBeacon = useCallback(() => {\n    const {editor, mainUrl} = useLast.current\n    if (!editor || !mainUrl) return\n    const dataJson = editor.getJson()\n    // 把裁剪蒙层过滤出去\n    dataJson.objects = dataJson.objects.filter((item: any) => item.id !== 'currentClipRect')\n    const data = JSON.stringify({\n      data: dataJson ? JSON.stringify(dataJson) : '',\n      imgSrc: mainUrl\n    })\n    const blob = new Blob([data], {type: 'application/json'})\n    const isPush = navigator.sendBeacon('/api_editimg/save', blob)\n    console.log('navigator.sendBeacon event', isPush)\n  }, [editor, mainUrl])\n  /**\n   * 保存历史修改记录\n   */\n  const saveHistory = useCallback(() => {\n    if (!editor || !mainUrl) return\n    const dataJson = editor.getJson()\n    return saveHistoryApi({\n      data: dataJson ? JSON.stringify(dataJson) : '',\n      imgSrc: mainUrl\n    })\n  }, [editor, mainUrl])\n  /**\n   * 保存为json\n   */\n  const saveToJson = useCallback(() => {\n    if (!editor) return\n    saveHistory()\n    const dataUrl = editor.getJson();\n    const fileStr = `data:text/json;charset=utf-8,${encodeURIComponent(\n      JSON.stringify(dataUrl, null, '\\t')\n    )}`;\n    saveAs(fileStr, `${uuid()}.json`)\n  }, [editor])\n\n  /**\n   * 保存为图片\n   */\n  const saveToImage = useCallback(async () => {\n    if (saveToImageLoading) return\n    if (!canvas || !editor) return;\n    // 如果正在编辑图片\n    if (isClipImage) {\n      cancelClipImage()\n    }\n    try {\n      setSaveToImageLoading(true)\n      await saveHistory()\n      const workspace = canvas?.getObjects().find((item) => item.id === 'workspace');\n      editor.ruler.hideGuideline();\n      if (!workspace) return;\n      const {left, top, width, height} = workspace;\n      const option = {\n        format: 'png',\n        quality: 1,\n        left,\n        top,\n        width,\n        height,\n      };\n      const scale = canvas.getZoom()\n      canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\n      const dataUrl = canvas.toDataURL(option);\n      saveAs(dataUrl, `${uuid()}.png`);\n      workSpace?.setZoomAuto(scale)\n      // 恢复之前的缩放比例\n      editor.ruler.showGuideline();\n      setSaveToImageLoading(false)\n    } catch (err) {\n      console.log('onSaveToImage err', err)\n      workSpace?.auto()\n      toast.error(err.message)\n      setSaveToImageLoading(false)\n    }\n  }, [canvas, editor, workSpace, isClipImage, clipImageId, clipRawIndex])\n\n  return {\n    saveToJson,\n    saveHistory,\n    unloadSendBeacon,\n    saveToImage\n  }\n}\n\nexport default useSave\n","import React, { useEffect, useContext } from 'react'\nimport styles from './styles.module.css'\nimport { fabric } from 'fabric'\nimport Editor from '../../core';\nimport { Context } from './CanvasContext'\nimport { Context as EditorContext } from '../Editor/Context'\nimport useEvents from './hooks/useEvents';\nimport EditorWorkspace from '../../core/EditorWorkspace';\nimport { getDetail } from '../../api/image';\nimport { loadImage } from '../../utils/tool';\nimport useSave from './hooks/useSave';\nimport useChangeFontFamily from './hooks/useChangeFontFamily';\n\n\nconst Draw: React.FC<{ src?: string }> = (props) => {\n  const {setCanvas, setEditor, setWorkSpace, setShow, setMainUrl} = useContext(Context)\n  const {setLoading} = useContext(EditorContext)\n  const {loadFont, fontLoaded} = useChangeFontFamily()\n  const {unloadSendBeacon} = useSave()\n  useEvents()\n\n  useEffect(() => {\n    if (!fontLoaded) return\n    init()\n    setMainUrl(props.src)\n  }, [fontLoaded])\n\n  useEffect(() => {\n    window.addEventListener('beforeunload', () => {\n      unloadSendBeacon()\n    })\n  }, [])\n\n  const init = async () => {\n    // 没有src不去请求，直接生成背景\n    if (!props.src) {\n      return initCanvas()\n    }\n    // 获取接口的历史数据\n    try {\n      const res: any = await getDetail({imgSrc: props.src})\n      initCanvas(JSON.parse(res))\n    } catch (err) {\n      initCanvas()\n    }\n  }\n  /**\n   * 初始化canvas\n   * @param canvasData\n   */\n  const initCanvas = async (canvasData?: any) => {\n    let mainImg = null;\n    if (canvasData && canvasData.objects) {\n      // 先从缓存中获取主图src\n      mainImg = canvasData.objects.find((item: any) => item.id === 'mainImg')?.src\n    } else {\n      // 缓存中取不到就去看props里是否有\n      mainImg = props.src\n    }\n    // 主图和字体包会很大，这里做个loading\n    try {\n      setLoading(true)\n      await loadFont(canvasData?.objects)\n      await loadImage(mainImg)\n      setLoading(false)\n    } catch (err) {\n      console.log(`initCanvas error`, err)\n      setLoading(false)\n    }\n\n    const canvas = new fabric.Canvas('fabric-canvas', {\n      fireRightClick: true, // 启用右键，button的数字为3\n      stopContextMenu: true, // 禁止默认右键菜单\n      controlsAboveOverlay: true, // 超出clipPath后仍然展示控制条\n      preserveObjectStacking: true\n    })\n    const workSpace = new EditorWorkspace(canvas, {\n      src: props.src,\n      callback: () => setShow(true),\n      canvasData,\n    })\n    const editor = new Editor(canvas)\n    setWorkSpace(workSpace)\n    setCanvas(canvas)\n    setEditor(editor)\n  }\n\n  return (\n    <div className={styles.workContent} id='workspace'>\n      <canvas className={styles.canvas} id='fabric-canvas'/>\n    </div>\n  )\n}\n\nexport default Draw\n","import React from 'react'\nimport style from './index.module.scss'\nimport useSave from '../../Draw/hooks/useSave';\n\ninterface ImportFileProps {\n  onBack?: () => void\n}\n\nconst ImportFile: React.FC<ImportFileProps> = (props) => {\n  const {saveHistory, unloadSendBeacon} = useSave()\n  const back = () => {\n    saveHistory()\n    unloadSendBeacon()\n    props.onBack?.()\n  }\n  return (\n    <div className={style.importFile}>\n      {\n        props.onBack ? <span className={style.back} onClick={back}>\n        <img src='https://ossprod.jrdaimao.com/file/1690265070713402.svg' alt=''/>\n        <img src=\"https://ossprod.jrdaimao.com/file/1690358472515604.svg\" alt=\"\"/>\n        <span>返回</span>\n      </span> : null\n      }\n\n      {/*<span className={style.openFile}>*/}\n      {/*  <img src=\"https://ossprod.jrdaimao.com/file/1690423416245892.svg\" alt=\"\"/>*/}\n      {/*  <img src=\"https://ossprod.jrdaimao.com/file/1690423788579835.svg\" alt=\"\"/>*/}\n      {/*  <span>打开文件</span>*/}\n      {/*</span>*/}\n    </div>\n  )\n}\n\nexport default ImportFile\n","import { useMemo, useRef } from 'react';\n\ntype noop = (this: any, ...args: any[]) => any;\n\ntype PickFunction<T extends noop> = (\n  this: ThisParameterType<T>,\n  ...args: Parameters<T>\n) => ReturnType<T>;\n\nfunction useMemoizedFn<T extends noop>(fn: T) {\n  const fnRef = useRef<T>(fn);\n\n  // why not write `fnRef.current = fn`?\n  // https://github.com/alibaba/hooks/issues/728\n  fnRef.current = useMemo(() => fn, [fn]);\n\n  const memoizedFn = useRef<PickFunction<T>>();\n  if (!memoizedFn.current) {\n    memoizedFn.current = function (this, ...args) {\n      return fnRef.current.apply(this, args);\n    };\n  }\n\n  return memoizedFn.current as T;\n}\n\nexport default useMemoizedFn;\n","// @ts-nocheck\nimport { useRef, useState } from 'react';\nimport useMemoizedFn from './useMemoizedFn';\nimport { isNumber } from '../utils';\n\ninterface IData<T> {\n  present?: T;\n  past: T[];\n  future: T[];\n}\n\nconst dumpIndex = <T>(step: number, arr: T[]) => {\n  let index =\n    step > 0\n      ? step - 1 // move forward\n      : arr.length + step; // move backward\n  if (index >= arr.length - 1) {\n    index = arr.length - 1;\n  }\n  if (index < 0) {\n    index = 0;\n  }\n  return index;\n};\n\nconst split = <T>(step: number, targetArr: T[]) => {\n  const index = dumpIndex(step, targetArr);\n  return {\n    _current: targetArr[index],\n    _before: targetArr.slice(0, index),\n    _after: targetArr.slice(index + 1),\n  };\n};\n\nexport default function useHistoryTravel<T>(initialValue?: T, maxLength: number = 0) {\n  const [history, setHistory] = useState<IData<T | undefined>>({\n    present: initialValue,\n    past: [],\n    future: [],\n  });\n\n  const { present, past, future } = history;\n  const initialValueRef = useRef(initialValue);\n\n  const reset = (...params: any[]) => {\n    const _initial = params.length > 0 ? params[0] : initialValueRef.current;\n    initialValueRef.current = _initial;\n\n    setHistory({\n      present: _initial,\n      future: [],\n      past: [],\n    });\n  };\n\n  const updateValue = (val: T) => {\n    const _past = [...past, present];\n    const maxLengthNum = isNumber(maxLength) ? maxLength : Number(maxLength);\n    // maximum number of records exceeded\n    if (maxLengthNum > 0 && _past.length > maxLengthNum) {\n      //delete first\n      _past.splice(0, 1);\n    }\n    setHistory({\n      present: val,\n      future: [],\n      past: _past,\n    });\n  };\n\n  const _forward = (step: number = 1) => {\n    if (future.length === 0) {\n      return;\n    }\n    const { _before, _current, _after } = split(step, future);\n    setHistory({\n      past: [...past, present, ..._before],\n      present: _current,\n      future: _after,\n    });\n  };\n\n  const _backward = (step: number = -1) => {\n    if (past.length === 0) {\n      return;\n    }\n\n    const { _before, _current, _after } = split(step, past);\n    setHistory({\n      past: _before,\n      present: _current,\n      future: [..._after, present, ...future],\n    });\n  };\n\n  const go = (step: number) => {\n    const stepNum = isNumber(step) ? step : Number(step);\n    if (stepNum === 0) {\n      return;\n    }\n    if (stepNum > 0) {\n      return _forward(stepNum);\n    }\n    _backward(stepNum);\n  };\n\n  return {\n    value: present,\n    backLength: past.length,\n    forwardLength: future.length,\n    setValue: useMemoizedFn(updateValue),\n    go: useMemoizedFn(go),\n    back: useMemoizedFn(() => {\n      go(-1);\n    }),\n    forward: useMemoizedFn(() => {\n      go(1);\n    }),\n    reset: useMemoizedFn(reset),\n  };\n}\n","import useHistoryTravel from '../../../hooks/useHistoryTravel';\nimport { useCallback, useContext, useEffect, useRef } from 'react';\nimport { Context } from '../CanvasContext';\n\nconst useHistory = () => {\n  const {canvas, workSpace, editor, clipImageId, isClipImage} = useContext(Context)\n  const {value, setValue, go, reset, backLength, forwardLength} = useHistoryTravel<any>(undefined, 50)\n  const historyFlagRef = useRef(false)\n\n\n  useEffect(() => {\n    canvas?.on({\n      'object:added': save,\n      'object:modified': save,\n      'object:removed': save\n    })\n    return () => {\n      canvas?.off({\n        'object:added': save,\n        'object:modified': save,\n        'object:removed': save\n      })\n    }\n  }, [canvas, editor, setValue, isClipImage, clipImageId])\n  useEffect(() => {\n    if (!workSpace || !editor) return\n    reset(editor.getJson());\n  }, [editor, workSpace])\n  useEffect(() => {\n    if (!canvas) return\n    if (!historyFlagRef.current) return\n    canvas?.clear();\n    canvas?.loadFromJSON(value, () => {\n      historyFlagRef.current = false\n      canvas.renderAll();\n    });\n  }, [value, canvas])\n  /**\n   * 每次操作保存历史记录\n   * @param event\n   */\n  const save = useCallback((event: any) => {\n    // 过滤选择元素事件\n    const isSelect = event.action === undefined && event.e;\n    if (isSelect || !canvas) return\n    if (historyFlagRef.current) return\n    if (event.target && event.target.id === \"currentClipRect\") {\n      // 裁剪图片新增的rect不需要记录\n      return\n    }\n    if (isClipImage && event.target.id === clipImageId || event.target.id === 'clipRawImage'){\n      return\n    }\n    setValue(editor?.getJson())\n  }, [canvas, editor, setValue, isClipImage, clipImageId])\n  /**\n   * 后退\n   */\n  const undo = useCallback(() => {\n    historyFlagRef.current = true\n    go(-1);\n  }, [go])\n  /**\n   * 重做\n   */\n  const redo = useCallback(() => {\n    historyFlagRef.current = true\n    go(1);\n  }, [go]);\n  return {\n    undo,\n    redo,\n    backLength,\n    forwardLength,\n  }\n}\n\nexport default useHistory\n","// @ts-nocheck\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport { Context } from '../../Draw'\nimport { events, Types } from '../../../utils/events'\nimport { KeyNames } from '../../../utils/hotEventKeys'\nimport { hotkeys } from '../../../core/initHotKeys'\nimport styles from './styles.module.scss'\nimport { floatRound } from '../../../utils/calculate'\nimport useClipImage from '../../Draw/hooks/useClipImage'\nimport useHistory from '../../Draw/hooks/useHistory';\n\nconst HeaderControl = () => {\n  const {\n    workSpace, drawMode, setDrawMode, canvas, editor, isClipImage,\n    setIsClipImage, setClipImageId, setClipRawIndex, clipImageId, clipRawIndex\n  } = useContext(Context)\n  const {saveClipImage, cancelClipImage} = useClipImage()\n  const {undo, redo, backLength, forwardLength} = useHistory()\n  const [scale, setScale] = useState(0)\n  const drawModeRef = useRef('default')\n  drawModeRef.current = drawMode\n\n  useEffect(() => {\n    hotkeys(KeyNames.enter, saveClipImage)\n    hotkeys(KeyNames.esc, cancelClipImage)\n    return () => {\n      hotkeys.unbind(KeyNames.enter, saveClipImage)\n      hotkeys.unbind(KeyNames.esc, cancelClipImage)\n    }\n  }, [canvas, workSpace, clipImageId, clipRawIndex])\n  useEffect(() => {\n    hotkeys(KeyNames.ctrlz, undo)\n    hotkeys(KeyNames.ctrlshiftz, redo)\n    events.on(Types.CLIP_IMAGE, onClipImage)\n    return () => {\n      hotkeys.unbind(KeyNames.ctrlz, undo)\n      hotkeys.unbind(KeyNames.ctrlshiftz, redo)\n      events.off(Types.CLIP_IMAGE, onClipImage)\n    }\n  }, [])\n  useEffect(() => {\n    if (workSpace?.scale) {\n      setScale(floatRound(workSpace.scale * 100))\n    }\n  }, [workSpace?.scale])\n  useEffect(() => {\n    events.on(Types.CHANGE_SCALE, scale => {\n      setScale(floatRound(scale * 100))\n    })\n    window.addEventListener('keydown', onKeyDown)\n    window.addEventListener('keyup', onKeyUp)\n    return () => {\n      window.removeEventListener('keydown', onKeyDown)\n      window.removeEventListener('keyup', onKeyUp)\n    }\n  }, [workSpace, drawMode])\n\n  /**\n   * 裁剪的回调，存储一些裁剪信息\n   * @param visible\n   * @param rawIndex\n   * @param clipImageId\n   */\n  const onClipImage = ({visible, rawIndex, clipImageId}) => {\n    setIsClipImage(visible)\n    setClipRawIndex(rawIndex)\n    setClipImageId(clipImageId)\n  }\n  /**\n   * 按下空格开启拖拽模式\n   * @param e\n   */\n  const onKeyDown = (e: any) => {\n    if (e.code !== 'Space') return\n    if (drawModeRef.current === 'move') return\n    switchDragMode()\n  }\n  /**\n   * 抬起空格取消拖拽模式\n   * @param e\n   */\n  const onKeyUp = (e: any) => {\n    if (e.code !== 'Space') return\n    switchDefaultMode()\n  }\n  /**\n   * 开启拖拽模式\n   */\n  const switchDragMode = () => {\n    editor?.disableGuidelines?.()\n    workSpace?.startDring()\n    setDrawMode('move')\n  }\n  /**\n   * 恢复默认模式\n   */\n  const switchDefaultMode = () => {\n    editor?.enableGuidelines?.()\n    workSpace?.endDring()\n    setDrawMode('default')\n  }\n  // 是否正在剪裁图片，如果正在裁剪图片应该展示裁剪图片的按钮\n  if (isClipImage) {\n    return <div className={styles.headerControl}>\n      <span className={styles.clipSaveButton} onClick={saveClipImage}>\n        <img src=\"https://ossprod.jrdaimao.com/file/1691980964433863.svg\" alt=\"\"/>\n        <img src=\"https://ossprod.jrdaimao.com/file/1691981310968623.svg\" alt=\"\"/>\n        <span>保存</span>\n      </span>\n      <span className={styles.clipSaveButton} onClick={cancelClipImage}>\n        <img src=\"https://ossprod.jrdaimao.com/file/1691980998460679.svg\" alt=\"\"/>\n        <img src=\"https://ossprod.jrdaimao.com/file/1691981320881591.svg\" alt=\"\"/>\n        <span>取消</span>\n      </span>\n    </div>\n  }\n\n  return (\n    <div className={styles.headerControl}>\n      <div>\n        {/* 撤销 */}\n        <div\n          data-tooltip-content=\"撤销 Ctrl Z\"\n          data-tooltip-place=\"bottom\"\n          onClick={undo}\n          className={`${styles.button} ${backLength ? '' : styles.disabled}`}\n        >\n          <img\n            src={backLength ?\n              \"https://ossprod.jrdaimao.com/file/1690509281581673.svg\" :\n              \"https://ossprod.jrdaimao.com/file/1690789676330313.svg\"}\n            alt=\"\"\n          />\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509933132558.svg\" alt=\"\"/>\n        </div>\n        {/* 重做 */}\n        <div\n          onClick={redo}\n          className={`${styles.button} ${forwardLength ? '' : styles.disabled}`}\n          id='control-tooltip'\n          data-tooltip-content=\"重做 Ctrl Shift Z\"\n          data-tooltip-place=\"bottom\"\n        >\n          <img\n            src={forwardLength ?\n              \"https://ossprod.jrdaimao.com/file/1690509311318726.svg\" :\n              \"https://ossprod.jrdaimao.com/file/1690789758114451.svg\"}\n            alt=\"\"\n          />\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509942889198.svg\" alt=\"\"/>\n        </div>\n      </div>\n      <div className={styles.line}/>\n      <div>\n        {/* 拖拽 */}\n        <div\n          className={`${styles.button} ${drawMode === 'move' ? styles.active : ''}`}\n          onClick={switchDragMode}\n          id='control-tooltip'\n          data-tooltip-content=\"移动视图 Space\"\n          data-tooltip-place=\"bottom\"\n        >\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509577879796.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509952709638.svg\" alt=\"\"/>\n        </div>\n        {/* 默认鼠标 */}\n        <div\n          className={`${styles.button} ${drawMode === 'default' ? styles.active : ''}`}\n          onClick={switchDefaultMode}\n          id='control-tooltip'\n          data-tooltip-content=\"选择\"\n          data-tooltip-place=\"bottom\"\n        >\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509620102920.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509961015895.svg\" alt=\"\"/>\n        </div>\n      </div>\n      <div className={styles.line}/>\n      <div>\n        {/* 放大 */}\n        <div\n          className={styles.button}\n          onClick={() => workSpace?.big()}\n          id='control-tooltip'\n          data-tooltip-content=\"放大视图 Ctrl +\"\n          data-tooltip-place=\"bottom\"\n        >\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509650392929.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/169050996966396.svg\" alt=\"\"/>\n        </div>\n        {/* 缩小 */}\n        <div\n          className={styles.button}\n          onClick={() => workSpace?.small()}\n          id='control-tooltip'\n          data-tooltip-content=\"缩小视图 Ctrl -\"\n          data-tooltip-place=\"bottom\"\n        >\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509673723181.svg\" alt=\"\"/>\n          <img src=\"https://ossprod.jrdaimao.com/file/1690509977928322.svg\" alt=\"\"/>\n        </div>\n        {/* 比例 */}\n        <div style={{visibility: scale ? 'visible' : 'hidden'}} className={styles.ratioText}>{scale}%</div>\n      </div>\n    </div>\n  );\n}\n\n\nexport default HeaderControl\n","// @ts-nocheck\nimport React from 'react'\nimport styles from './index.module.scss'\nimport useSave from '../../Draw/hooks/useSave'\n\nconst SaveButton = () => {\n  const { saveToImage } = useSave()\n  return (\n    <div className={styles.headerRightControl}>\n      {/*<span className={styles.previewButton} onClick={onPreview}>*/}\n      {/*  <img src=\"https://ossprod.jrdaimao.com/file/1690422594923183.svg\" alt=\"\"/>*/}\n      {/*  <img src=\"https://ossprod.jrdaimao.com/file/1690423932285584.svg\" alt=\"\"/>*/}\n      {/*  <span>预览</span>*/}\n      {/*</span>*/}\n      <span className={styles.saveWrap}>\n        <span onClick={saveToImage} className={styles.saveButton}>\n          下&nbsp;载\n        </span>\n        {/*<span className={`${styles.fixButton} ${show ? styles.showButton : ''}`}>*/}\n        {/*<span onClick={onSaveToJson}>保存</span>*/}\n        {/*<span onClick={onSaveToImage}>保存为图片</span>*/}\n        {/*</span>*/}\n      </span>\n    </div>\n  )\n}\n\nexport default SaveButton\n","// @ts-nocheck\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { saveAs } from 'file-saver';\nimport { delstock } from '../../../../../api/image';\nimport { Context } from '../../../Context';\n\n\nexport const useDropDown = () => {\n  const clickRef = useRef()\n  const cacheItem = useRef()\n  const [show, setShow] = useState(false)\n  const {setLoading} = useContext(Context)\n  const shareEl = useRef()\n\n\n  useEffect(() => {\n    const el = document.querySelector('#img-file-list')\n    if (!el) return\n    if (show) {\n      el.style.overflow = 'hidden'\n    } else {\n      el.style.overflow = 'auto'\n    }\n  }, [show])\n  useEffect(() => {\n    window.addEventListener('click', removeEl)\n    return () => {\n      removeEl()\n      window.removeEventListener('click', removeEl)\n    }\n  }, [])\n\n  const removeEl = useCallback((e) => {\n    if (e?.target === clickRef.current) return\n    if (shareEl.current) {\n      document.body.removeChild(shareEl.current)\n      shareEl.current = null\n      setShow(false)\n    }\n  }, [])\n  const onClick = async (e) => {\n    // e.stopPropagation()\n    if (!e.target || !cacheItem.current) return\n    const {imgSrc, stockName, _id, callback} = cacheItem.current\n    if (e.target.innerHTML === '下载') {\n      saveAs(imgSrc, `${stockName}${imgSrc.slice(imgSrc.lastIndexOf('.'))}`)\n    }\n    if (e.target.innerHTML === '删除') {\n      try {\n        setLoading(true)\n        await delstock({id: _id})\n        await callback?.()\n        setLoading(false)\n      } catch (err) {\n        setLoading(false)\n      }\n    }\n  }\n  const run = (e: any, item: any) => {\n    setShow(true)\n    cacheItem.current = item\n    if (shareEl.current) {\n      document.body.removeChild(shareEl.current)\n      shareEl.current = null\n    }\n    clickRef.current = e.target;\n    const parentNode = e.target.parentNode\n    const {top, left} = parentNode.getBoundingClientRect()\n    const div = shareEl.current = document.createElement('div')\n    div.addEventListener('click', onClick)\n    div.innerHTML = `<div class='customMenu' style='left:${left + parentNode.offsetWidth + 10}px;top:${top}px'>\n<!--    <div class='editName'>-->\n<!--      <span>某某文件名...名称.png</span>-->\n<!--      <img src=\"https://ossprod.jrdaimao.com/file/1690528866207938.svg\" alt=\"\"/>-->\n<!--    </div>-->\n    <div class='buttons'>\n      <div>下载</div>\n      <div>删除</div>\n    </div>\n  </div>`\n    document.body.appendChild(div)\n  }\n  return {\n    run\n  }\n}\n","// @ts-nocheck\nimport { useCallback, useContext } from 'react';\nimport { Context } from '../CanvasContext';\nimport { Context as EditorContext } from '../../Editor/Context'\nimport { fabric } from 'fabric';\nimport { uuid } from '../../../utils/utils';\nimport useClipImage from './useClipImage';\n\n// 默认参数\nconst DefaultOptions = {\n  text: {\n    fill: '#000000'\n  },\n  image: {},\n}\n\nconst useAddObject = () => {\n  const {workSpace, canvas, isClipImage, clipImageId, clipRawIndex} = useContext(Context)\n  const {cancelClipImage} = useClipImage()\n  const {setLoading} = useContext(EditorContext)\n  /**\n   * 新增图片\n   * @param item\n   */\n  const addImage = useCallback((src, options, callback) => {\n    if (!workSpace) return\n    setLoading(true)\n    if (isClipImage) cancelClipImage()\n    const scale = workSpace.getScale()\n    fabric.Image.fromURL(`${src}?t=${Date.now()}`, img => {\n      if (!img.width || !img.height) {\n        setLoading(false)\n        return\n      }\n      img.set({\n        ...DefaultOptions.image,\n        id: uuid(),\n        scaleY: scale,\n        scaleX: scale,\n        left: (workSpace.width - img.width * scale) / 2,\n        top: (workSpace.height - img.height * scale) / 2,\n        ...options,\n      })\n      canvas?.add(img)\n      canvas?.setActiveObject(img);\n      callback?.(img)\n      canvas?.renderAll();\n      setLoading(false)\n    }, {crossOrigin: 'anonymous'})\n  }, [workSpace, canvas, clipImageId, clipRawIndex])\n\n  /**\n   * 新增文字\n   */\n  const addText = useCallback((item) => {\n    if (!workSpace) return\n    if (isClipImage) cancelClipImage()\n    const text = new fabric.IText(item.title, {\n      fontFamily: 'serif',\n      fontSize: item.style.fontSize as number * 3,\n      fontWeight: item.style.fontWeight as number,\n      id: uuid(),\n      lockScalingX: false,\n      lockScalingY: false,\n      ...DefaultOptions.text,\n    })\n    text.set({\n      left: (workSpace.width - text.width) / 2,\n      top: (workSpace.height - text.height) / 2,\n    })\n    canvas?.add(text)\n    canvas?.setActiveObject(text)\n    canvas?.renderAll();\n  }, [workSpace, canvas, clipImageId, clipRawIndex])\n  return {\n    addImage,\n    addText,\n  }\n}\nexport default useAddObject\n","// @ts-nocheck\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport styles from './index.module.scss'\nimport { useDropDown } from './dropDown';\nimport useAddObject from '../../../../Draw/hooks/useAddObject';\nimport { addImageApi, getImageList, postUploadImage } from '../../../../../api/image';\nimport { Context } from '../../../../Draw';\nimport { Context as EditorContext } from '../../../Context'\nimport useToast from '../../../../Draw/hooks/useToast';\n\nconst ImageResource = () => {\n  const {setLoading} = useContext(EditorContext)\n  const toast = useToast()\n  const {canvas} = useContext(Context)\n  const EDIT_IMAGE_LIST = sessionStorage.getItem('EDIT_IMAGE_LIST')\n  const [uploading, setUploading] = useState(false)\n  const {addImage} = useAddObject()\n\n  const [list, setList] = useState(EDIT_IMAGE_LIST ?\n    JSON.parse(EDIT_IMAGE_LIST) :\n    [])\n  const {run} = useDropDown()\n\n\n  useEffect(() => {\n    queryList()\n  }, [])\n\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on('drop', onDrop)\n    canvas.on('dragover', onDragover)\n    return () => {\n      canvas.off('drop', onDrop)\n      canvas.off('dragover', onDragover)\n    }\n  }, [canvas])\n\n  // 添加画布的拖拽事件监听器\n  const onDrop = ({e}) => {\n    e.preventDefault()\n    const imageUrl = e.dataTransfer.getData('text/plain');\n    // 画布元素距离浏览器左侧和顶部的距离\n    let offset = {\n      left: canvas.getSelectionElement().getBoundingClientRect().left,\n      top: canvas.getSelectionElement().getBoundingClientRect().top\n    }\n    // 鼠标坐标转换成画布的坐标（未经过缩放和平移的坐标）\n    let point = {\n      x: e.x - offset.left,\n      y: e.y - offset.top,\n    }\n    // 转换后的坐标，restorePointerVpt 不受视窗变换的影响\n    let pointerVpt = canvas.restorePointerVpt(point)\n    addImage(imageUrl, {}, img => {\n      img.set({\n        left: pointerVpt.x - img.getScaledWidth() / 2,\n        top: pointerVpt.y - img.getScaledHeight() / 2,\n      })\n    })\n  }\n  // 阻止画布的默认拖拽行为\n  const onDragover = ({e}) => {\n    e.preventDefault()\n  }\n  const onClickMore = (e: any, item: any) => {\n    run(e, {...item, callback: queryList})\n  }\n  /**\n   * 获取图片数据\n   */\n  const queryList = async () => {\n    try {\n      const res = await getImageList({ pageIndex: 1, pageSize: 500})\n      if (res) {\n        sessionStorage.setItem('EDIT_IMAGE_LIST', JSON.stringify(res))\n      }\n      setList(res)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  /**\n   * 上传文件\n   * @param e\n   */\n  const onUploadFile = async (e: any) => {\n    if (uploading) return\n    const fileList = e.target.files\n    try {\n      setUploading(true)\n      setLoading(true)\n      for (let i = 0; i < fileList.length; i++) {\n        const file = fileList[i]\n        if (!/(png|jpg|jpeg)/g.test(file.type)) continue\n        const res = await postUploadImage(file)\n        await addImageApi({\n          imgSrc: res.url,\n          stockName: file.name\n        })\n      }\n      await queryList()\n    } catch (err) {\n      console.log(err)\n      toast.error(err.message)\n    } finally {\n      setUploading(false)\n      setLoading(false)\n      // e.target.value = ''\n    }\n  }\n\n  const onDragStart = e => {\n    e.dataTransfer.setData('text/plain', e.target.src);\n  }\n  return (\n    <div className={styles.imageResource}>\n      {/*<div className={styles.searchBox}>*/}\n      {/*  <input type='text' placeholder='请输入' onChange={e => searchRef.current = e.target.value}/>*/}\n      {/*  <img src=\"https://ossprod.jrdaimao.com/file/1690356901972689.svg\" alt=\"\"/>*/}\n      {/*</div>*/}\n      <div className={styles.uploadFile}>\n        <span>{uploading ? '上传中...' : '上传文件'}</span>\n        <input multiple disabled={uploading} type=\"file\" accept='.png,.jpg,.jpeg' onChange={onUploadFile}/>\n      </div>\n      {\n        !list?.length ? <div className={styles.empty}>\n          <img src=\"https://ossprod.jrdaimao.com/file/169035729200810.png\" alt=\"\"/>\n          <p>还没有文件哦~</p>\n        </div> : null\n      }\n      {\n        list?.length ? <div className={styles.fileList} id='img-file-list'>\n          {\n            list.map((item) => {\n              return <div\n                key={item._id}\n                className={styles.fileListItem}\n              >\n                <img\n                  onDragStart={onDragStart}\n                  onClick={() => addImage(item.imgSrc)}\n                  className={styles.image}\n                  src={item.imgSrc}\n                  alt=\"\"\n                />\n                <img\n                  onClick={(e) => onClickMore(e, item)}\n                  className={styles.more}\n                  src=\"https://ossprod.jrdaimao.com/file/1690363754666532.svg\"\n                  alt=\"\"\n                />\n              </div>\n            })\n          }\n        </div> : null\n      }\n    </div>\n  )\n}\n\nexport default ImageResource\n","import { CSSProperties } from 'react';\n\nexport type TextListItem = {\n  title: string\n  key: string\n  style: CSSProperties\n}\n\nexport const textList:Array<TextListItem> = [\n  {\n    title: '添加标题',\n    key: 'addTitle',\n    style: {\n      fontSize: 20,\n      fontWeight: 600\n    }\n  },\n  {\n    title: '添加副标题',\n    key: 'addSubTitle',\n    style: {\n      fontSize: 16,\n      fontWeight: 600\n    }\n  },\n  {\n    title: '添加正文',\n    key: 'addText',\n    style: {\n      fontSize: 14\n    }\n  },\n  {\n    title: '添加注释',\n    key: 'addAnnotation',\n    style: {\n      fontSize: 12\n    }\n  }\n]\n","// @ts-nocheck\nimport React from 'react'\nimport { textList } from './config'\nimport styles from './index.module.scss'\nimport useAddObject from '../../../../Draw/hooks/useAddObject';\n\n\nconst TextResource = () => {\n  const {addText} = useAddObject()\n  return (\n    <div className={styles.textResource}>\n      <div className={styles.addShareTextButton}>\n        <span onClick={() => addText({...textList[3], title: '文本框'})}>添加文本框</span>\n      </div>\n      <div className={styles.textList}>\n        {\n          textList.map(item => {\n            return <div\n              onClick={() => addText(item)}\n              key={item.key}\n              style={item.style}\n              className={styles.textListItem}\n            >\n              <span>{item.title}</span>\n            </div>\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default TextResource\n","import ImageResource from '../Components/Resource/ImageResource'\nimport TextResource from '../Components/Resource/TextResource';\n\nexport type ResourceNavItem = {\n  title: string\n  icon: string\n  activeIcon: string\n  key: string\n}\n\nexport const ResourceTypeEnum = {\n  ALREADY_UPLOAD: 'alreadyUpload',\n  TEXT: 'i-text'\n}\n\nexport const resourceNavList = [\n  {\n    title: '已上传',\n    icon: 'https://ossprod.jrdaimao.com/file/1690351687096238.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690351735822596.svg',\n    key: ResourceTypeEnum.ALREADY_UPLOAD\n  },\n  {\n    title: '文 字',\n    icon: 'https://ossprod.jrdaimao.com/file/1690351715036668.svg',\n    activeIcon: 'https://ossprod.jrdaimao.com/file/1690351759741179.svg',\n    key: ResourceTypeEnum.TEXT\n  }\n]\n\nexport const ResourceContentComEnum = {\n  [ResourceTypeEnum.ALREADY_UPLOAD]: ImageResource,\n  [ResourceTypeEnum.TEXT]: TextResource\n}\nexport const DefaultSelectKey = ResourceTypeEnum.ALREADY_UPLOAD\n","// @ts-nocheck\nimport React, { useState } from 'react'\nimport { ResourceContentComEnum, DefaultSelectKey, ResourceNavItem, resourceNavList } from './config'\nimport styles from './index.module.scss'\n\n\nconst ResourceArea = () => {\n  const [collapsed, setCollapsed] = useState(false);\n  const [activeKey, setActiveKey] = useState(DefaultSelectKey)\n  const onResourceNavChange = (item: ResourceNavItem) => {\n    setActiveKey(item.key)\n  }\n  const activeIndex = resourceNavList.findIndex(item => item.key === activeKey)\n  const ResourceComponent = ResourceContentComEnum[activeKey]\n  const onSetCollapsed = () => {\n    if (!collapsed) {\n      document.body.style.setProperty('--dm-change-resource-content-width', '0')\n      setCollapsed(true)\n    } else {\n      document.body.style.setProperty('--dm-change-resource-content-width', '240px')\n      setCollapsed(false)\n    }\n  }\n  return (\n    <div className={styles.resourceArea}>\n      <div className={styles.resourceNav}>\n        {\n          resourceNavList.map((item, index) => {\n            const active = activeIndex === index\n            let className = `${styles.resourceNavItem} ${active ? styles.resourceNavItemActive : ''}`\n            // 获取一下高亮的前一个元素加下border-radius\n            if (index === activeIndex - 1) {\n              className += styles.resourceNavItemPrevActive\n            }\n            return <div\n              onClick={() => onResourceNavChange(item)}\n              className={className}\n              key={item.key}\n            >\n              <img src={active ? item.activeIcon : item.icon} alt=\"\"/>\n              <span>{item.title}</span>\n            </div>\n          })\n        }\n        <div className={styles.resourceNavPlace}/>\n      </div>\n      <div className={styles.resourceContent}>\n        <ResourceComponent/>\n        <div className={styles.packUp} onClick={onSetCollapsed}>\n          <img\n            src={collapsed ?\n              'https://ossprod.jrdaimao.com/file/1690513793832702.svg' :\n              'https://ossprod.jrdaimao.com/file/1690445829374723.svg'\n            }\n            alt=\"\"\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ResourceArea\n","// @ts-nocheck\nimport React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { sortableContainer, sortableElement, arrayMove } from 'react-sortable-hoc'\nimport { fabric } from 'fabric'\nimport style from './index.module.scss'\nimport { Context } from '../../Draw'\nimport userOrder from '../../Draw/hooks/userOrder';\nimport useLock from '../../Draw/hooks/useLock';\n\nconst SortableItem = sortableElement((props: { item }) => {\n  const {changeOwnLock} = useLock()\n  const {item} = props\n  const {selectIds, canvas} = useContext(Context)\n  const isLock = item.object.hasControls\n  const isVisible = item.object.visible\n  /**\n   * 设置高亮\n   */\n  const clickItem = useCallback(() => {\n    if (!canvas) return\n    canvas.setActiveObject(item.object)\n    canvas.renderAll()\n  }, [item, canvas])\n\n  /**\n   * 锁定对象\n   */\n  const onLockObject = (e) => {\n    e.stopPropagation()\n    changeOwnLock(!isLock, item.object)\n  }\n  /**\n   * 隐藏对象\n   */\n  const onHiddenObject = (e) => {\n    e.stopPropagation()\n    item.object.set({visible: !isVisible})\n    canvas?.renderAll()\n  }\n  const fontFamily = item.object.get('fontFamily')\n  return <div\n    onClick={clickItem}\n    className={`${style.orderListItem} ${selectIds.includes(item.id) ? style.active : ''}`}\n  >\n    <div className={style.button}>\n      {/* 隐藏 */}\n      <img\n        draggable={false}\n        onClick={onHiddenObject}\n        src={isVisible ?\n          'https://ossprod.jrdaimao.com/file/1690437893570728.svg' :\n          'https://ossprod.jrdaimao.com/file/1690945206225980.svg'}\n        alt=\"\"\n      />\n      {/* 锁定 */}\n      <img\n        draggable={false}\n        onClick={onLockObject}\n        src={isLock ?\n          'https://ossprod.jrdaimao.com/file/1690437902259961.svg' :\n          'https://ossprod.jrdaimao.com/file/1690944574168632.svg'}\n        alt=\"\"\n      />\n    </div>\n    <div className={style.content}>\n      {/*目前只有俩类型，先这样写吧，后面多了跨域拆成枚举组件*/}\n      {\n        item.type === 'image' ?\n          <div className={style.image}>\n            <img draggable={false} src={item.src} alt=\"\"/>\n          </div> :\n          <div\n            className={style.text}\n            style={{fontFamily: fontFamily || 'serif'}}\n          >\n            {item.text}\n          </div>\n      }\n    </div>\n    <DragHandle/>\n  </div>\n});\n\nconst DragHandle = () => {\n  return <div className={style.move}>\n    <img draggable={false}\n         src=\"https://ossprod.jrdaimao.com/file/1690437934587361.svg\" alt=\"\"/>\n  </div>\n}\n\nconst SortableContainer = sortableContainer(({children}: { children }) => {\n  return children\n})\n\nconst OrderList = () => {\n  const {canvas} = useContext(Context)\n  const {up, upTop, down, downTop} = userOrder()\n  const [list, setList] = useState([])\n  /**\n   * 修改层级顺序\n   * @param oldIndex\n   * @param newIndex\n   */\n  const onSortEnd = useCallback(({oldIndex, newIndex}) => {\n    // 位置不变不处理\n    if (oldIndex === newIndex) return\n    const oldObject = list[oldIndex]?.object;\n    if (!oldObject) return\n    if (newIndex < oldIndex) {\n      if (newIndex === 0) return upTop(oldObject)\n      // 上移\n      for (let i = newIndex; i < oldIndex; i++) {\n        up(oldObject)\n      }\n    } else {\n      if (newIndex === list.length - 1) return downTop(oldObject)\n      // 下移\n      for (let i = oldIndex; i < newIndex; i++) {\n        down(oldObject)\n      }\n    }\n    setList(prevState => arrayMove(prevState, oldIndex, newIndex))\n  }, [list, setList, up, upTop, down, downTop]);\n\n  useEffect(() => {\n    if (!canvas) return\n    canvas.on('after:render', getList);\n    return () => {\n      canvas.off('after:render', getList);\n    }\n  }, [canvas])\n\n  /**\n   * 获取列表数据\n   */\n  const getList = useCallback(() => {\n    const objects = canvas?.getObjects() || []\n    const list = [\n      ...objects.filter((item) => {\n        // 过滤掉辅助线和背景和裁剪rect\n        return !(item instanceof fabric.GuideLine || item.id === 'workspace' || item.id === 'currentClipRect');\n      })\n    ]\n      .reverse()\n      .map((item) => {\n        const {type, id, text} = item;\n        const src = type === 'image' ? item._element?.src : undefined\n        return {\n          object: item,\n          type,\n          id,\n          text,\n          src\n        };\n      });\n    setList(list)\n  }, [setList, canvas]);\n\n  return (\n    <div className={style.orderWrap}>\n      <div className={style.orderListTitle}>图层</div>\n      {\n        !list.length ? <div className={style.orderListEmpty}>\n          <div className={style.empty}>\n            <img src=\"https://ossprod.jrdaimao.com/file/169035729200810.png\" alt=\"\"/>\n            <p>暂无图层~</p>\n          </div>\n        </div> : null\n      }\n      {\n        list.length ? <SortableContainer distance={10} lockAxis=\"y\" onSortEnd={onSortEnd}>\n          <div className={style.orderList}>\n            {\n              list.map((item, index) => {\n                return <SortableItem index={index} key={item.id} item={item}/>\n              })\n            }\n          </div>\n        </SortableContainer> : null\n      }\n    </div>\n  )\n}\n\nexport default OrderList\n","// @ts-nocheck\nimport React, { useContext, useEffect, useState } from 'react';\nimport Size from '../Components/Size'\nimport style from './index.module.scss'\nimport { SketchPicker } from 'react-color'\nimport { Context } from '../../../../Draw';\nimport { DefaultWorkSpaceColor } from '../../../../../core/EditorWorkspace';\n\nconst ColorPicker: any = SketchPicker\n\nconst WorkSpaceAttr = () => {\n  const {workSpace} = useContext(Context)\n  const [color, setColor] = useState(workSpace?.fill || DefaultWorkSpaceColor)\n  const onChangeColor = (e) => {\n    setColor(e.hex)\n    console.log('change bg color e.hex', e.hex)\n    workSpace?.setBgColor(e.hex)\n  }\n  return (\n    <div className={style.workSpaceAttr}>\n      <div className={style.base}>\n        <div>\n          {/* 设置元素的大小、锁定比例 */}\n          <Size isWorkSpace getActiveObject={() => workSpace?.workspace}/>\n        </div>\n        <div>\n          <div className={style.title}>背景色</div>\n          <ColorPicker\n            color={color}\n            onChange={onChangeColor}\n            className={style.colorPicker}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkSpaceAttr;\n","import React, { useContext, useMemo } from 'react'\nimport style from './index.module.scss'\nimport { attrAreaComponent, attrTabList, AttrTabListItem } from './config'\nimport { Context as EditorContext } from '../Context'\nimport OrderList from '../OrderList';\nimport WorkSpaceAttr from '../Components/Attr/WorkSpaceAttr'\nimport { Context } from '../../Draw';\n\nconst AttrArea = () => {\n  const {selectOneType} = useContext(Context)\n  const {attrTab, setAttrTab} = useContext(EditorContext)\n  const bg = useMemo(() => {\n    return attrTabList.find(item => item.key === attrTab)?.bg\n  }, [attrTabList, attrTab])\n\n  const onChangeTab = (item: AttrTabListItem) => {\n    setAttrTab(item.key)\n  }\n  const AttrCom = attrAreaComponent[selectOneType];\n  return (\n    <div className={style.attrWrap}>\n      <div className={style.attrTab} style={{backgroundImage: `url(${bg})`}}>\n        {\n          attrTabList.map(item => {\n            return <div\n              onClick={() => onChangeTab(item)}\n              key={item.key}\n              className={attrTab === item.key ? style.attrTabActive : ''}\n            >\n              <span>{item.title}</span>\n            </div>\n          })\n        }\n      </div>\n      <div id='attr-content' className={style.attrContent}>\n        <div style={{display: attrTab === 'Attr' ? 'block' : 'none'}}>\n          {\n            AttrCom ? <AttrCom/> : <WorkSpaceAttr/>\n          }\n        </div>\n        <div style={{display: attrTab === 'coverage' ? 'block' : 'none'}}>\n          <OrderList/>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AttrArea\n","// @ts-nocheck\nimport React, { useContext, useEffect } from 'react'\nimport ImportFile from './ImportFile'\nimport HeaderControl from './HeaderControl'\nimport SaveButton from './SaveButton'\nimport ResourceArea from './ResourceArea'\nimport Draw, { Context } from '../Draw'\nimport { Context as EditorContext } from './Context'\nimport AttrArea from './AttrArea'\nimport LoadingOverlay from 'react-loading-overlay'\nimport styles from './styles.module.css'\nimport { EditImageProps } from '../../index';\n\nconst Editor: React.FC<EditImageProps> = (props) => {\n  const {loading, loadingText} = useContext(EditorContext)\n  const {show} = useContext(Context)\n\n  return <LoadingOverlay\n    active={loading}\n    spinner\n    text={loadingText}\n  >\n    <div className={styles.dmEditImageContainer}>\n      <div className={styles.header}>\n        {/* 导入文件 */}\n        <ImportFile onBack={props.onBack}/>\n        {/* 快捷操作 */}\n        { show ?  <HeaderControl/> : null}\n        {/* 保存 */}\n        <SaveButton />\n      </div>\n      <div className={styles.content}>\n        {/* 左侧资源区域 */}\n        <ResourceArea/>\n        <div className={styles.canvasArea}>\n          {/* 画布区域 */}\n          <Draw src={props.src}/>\n        </div>\n        {\n          <div className={styles.attrArea}>\n            {/* 属性区域 */}\n            <AttrArea/>\n          </div>\n        }\n      </div>\n    </div>\n  </LoadingOverlay>\n}\n\nexport default Editor\n","import React from 'react'\nimport { CanvasProvider } from './components/Draw'\nimport { EditorProvider } from './components/Editor/Context'\nimport Editor from './components/Editor'\nimport { Toaster } from 'react-hot-toast'\n\n\nexport interface EditImageProps {\n  src?: string\n  onBack?: () => void\n}\n\nexport const EditImage: React.FC<EditImageProps> = (props) => {\n  return (\n    <CanvasProvider>\n      <EditorProvider>\n        <Editor\n          onBack={props.onBack}\n          src={props.src}\n        />\n        <Toaster/>\n      </EditorProvider>\n    </CanvasProvider>\n  )\n}\n"],"names":["throttle","fn","timer","time","args","Array","_len","_key","arguments","clearTimeout","setTimeout","apply","_this","uuid","replace","c","r","Math","random","v","toString","retainNumber","value","result","Number","initAligningGuidelines","canvas","disabled","ctx","getSelectionContext","aligningLineOffset","aligningLineMargin","aligningLineWidth","aligningLineColor","viewportTransform","zoom","drawVerticalLine","coords","drawLine","x","y1","y2","drawHorizontalLine","x1","x2","y","save","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","restore","isInRange","value1","value2","round","i","len","verticalLines","horizontalLines","on","getZoom","e","undefined","target","activeObject","canvasObjects","getObjects","activeObjectCenter","getCenterPoint","activeObjectLeft","activeObjectTop","activeObjectBoundingRect","getBoundingRect","activeObjectHeight","height","activeObjectWidth","width","horizontalInTheRange","verticalInTheRange","transform","_currentTransform","length","fabric","GuideLine","objectCenter","objectLeft","objectTop","objectBoundingRect","objectHeight","objectWidth","push","setPositionByOrigin","Point","clearContext","contextTop","error","console","log","j","renderAll","disable","enable","rotateIcon","angle","initControlsRotate","Object","prototype","controls","mtr","Control","offsetY","offsetX","rotate","actionName","actionHandler","controlsUtils","rotationWithSnapping","render","mtr2","mtr3","mtr4","activeObj","getActiveObject","_activeObj$angle","toFixed","cursorStyle","event","body","lowerCanvasEl","nextSibling","_canvas$getActiveObje","_canvas$getActiveObje2","_event$transform","corner","style","cursor","CenterAlign","_proto","centerH","workspace","object","_centerObject","center","centerV","position","name","anignType","includes","defaultWorkspace","find","item","id","KeyNames","lrdu","shiftMove","ctrlz","ctrlshiftz","enter","esc","initHotkeys","hotkeys","_event","handler","key","left","set","top","Types","CHANGE_SCALE","CANVAS_CHANGE","CLIP_IMAGE","SHOW_LOADING","events","EventEmitter","isNumber","isUndef","verticalImg","edgeImg","rotateImg","horizontalImg","copyImg","deleteImg","clipImg","topBgImg","NUM_FRACTION_DIGITS","setBaseControlVisible","visible","setControlsVisibility","mt","mb","ml","mr","tl","tr","bl","br","setHighControlVisible","copy","clip","topBg","drawImg","img","wSize","hSize","translate","util","degreesToRadians","drawImage","intervalControl","verticalImgIcon","document","createElement","src","horizontalImgIcon","renderIcon","styleOverride","fabricObject","renderIconHoz","cursorStyleHandler","scaleSkewCursorStyleHandler","scalingXOrSkewingY","getActionName","scaleOrSkewActionName","scalingYOrSkewingX","peakControl","renderIconEdge","scaleCursorStyleHandler","scalingEqually","rotationControl","renderIconRotate","rotationStyleHandler","initMainControl","topBgEl","copyImageEl","deleteImageEl","clipImageEl","cloneObject","eventData","emit","clone","cloned","sourceSrc","rawScaleX","rawScaleY","rectDiffLeft","rectDiffTop","prevWidth","prevHeight","setCoords","add","setActiveObject","deleteObject","clipRect","remove","requestRenderAll","clipObject","image","type","rectLeft","rectTop","scaleX","scaleY","index","findIndex","sourceWidth","getScaledWidth","sourceHeight","getScaledHeight","o","setSrc","crossOrigin","bringToFront","selectionRect","Rect","fill","originX","originY","opacity","hasRotatingPoint","transparentCorners","cornerColor","cornerStrokeColor","borderColor","cornerSize","padding","cornerStyle","borderDashArray","borderScaleFactor","lockMovementX","lockMovementY","hoverCursor","_element","selectionRectDown","imageDown","_ref","_objectDestructuringEmpty","_ref2","movementX","movementY","rectWidth","rectHeight","rect","get","rawIndex","clipImageId","mouseUpHandler","textC","textdelete","initControls","borderOpacityWhenMoving","getGap","zooms","gaps","mergeLines","isHorizontal","axis","sort","a","b","mergedLines","currentLine","assign","_iterator","_createForOfIteratorHelperLoose","_step","done","line","max","darwLine","options","darwText","text","align","fontSize","fillStyle","textAlign","textBaseline","font","PI","fillText","darwRect","strokeWidth","drawMask","backgroundColor","gradient","createLinearGradient","transparentColor","Color","setAlpha","addColorStop","toRgba","setupGuideLine","createClass","Line","selectable","hasControls","hasBorders","globalCompositeOperation","initialize","points","newPoints","callSuper","activeOn","ruler","enabled","isPointOnRuler","moveCursor","fire","off","absolute","calculate","hoveredRuler","fromObject","callback","_callback","instance","xy","_fromObject","CanvasRuler","_options","calcObjectRect","bind","clearStatus","canvasMouseDown","canvasMouseMove","canvasMouseUp","status","selection","tempGuidelLine","absolutePointer","pointer","ruleSize","highlightColor","textColor","getContext","extend","destroy","clearGuideline","_this$options$canvas","showGuideline","forEach","guideLine","hideGuideline","eventHandler","vpt","draw","rulerLength","getSize","startCalibration","_this$startCalibratio","_this$startCalibratio2","opt","gap","unitLength","startValue","startOffset","canvasSize","ceil","textValue","textLength","textX","textY","toRgb","objectRect","skip","roundFactor","leftTextVal","rightTextVal","isSameText","maskOpt","_this2","_extends","pad","textOpt","lineSize","lineOpt","activeObjects","getActiveObjects","allRect","reduce","rects","obj","group","groupCenterX","objectOffsetFromCenterX","_this3","groupCenterY","objectOffsetFromCenterY","point","containsPoint","lastAttr","_setupCurrentTransform","getCommonEventInfo","pos","defaultCursor","_this$tempGuidelLine","initRuler","getWorkspace","isRectOut","targetRect","targetTop","targetHeight","targetLeft","targetWidth","setCursor","EditorGroupText","_init","isDown","textObject","_getGroupTextObj","_bedingEditingEvent","enterEditing","getPointer","clickObj","_searchPossibleTargets","_opt$target","_objects","isText","ids","_unGroup","resetGroup","groupArr","filter","Group","concat","discardActiveObject","toActiveSelection","Editor","_EventEmitter","_inheritsLoose","call","editorWorkspace","_initAligningGuidelin","disableGuidelines","enableGuidelines","_assertThisInitialized","centerAlign","InitCenterAlign","_copyActiveSelection","grid","clonedObj","evented","forEachObject","_copyObject","paramsActiveObeject","unGroup","activegroup","toGroup","objectsInGroup","newgroup","workspaceSendToBack","sendToBack","getJson","toJSON","dragAddItem","_this$canvas$getSelec","getSelectionElement","getBoundingClientRect","pointerVpt","restorePointerVpt","noop","Context","createContext","editor","workSpace","drawMode","selectMode","selectIds","selectOneType","selectActive","show","mainUrl","isClipImage","clipRawIndex","setClipRawIndex","setClipImageId","setIsClipImage","setMainUrl","setSelectOneType","setSelectActive","setSelectMode","setSelectIds","setDrawMode","setCanvas","setEditor","setWorkSpace","setShow","CanvasProvider","children","_useState","useState","_useState2","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","_useState13","context","React","Provider","Input","props","title","afterText","onChange","className","customInput","inputWrap","isValidElement","useAttr","_useContext","useContext","setAttr","attr","lockAttrs","isControlsInRatioVisible","_controlsVisibility","useLock","_useAttr","changeOwnLock","useCallback","isLock","changeInRatioLock","subtract","num1","num2","num1Digits","split","num2Digits","baseNum","pow","multiply","num1String","num2String","divide","n1","n2","floatRound","num","n","Size","showRation","isWorkSpace","_useLock","setWidth","setHeight","lockRatio","setLockRatio","useEffect","getAttr","onWidthChange","setSize","onHeightChange","changeLock","prevState","size","ratio","content","onClick","alt","Position","setRotate","setX","setY","onRotateChange","onPositionXChange","onPositionYChange","Transparent","setOpacity","setVisible","onOpacityChange","onFlipChange","onVisibleChange","transparent","customInputStyle","reverse","reverseWrap","usePageAlign","setPosition","alignCenter","middleCenter","right","bottom","alignTypeList","icon","activeIcon","PageAlign","alignFunc","_alignFunc$item$key","pageAlign","shareShapeList","map","shareShapeListItem","coverOrderList","userOrder","changeOrder","funcKey","actives","_activeObject$funcKey","_activeObject","up","upTop","down","downTop","CoverOrder","orderFunc","changeCoverOrder","_orderFunc$item$key","coverOrder","coverOrderTitle","pageAlignStyle","ImageSpaceAttr","workSpaceAttr","base","division","DropdownIndicator","ReactSelectStyles","singleValue","provided","color","fontWeight","menuList","background","option","lineHeight","boxSizing","container","control","paddingRight","flex","borderRadius","display","InputNumber","number","setNumber","last","useRef","current","inputRef","_inputRef$current","addEventListener","keyDownChange","_inputRef$current2","removeEventListener","sub","onNumberChange","styles","inputNumber","ref","textAlignList","activeSrc","textStyleList","label","getFontManage","Promise","resolve","GeneralTextList","Font","Map","globalFontList","filterToText","list","isArray","fontFamily","useChangeFontFamily","setLoading","fontList","setFontList","fontLoaded","setFontLoaded","useFontListLast","_temp","then","res","fontlibName","url","fontlibfile","_temp2","reject","runChange","has","styleContent","innerHTML","appendChild","FontFaceObserver","load","removeChild","loadFont","objectsData","textList","el","fontFamiliesAll","err","all","ColorPicker","SketchPicker","TextAttr","_useChangeFontFamily","setFontSize","setColor","setFontWeight","underline","setUnderline","incline","setIncline","setAlign","fontStyle","setFontStyle","setFontFamily","isWeight","querySelector","overflow","onFontSizeChange","onChangeComplete","hex","onWeightChange","onUnderlineChange","onAlignChange","onInclineChange","onFontStyleChange","onChangeFontFamily","textArea","textAreaContent","Select","placeholder","components","select","isSearchable","isDisabled","disabledSelect","colorContent","alignGroup","alignGroupActive","styleGroup","styleGroupActive","fixColorPicker","colorPicker","TextSpaceAttr","attrTabList","bg","attrAreaComponent","DefaultKey","InitState","attrTab","loading","loadingText","setLoadingText","setAttrTab","EditorProvider","loadImage","Image","onload","onerror","base64ConvertFile","urlData","arr","match","fileExt","bstr","atob","u8arr","Uint8Array","charCodeAt","File","request","axios","create","baseURL","interceptors","response","use","data","code","fetch","params","post","getImageList","postUploadImage","file","form","FormData","append","addImageApi","saveHistory","delstock","getDetail","useToast","toast","duration","useClipImage","_useContext2","EditorContext","saveClipImage","scale","_catch","currentClipImageIndex","newRect","absolutePositioned","clipPath","cropped","setViewportTransform","base64","toDataURL","setZoomAuto","newImage","sendBackwards","cancelClipImage","clipImage","useEvents","_useClipImage","selected","onWheel","deleteObjects","unbind","onZoom","small","preventDefault","stopPropagation","big","_e$transform","delta","deltaY","deleteClipImageAndRect","DefaultWidth","DefaultHeight","DefaultWorkSpaceColor","EditorWorkspace","workspaceEl","Error","dragMode","_initBackground","_initWorkspace","_initResizeObserve","_initDring","offsetWidth","offsetHeight","_this$option","canvasData","objects","rectOptions","loadFromJSON","_initRect","fromURL","w","_this$option$callback","_this$option2","auto","setBgColor","_this$workspace","setCenterFromObject","objCenter","resizeObserver","ResizeObserver","observe","cb","getCenter","iMatrix","zoomToPoint","getScale","viewPortWidth","viewPortHeight","zoomRatio","one","startDring","endDring","This","evt","altKey","_setDring","isDragging","lastPosX","clientX","lastPosY","clientY","useSave","saveToImageLoading","setSaveToImageLoading","useLast","unloadSendBeacon","_useLast$current","dataJson","JSON","stringify","imgSrc","blob","Blob","isPush","navigator","sendBeacon","saveHistoryApi","saveToJson","dataUrl","fileStr","encodeURIComponent","saveAs","saveToImage","format","quality","message","Draw","_useSave","init","window","initCanvas","parse","Canvas","fireRightClick","stopContextMenu","controlsAboveOverlay","preserveObjectStacking","mainImg","_canvasData$objects$f","_temp3","workContent","ImportFile","back","_props$onBack","onBack","importFile","useMemoizedFn","fnRef","useMemo","memoizedFn","dumpIndex","step","targetArr","_current","_before","slice","_after","useHistoryTravel","initialValue","maxLength","present","past","future","history","setHistory","initialValueRef","reset","_initial","updateValue","val","_past","maxLengthNum","splice","_forward","_split","_backward","_split2","go","stepNum","backLength","forwardLength","setValue","forward","useHistory","_useHistoryTravel","historyFlagRef","clear","isSelect","action","undo","redo","HeaderControl","_useHistory","setScale","drawModeRef","onClipImage","onKeyDown","onKeyUp","switchDragMode","switchDefaultMode","_editor$disableGuidel","_editor$enableGuideli","headerControl","clipSaveButton","button","active","visibility","ratioText","SaveButton","headerRightControl","saveWrap","saveButton","useDropDown","clickRef","cacheItem","shareEl","removeEl","_cacheItem$current","stockName","_id","lastIndexOf","run","parentNode","_parentNode$getBoundi","div","DefaultOptions","useAddObject","addImage","Date","now","addText","IText","lockScalingX","lockScalingY","ImageResource","EDIT_IMAGE_LIST","sessionStorage","getItem","uploading","setUploading","_useAddObject","setList","_useDropDown","queryList","onDrop","onDragover","imageUrl","dataTransfer","getData","offset","onClickMore","pageIndex","pageSize","setItem","onUploadFile","fileList","files","_temp4","_finallyRethrows","_forTo","test","_wasThrown","_result","onDragStart","setData","imageResource","uploadFile","multiple","accept","empty","fileListItem","more","TextResource","textResource","addShareTextButton","textListItem","ResourceTypeEnum","ALREADY_UPLOAD","TEXT","resourceNavList","ResourceContentComEnum","_ResourceContentComEn","DefaultSelectKey","ResourceArea","collapsed","setCollapsed","activeKey","setActiveKey","onResourceNavChange","activeIndex","ResourceComponent","onSetCollapsed","setProperty","resourceArea","resourceNav","resourceNavItem","resourceNavItemActive","resourceNavItemPrevActive","resourceNavPlace","resourceContent","packUp","SortableItem","sortableElement","isVisible","clickItem","onLockObject","onHiddenObject","orderListItem","draggable","DragHandle","move","SortableContainer","sortableContainer","OrderList","_userOrder","onSortEnd","oldIndex","newIndex","oldObject","_list$oldIndex","arrayMove","getList","_item$_element","orderWrap","orderListTitle","orderListEmpty","distance","lockAxis","orderList","WorkSpaceAttr","onChangeColor","AttrArea","_attrTabList$find","onChangeTab","AttrCom","attrWrap","backgroundImage","attrTabActive","attrContent","LoadingOverlay","spinner","dmEditImageContainer","header","canvasArea","attrArea","EditImage","Toaster"],"mappings":"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"}